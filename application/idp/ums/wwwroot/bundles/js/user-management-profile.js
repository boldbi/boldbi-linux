!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?exports=e(require("jquery")):e(jQuery)}(function(t){function n(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}void 0!==t.easing&&(t.easing.jswing=t.easing.swing);var i=Math.pow,r=Math.sqrt,s=Math.sin,a=Math.cos,o=Math.PI,l=1.70158,c=1.525*l,u=2*o/3,d=2*o/4.5;t.extend(t.easing,{def:"easeOutQuad",swing:function(e){return t.easing[t.easing.def](e)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-i(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-i(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-i(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-i(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-i(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-i(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-i(-2*e+2,5)/2},easeInSine:function(e){return 1-a(e*o/2)},easeOutSine:function(e){return s(e*o/2)},easeInOutSine:function(e){return-(a(o*e)-1)/2},easeInExpo:function(e){return 0===e?0:i(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-i(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?i(2,20*e-10)/2:(2-i(2,-20*e+10))/2},easeInCirc:function(e){return 1-r(1-i(e,2))},easeOutCirc:function(e){return r(1-i(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-r(1-i(2*e,2)))/2:(r(1-i(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-i(2,10*e-10)*s((10*e-10.75)*u)},easeOutElastic:function(e){return 0===e?0:1===e?1:i(2,-10*e)*s((10*e-.75)*u)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-(i(2,20*e-10)*s((20*e-11.125)*d))/2:i(2,-20*e+10)*s((20*e-11.125)*d)/2+1},easeInBack:function(e){return(1+l)*e*e*e-l*e*e},easeOutBack:function(e){return 1+(1+l)*i(e-1,3)+l*i(e-1,2)},easeInOutBack:function(e){return e<.5?i(2*e,2)*(7.189819*e-c)/2:(i(2*e-2,2)*((1+c)*(2*e-2)+c)+2)/2},easeInBounce:function(e){return 1-n(1-e)},easeOutBounce:n,easeInOutBounce:function(e){return e<.5?(1-n(1-2*e))/2:(1+n(2*e-1))/2}})}),function(e){var l,c,u,t,o,a,d,p,h,f,D,j,m,g,S,_,M,i,A,E,z,v,w,T,F,I,P,L,y,b,x,r=function(e){return new r.prototype.init(e)};"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=r:e.Globalize=r,r.cultures={},(r.prototype={constructor:r,init:function(e){return this.cultures=r.cultures,this.cultureSelector=e,this}}).init.prototype=r.prototype,r.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},r.cultures.default.calendar=r.cultures.default.calendars.standard,r.cultures.en=r.cultures.default,r.cultureSelector="en",l=/^0x[a-f0-9]+$/i,c=/^[+\-]?infinity$/i,u=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,t=/^\s+|\s+$/g,o=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},a=function(e,t){return e.substr(e.length-t.length)===t},d=function(){var e,t,n,i,r,s=arguments[0]||{},a=1,o=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},a=2),"object"==typeof s||h(s)||(s={});a<o;a++)if(null!=(e=arguments[a]))for(t in e)r=s[t],n=e[t],s!==n&&(l&&n&&(f(n)||(i=p(n)))?(r=i?(i=!1,r&&p(r)?r:[]):r&&f(r)?r:{},s[t]=d(l,r,n)):void 0!==n&&(s[t]=n));return s},p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},h=function(e){return"[object Function]"===Object.prototype.toString.call(e)},f=function(e){return"[object Object]"===Object.prototype.toString.call(e)},D=function(e,t){return 0===e.indexOf(t)},j=function(e){return(e+"").replace(t,"")},m=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},g=function(e,t,n){for(var i=e.length;i<t;i+=1)e=n?"0"+e:e+"0";return e},S=function(e,t){for(var n,i=0,r=!1,s=0,a=e.length;s<a;s++)switch(n=e.charAt(s)){case"'":r?t.push("'"):i++,r=!1;break;case"\\":r&&t.push("\\"),r=!r;break;default:t.push(n),r=!1}return i},_=function(e,t){var e=e.patterns,n=(t=t||"F").length;if(1===n){if(!(e=e[t]))throw"Invalid date format string '"+t+"'.";t=e}else 2===n&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},M=function(e,t,n){function i(e,t){var n,e=e+"";return 1<t&&e.length<t?(n=y[t-2]+e).substr(n.length-t,t):e}function r(e,t){if(v)return v[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}var s,a,o,l,c,u,d,h=n.calendar,p=h.convert;if(!t||!t.length||"i"===t)return w=n&&n.name.length?p?M(e,h.patterns.F,n):(n=new Date(e.getTime()),s=E(e,h.eras),n.setFullYear(z(e,h,s)),n.toLocaleString()):e.toString();a=h.eras,o="s"===t,t=_(h,t);var f,m,g,v,w=[],y=["0","00","000"],b=/([^d]|^)(d|dd)([^d]|$)/g,x=0,C=A();for(!o&&p&&(v=p.fromGregorian(e));;){var $=C.lastIndex,k=C.exec(t),$=t.slice($,k?k.index:t.length);if(x+=S($,w),!k)break;if(x%2)w.push(k[0]);else switch(c=(l=k[0]).length,l){case"ddd":case"dddd":u=3===c?h.days.namesAbbr:h.days.names,w.push(u[e.getDay()]);break;case"d":case"dd":m=!0,w.push(i(r(e,2),c));break;case"MMM":case"MMMM":d=r(e,1),w.push((h.monthsGenitive&&(m||g||(m=b.test(t),g=!0),m)?h.monthsGenitive:h.months)[3===c?"namesAbbr":"names"][d]);break;case"M":case"MM":w.push(i(r(e,1)+1,c));break;case"y":case"yy":case"yyyy":d=v?v[0]:z(e,h,E(e,a),o),c<4&&(d%=100),w.push(i(d,c));break;case"h":case"hh":0===(f=e.getHours()%12)&&(f=12),w.push(i(f,c));break;case"H":case"HH":w.push(i(e.getHours(),c));break;case"m":case"mm":w.push(i(e.getMinutes(),c));break;case"s":case"ss":w.push(i(e.getSeconds(),c));break;case"t":case"tt":d=e.getHours()<12?h.AM?h.AM[0]:" ":h.PM?h.PM[0]:" ",w.push(1===c?d.charAt(0):d);break;case"f":case"ff":case"fff":w.push(i(e.getMilliseconds(),3).substr(0,c));break;case"z":case"zz":f=e.getTimezoneOffset()/60,w.push((f<=0?"+":"-")+i(Math.floor(Math.abs(f)),c));break;case"zzz":f=e.getTimezoneOffset()/60,w.push((f<=0?"+":"-")+i(Math.floor(Math.abs(f)),2)+":"+i(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":h.eras&&w.push(h.eras[E(e,a)].name);break;case"/":w.push(h["/"]);break;default:throw"Invalid date format pattern '"+l+"'."}}return w.join("")},x=function(e,t,n){var i=n.groupSizes,r=i[0],s=1,a=Math.pow(10,t),a=Math.round(e*a)/a,o=(e=a=isFinite(a)?a:e)+"",l="",a=o.split(/e/i),e=1<a.length?parseInt(a[1],10):0;o=(a=(o=a[0]).split("."))[0],l=1<a.length?a[1]:"",0<e?(o+=(l=g(l,e,!1)).slice(0,e),l=l.substr(e)):e<0&&(l=(o=g(o,1+(e=-e),!0)).slice(-e,o.length)+l,o=o.slice(0,-e));for(var l=0<t?n["."]+(l.length>t?l.slice(0,t):g(l,t)):"",c=o.length-1,u=n[","],d="";0<=c;){if(0===r||c<r)return o.slice(0,c+1)+(d.length?u+d+l:l);d=o.slice(c-r+1,c+1)+(d.length?u+d:""),c-=r,s<i.length&&(r=i[s],s++)}return o.slice(0,c+1)+u+d+l},i=function(e,t,n){var i,r,s,a,o,l;if(!isFinite(e))return e===1/0?n.numberFormat.positiveInfinity:e===-1/0?n.numberFormat.negativeInfinity:n.numberFormat.NaN;if(!t||"i"===t)return n.name.length?e.toLocaleString():e.toString();t=t||"D";var c,u=n.numberFormat,d=Math.abs(e),h=-1;switch(1<t.length&&(h=parseInt(t.slice(1),10)),i=t.charAt(0).toUpperCase()){case"D":c="n",d=m(d),-1!==h&&(d=g(""+d,h,!0)),e<0&&(d="-"+d);break;case"N":r=u;case"C":r=r||u.currency;case"P":r=r||u.percent,c=e<0?r.pattern[0]:r.pattern[1]||"n",-1===h&&(h=r.decimals),d=x(d*("P"===i?100:1),h,r);break;default:throw"Bad number format specifier: "+i}for(s=/n|\$|-|%/g,a="";o=s.lastIndex,l=s.exec(c),a+=c.slice(o,l?l.index:c.length),l;)switch(l[0]){case"n":a+=d;break;case"$":a+=u.currency.symbol;break;case"-":/[1-9]/.test(d)&&(a+=u["-"]);break;case"%":a+=u.percent.symbol}return a},A=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},E=function(e,t){var n,i,r,s;if(t)for(i=e.getTime(),r=0,s=t.length;r<s;r++)if(null===(n=t[r].start)||n<=i)return r;return 0},z=function(e,t,n,i){e=e.getFullYear();return!i&&t.eras&&(e-=t.eras[n].offset),e},T=function(e,t){var n,i;return t<100&&(n=new Date,i=E(n),n=z(n,e,i),(i="string"==typeof(i=e.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(i,10):i)<(t+=n-n%100))&&(t-=100),t},F=function(e,t,n){var i,r=e.days,s=e._upperDays;return s||(e._upperDays=s=[b(r.names),b(r.namesAbbr),b(r.namesShort)]),t=y(t),n?-1===(i=o(s[1],t))&&(i=o(s[2],t)):i=o(s[0],t),i},I=function(e,t,n){var i=e.months,r=e.monthsGenitive||e.months,s=e._upperMonths,a=e._upperMonthsGen;return s||(e._upperMonths=s=[b(i.names),b(i.namesAbbr)],e._upperMonthsGen=a=[b(r.names),b(r.namesAbbr)]),t=y(t),i=(i=o(n?s[1]:s[0],t))<0?o(n?a[1]:a[0],t):i},P=function(e,t){var n,i,r,s,a,o=e._parseRegExp;if(o){if(a=o[t])return a}else e._parseRegExp=o={};for(var l,c=_(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),u=["^"],d=[],h=0,p=0,f=A();null!==(l=f.exec(c));)if(n=c.slice(h,l.index),h=f.lastIndex,(p+=S(n,u))%2)u.push(l[0]);else{switch(r=(i=l[0]).length,i){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":s="(\\D+)";break;case"tt":case"t":s="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":s="(\\d{"+r+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":s="(\\d\\d?)";break;case"zzz":s="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":s="([+-]?\\d\\d?)";break;case"/":s="(\\/)";break;default:throw"Invalid date format pattern '"+i+"'."}s&&u.push(s),d.push(l[0])}return S(c.slice(h),u),u.push("$"),a=u.join("").replace(/\s+/g,"\\s+"),o[t]={regExp:a,groups:d}},L=function(e,t,n){return e<t||n<e},y=function(e){return e.split(" ").join(" ").toUpperCase()},b=function(e){for(var t=[],n=0,i=e.length;n<i;n++)t[n]=y(e[n]);return t},v=function(e,t,n){e=j(e);var i,r,s,a,o,l,c=n.calendar,n=P(c,t),u=new RegExp(n.regExp).exec(e);if(null===u)return null;for(var d,h=n.groups,p=null,f=null,m=null,g=null,v=null,w=0,y=0,b=0,x=0,C=null,$=!1,k=0,S=h.length;k<S;k++)if(i=u[k+1]){var _=h[k],M=_.length,A=parseInt(i,10);switch(_){case"dd":case"d":if(L(g=A,1,31))return null;break;case"MMM":case"MMMM":if(m=I(c,i,3===M),L(m,0,11))return null;break;case"M":case"MM":if(L(m=A-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(f=M<4?T(c,A):A,L(f,0,9999))return null;break;case"h":case"hh":if(L(w=12===(w=A)?0:w,0,11))return null;break;case"H":case"HH":if(L(w=A,0,23))return null;break;case"m":case"mm":if(L(y=A,0,59))return null;break;case"s":case"ss":if(L(b=A,0,59))return null;break;case"tt":case"t":if(($=c.PM&&(i===c.PM[0]||i===c.PM[1]||i===c.PM[2]))||c.AM&&(i===c.AM[0]||i===c.AM[1]||i===c.AM[2]))break;return null;case"f":case"ff":case"fff":if(x=A*Math.pow(10,3-M),L(x,0,999))return null;break;case"ddd":case"dddd":if(v=F(c,i,3===M),L(v,0,6))return null;break;case"zzz":if(2!==(r=i.split(/:/)).length||(d=parseInt(r[0],10),L(d,-12,13))||(s=parseInt(r[1],10),L(s,0,59)))return null;C=60*d+(D(i,"-")?-s:s);break;case"z":case"zz":if(L(d=A,-12,13))return null;C=60*d;break;case"g":case"gg":if(!(a=i)||!c.eras)return null;for(a=j(a.toLowerCase()),o=0,l=c.eras.length;o<l;o++)if(a===c.eras[o].name.toLowerCase()){p=o;break}if(null===p)return null}}if(t=new Date,n=(e=c.convert)?e.fromGregorian(t)[0]:t.getFullYear(),null===f?f=n:c.eras&&(f+=c.eras[p||0].offset),null===m&&(m=0),null===g&&(g=1),e){if(null===(t=e.toGregorian(f,m,g)))return null}else if(t.setFullYear(f,m,g),t.getDate()!==g||null!==v&&t.getDay()!==v)return null;return $&&w<12&&(w+=12),t.setHours(w,y,b,x),null!==C&&(n=t.getMinutes()-(C+t.getTimezoneOffset()),t.setHours(t.getHours()+parseInt(n/60,10),n%60)),t},w=function(e,t,n){var i,r=t["-"],s=t["+"];switch(n){case"n -":r=" "+r,s=" "+s;case"n-":a(e,r)?i=["-",e.substr(0,e.length-r.length)]:a(e,s)&&(i=["+",e.substr(0,e.length-s.length)]);break;case"- n":r+=" ",s+=" ";case"-n":D(e,r)?i=["-",e.substr(r.length)]:D(e,s)&&(i=["+",e.substr(s.length)]);break;case"(n)":D(e,"(")&&a(e,")")&&(i=["-",e.substr(1,e.length-2)])}return i||["",e]},r.prototype.findClosestCulture=function(e){return r.findClosestCulture.call(this,e)},r.prototype.format=function(e,t,n){return r.format.call(this,e,t,n)},r.prototype.localize=function(e,t){return r.localize.call(this,e,t)},r.prototype.parseInt=function(e,t,n){return r.parseInt.call(this,e,t,n)},r.prototype.parseFloat=function(e,t,n){return r.parseFloat.call(this,e,t,n)},r.prototype.culture=function(e){return r.culture.call(this,e)},r.addCultureInfo=function(e,t,n){var i={},r=!1,i="string"!=typeof e?(n=e,e=this.culture().name,this.cultures[e]):"string"!=typeof t?(n=t,r=null==this.cultures[e],this.cultures[e]||this.cultures.default):(r=!0,this.cultures[t]);this.cultures[e]=d(!0,{},i,n),r&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},r.findClosestCulture=function(e){var t,n,i,r,s,a;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof e&&(e=e.split(",")),p(e)){for(var o,l=this.cultures,c=e,u=c.length,d=[],h=0;h<u;h++)i=(e=j(c[h])).split(";"),o=j(i[0]),n=1!==i.length&&0===(e=j(i[1])).indexOf("q=")?(e=e.substr(2),n=parseFloat(e),isNaN(n)?0:n):1,d.push({lang:o,pri:n});for(d.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0}),h=0;h<u;h++)if(t=l[o=d[h].lang])return t;for(h=0;h<u;h++)for(o=d[h].lang;;){if(-1===(r=o.lastIndexOf("-")))break;if(t=l[o=o.substr(0,r)])return t}for(h=0;h<u;h++)for(s in o=d[h].lang,l)if(a=l[s],a.language==o)return a}else if("object"==typeof e)return e;return t||null},r.format=function(e,t,n){n=this.findClosestCulture(n);return e instanceof Date?e=M(e,t,n):"number"==typeof e&&(e=i(e,t,n)),e},r.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures.default.messages[e]},r.parseDate=function(e,t,n){var i,r,s,a,o,l;if(n=this.findClosestCulture(n),t){if((t="string"==typeof t?[t]:t).length)for(a=0,o=t.length;a<o&&(!(l=t[a])||!(i=v(e,l,n)));a++);}else for(r in s=n.calendar.patterns)if(i=v(e,s[r],n),i)break;return i||null},r.parseInt=function(e,t,n){return m(r.parseFloat(e,t,n))},r.parseFloat=function(e,t,n){"number"!=typeof t&&(n=t,t=10);var i,r,s,n=this.findClosestCulture(n),a=NaN,o=n.numberFormat;return-1<e.indexOf(n.numberFormat.currency.symbol)&&(e=(e=e.replace(n.numberFormat.currency.symbol,"")).replace(n.numberFormat.currency["."],n.numberFormat["."])),e=j(e),c.test(e)?a=parseFloat(e):!t&&l.test(e)?a=parseInt(e,16):(t=(n=w(e,o,o.pattern[0]))[0],s=n[1],""===t&&"(n)"!==o.pattern[0]&&(t=(n=w(e,o,"(n)"))[0],s=n[1]),""===t&&"-n"!==o.pattern[0]&&(t=(n=w(e,o,"-n"))[0],s=n[1]),t=t||"+",n=(e=(e=s.indexOf("e"))<0?s.indexOf("E"):e)<0?(r=s,null):(r=s.substr(0,e),s.substr(e+1)),s=o["."],r=(e=r.indexOf(s))<0?(i=r,null):(i=r.substr(0,e),r.substr(e+s.length)),e=o[","],i=i.split(e).join(""),s=e.replace(/\u00A0/g," "),t=t+(i=e!==s?i.split(s).join(""):i),null!==r&&(t+="."+r),null!==n&&(t+="e"+((e=w(n,o,"-n"))[0]||"+")+e[1]),u.test(t)&&(a=parseFloat(t))),a},r.culture=function(e){return void 0!==e&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures.default}}(this),function(t,n){var e=n.jQuery;"object"==typeof exports?module.exports=e?t(n,e):function(e){if(e&&!e.fn)throw"Provide jQuery or null";return t(n,e)}:"function"==typeof define&&define.amd?define(function(){return t(n)}):t(n,!1)}(function(u,Q){"use strict";function w(n,i){return function(){var e,t=this.base;return this.base=n,e=i.apply(this,arguments),this.base=t,e}}function l(e,t){return k(t)&&((t=w(e?e._d?e:w(c,e):c,t))._d=(e&&e._d||0)+1),t}function R(e,t){var n,i=t.props;for(n in i)!ye.test(n)||e[n]&&e[n].fix||(e[n]="convert"!==n?l(e.constructor.prototype[n],i[n]):i[n])}function e(e){return e}function c(){return""}function t(e){this.name=(Q.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function C(e,t){if(e){for(var n in t)e[n]=t[n];return e}}function y(e,t,n){return e?q(e)?y.apply(v,e):(h=n?n[0]:h,/^(\W|_){5}$/.test(e+t+h)||O("Invalid delimiters"),a=e[0],i=e[1],o=t[0],d=t[1],N.delimiters=[a+i,o+d,h],e="\\"+a+"(\\"+h+")?\\"+i,t="\\"+o+"\\"+d,r="(?:(\\w+(?=[\\/\\s\\"+o+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+o+"]|\\"+o+"(?!\\"+d+"))*?)",Z.rTag="(?:"+r+")",r=new RegExp("(?:"+e+r+"(\\/)?|\\"+a+"(\\"+h+")?\\"+i+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+t,"g"),Z.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+e+".*"+t),s):N.delimiters}function S(){var e=this.get("item");return e?e.index:void 0}function _(){return this.index}function M(e,t,n,i){var r,s,a,o=0;if(1===n&&(i=1,n=void 0),t)for(a=(s=t.split(".")).length;e&&o<a;o++)r=e,e=s[o]?e[s[o]]:e;return n&&(n.lt=n.lt||o<a),void 0===e?i?c:"":i?function(){return e.apply(r,arguments)}:e}function W(e,t,n){var i,r,s,a,o=this,l=!f&&1<arguments.length,c=o.ctx;if(e){if(o._||(s=o.index,o=o.tag),a=o,c&&c.hasOwnProperty(e)||(c=ce).hasOwnProperty(e)){if(r=c[e],"tag"===e||"tagCtx"===e||"root"===e||"parentTags"===e)return r}else c=void 0;if((!f&&o.tagCtx||o.linked)&&(r&&r._cxp||(o=!o.tagCtx&&!k(r)&&!(o=o.scope||o).isTop&&o.ctx.tag||o,c=(o=void 0!==r&&o.tagCtx?o.tagCtx.view.scope:o)._ocps,(r=c&&c.hasOwnProperty(e)&&c[e]||r)&&r._cxp)||!n&&!l||((c||(o._ocps=o._ocps||{}))[e]=r=[{_ocp:r,_vw:a,_key:e}],r._cxp={path:de,ind:0,updateValue:function(e,t){return Q.observable(r[0]).setProperty(de,e),this}}),n=r&&r._cxp)){if(2<arguments.length)return(c=r[1]?Z._ceo(r[1].deps):[de]).unshift(r[0]),c._cxp=n,c;if(s=n.tagElse,c=r[1]?n.tag&&n.tag.cvtArgs?n.tag.cvtArgs(s,1)[n.ind]:r[1](r[0].data,r[0],Z):r[0]._ocp,l)return Z._ucp(e,t,o,n),o;r=c}return r&&k(r)&&C(i=function(){return r.apply(this&&this!==u?this:a,arguments)},r),i||r}}function J(e,t){var n,i,r,s,a,o,l,c=this;if(c.tagName){if(!(c=((o=c).tagCtxs||[c])[e||0]))return}else o=c.tag;if(a=o.bindFrom,s=c.args,(l=(l=o.convert)&&""+l===l?"true"===l?void 0:c.view.getRsc("converters",l)||O("Unknown converter: '"+l+"'"):l)&&!t&&(s=s.slice()),a){for(r=[],n=a.length;n--;)i=a[n],r.unshift(G(c,i));t&&(s=r)}if(l){if(void 0===(l=l.apply(o,r||s)))return s;if(n=(a=a||[0]).length,q(l)&&(!1===l.arg0||1!==n&&l.length===n&&!l.arg0)||(l=[l],a=[0],n=1),t)s=l;else for(;n--;)+(i=a[n])===i&&(s[i]=l[n])}return s}function G(e,t){return(e=e[+t===t?"args":"props"])&&e[t]}function X(e){return this.cvtArgs(e,1)}function $(e,t,n,i,r,s,a,o){var l=this,c="array"===t;l.content=o,l.views=c?[]:{},l.data=i,l.tmpl=r,o=l._={key:0,useKey:c?0:1,id:""+Se++,onRender:a,bnds:{}},l.linked=!!a,l.type=t||"top",t&&(l.cache={_ct:N._cchCt}),n&&"top"!==n.type||((l.ctx=e||{}).root=l.data),(l.parent=n)?(l.root=n.root||l,i=n.views,r=n._,l.isTop=r.scp,l.scope=(!e.tag||e.tag===n.ctx.tag)&&!l.isTop&&n.scope||l,r.useKey?((i[o.key="_"+r.useKey++]=l).index=je,l.getIndex=S):i.length===(o.key=l.index=s)?i.push(l):i.splice(s,0,l),l.ctx=e||n.ctx):t&&(l.root=l)}function b(e,t,n){Object.defineProperty(e,t,{value:n,configurable:!0})}function ee(e,t){var n,i=K._wm||{},r={tmpls:[],links:{},bnds:[],_is:"template",render:te};return(r=t?C(r,t):r).markup=e,r.htmlTag||(n=ve.exec(e),r.htmlTag=n?n[1].toLowerCase():""),(n=i[r.htmlTag])&&n!==i.div&&(r.markup=Q.trim(r.markup)),r}function A(l,c){var u=l+"s";v[u]=function e(t,n,i){var r,s,a,o=Z.onStore[l];if(!t||typeof t!==Ae||t.nodeType||t.markup||t.getTgt||"viewModel"===l&&t.getters||t.extend)return t&&""+t!==t&&(i=n,n=t,t=void 0),a=i?"viewModel"===l?i:i[u]=i[u]||{}:e,r=c.compile,void 0===n&&(n=r?t:a[t],t=void 0),null===n?t&&delete a[t]:(r&&((n=r.call(a,t,n,i,0)||{})._is=l),t&&(a[t]=n)),o&&o(t,n,i,r),n;for(s in t)e(s,t[s],n);return n||v}}function D(t){s[t]=s[t]||function(e){return arguments.length?(N[t]=e,s):N[t]}}function j(n){function i(e,t){this.tgt=n.getTgt(e,t),t.map=this}return(n=(n=k(n)?{getTgt:n}:n).baseMap?C(C({},n.baseMap),n):n).map=function(e,t){return new i(e,t)},n}function te(e,t,n,i,r,s){var a,o,l,c,u,d,h=i,p="";if(!0===t?(n=t,t=void 0):typeof t!==Ae&&(t=void 0),(l=this.tag)?(c=(h=h||this.view)._getTmpl(l.template||this.tmpl),arguments.length||(e=l.contentCtx&&k(l.contentCtx)?l.contentCtx(e):h)):c=this,c){if((h=!i&&e&&"view"===e._is?e:h)&&e===h&&(e=h.data),i=!h,f=f||i,i&&((t=t||{}).root=e),!f||K.useViews||c.useViews||h&&h!==B)p=ne(c,e,t,n,h,r,s,l);else{if(h?(u=h.data,d=h.index,h.index=je):(u=(h=B).data,h.data=e,h.ctx=t),q(e)&&!n)for(a=0,o=e.length;a<o;a++)h.index=a,h.data=e[a],p+=c.fn(e[a],h,Z);else h.data=e,p+=c.fn(e,h,Z);h.data=u,h.index=d}i&&(f=void 0)}return p}function ne(e,t,n,i,r,s,a,o){var l,c,u,d,h,p,f,m,g,v,w,y,b,x="";if(o&&(g=o.tagName,y=o.tagCtx,n=n?U(n,o.ctx):o.ctx,e===r.content?f=e!==r.ctx._wrp?r.ctx._wrp:void 0:e!==y.content?e===o.template?(f=y.tmpl,n._wrp=y.content):f=y.content||r.content:f=r.content,!1===y.props.link)&&((n=n||{}).link=!1),r&&(a=a||r._.onRender,(b=n&&!1===n.link)&&r._.nl&&(a=void 0),n=U(n,r.ctx),y=!o&&r.tag?r.tag.tagCtxs[r.tagElse]:y),(v=y&&y.props.itemVar)&&("~"!==v[0]&&Y("Use itemVar='~myItem'"),v=v.slice(1)),!0===s&&(p=!0,s=0),!0===(m=a=a&&o&&o._.noVws?void 0:a)&&(m=void 0,a=r._.onRender),w=n=e.helpers?U(e.helpers,n):n,q(t)&&!i)for((u=p?r:void 0!==s&&r||new $(n,"array",r,t,e,s,a,f))._.nl=b,r&&r._.useKey&&(u._.bnd=!o||o._.bnd&&o,u.tag=o),l=0,c=t.length;l<c;l++)d=new $(w,"item",u,t[l],e,(s||0)+l,a,u.content),v&&((d.ctx=C({},w))[v]=Z._cp(t[l],"#data",d)),h=e.fn(t[l],d,Z),x+=u._.onRender?u._.onRender(h,d):h;else u=p?r:new $(w,g||"data",r,t,e,s,a,f),v&&((u.ctx=C({},w))[v]=Z._cp(t,"#data",u)),u.tag=o,u._.nl=b,x+=e.fn(t,u,Z);return o&&(u.tagElse=y.index,y.contentView=u),m?m(x,u):x}function O(e){throw new Z.Err(e)}function Y(e){O("Syntax error\n"+e)}function E($,k,S,_,M){function A(e){(e-=T)&&I.push($.substr(T,e).replace(he,"\\n"))}function D(e,t){e&&(e+="}}",Y((t?"{{"+t+"}} block has {{/"+e+" without {{"+e:"Unmatched or missing {{/"+e)+", in template:\n"+$))}var e,t,j,E,n,z=N.allowCode||k&&k.allowCode||!0===s.allowCode,i=[],T=0,F=[],I=i,P=[,,i];if(z&&k._is&&(k.allowCode=z),S&&(void 0!==_&&($=$.slice(0,-_.length-2)+o),$=a+$+d),D(F[0]&&F[0][2].pop()[0]),$.replace(r,function(e,t,n,i,r,s,a,o,l,c,u,d){(a&&t||l&&!n||o&&":"===o.slice(-1)||c)&&Y(e),s&&(r=":",i=V);var h,p,f,c=(t||S)&&[[]],m="",g="",v="",w="",y="",b="",x="",C="",s=!(l=l||S&&!M)&&!r;n=n||(o=o||"#data",r),A(d),T=d+e.length,a?z&&I.push(["*","\n"+o.replace(/^:/,"ret+= ").replace(pe,"$1")+";\n"]):n?("else"===n&&(ge.test(o)&&Y('For "{{else if expr}}" use "{{else expr}}"'),c=P[9]&&[[]],P[10]=$.substring(P[10],d),p=P[11]||P[0]||Y("Mismatched: "+e),P=F.pop(),I=P[2],s=!0),o&&se(o.replace(he," "),c,k,S).replace(me,function(e,t,n,i,r,s,a,o){return"this:"===i&&(s="undefined"),o&&(f=f||"@"===o[0]),i="'"+r+"':",a?(g+=n+s+",",w+="'"+o+"',"):n?(v+=i+"j._cp("+s+',"'+o+'",view),',b+=i+"'"+o+"',"):t?x+=s:("trigger"===r&&(C+=s),"lateRender"===r&&(h="false"!==o),m+=i+s+",",y+=i+"'"+o+"',",E=E||ye.test(r)),""}).slice(0,-1),c&&c[0]&&c.pop(),j=[n,i||!!_||E||"",s&&[],re(w||(":"===n?"'#data',":""),y,b),re(g||(":"===n?"data,":""),m,v),x,C,h,f,c||0],I.push(j),s&&(F.push(P),(P=j)[10]=T,P[11]=p)):u&&(D(u!==P[0]&&u!==P[11]&&u,P[0]),P[10]=$.substring(P[10],d),P=F.pop()),D(!P&&u),I=P[2]}),A($.length),(T=i[i.length-1])&&D(""+T!==T&&+T[10]===T[10]&&T[0]),S){for(t=ae(i,$,S),n=[],e=i.length;e--;)n.unshift(i[e][9]);ie(t,n)}else t=ae(i,k);return t}function ie(e,t){var n,i,r=0,s=t.length;for(e.deps=[],e.paths=[];r<s;r++)for(n in e.paths.push(i=t[r]),i)"_jsvto"!==n&&i.hasOwnProperty(n)&&i[n].length&&!i[n].skp&&(e.deps=e.deps.concat(i[n]))}function re(e,t,n){return[e.slice(0,-1),t.slice(0,-1),n.slice(0,-1)]}function se(M,A,e,D){var j,E,z,T,F=A&&A[0],I={bd:F},P={0:I},L=0,N=0,R=0,O={},U=0,B={},q={},H={},V={0:0},W={0:""},J=0,e=((M="@"===M[0]?M.replace(ke,"."):M)+(e?" ":"")).replace(Z.rPrm,function(e,t,n,i,l,r,s,a,o,c,u,d,h,p,f,m,g,v,w,y,b){r=r||"",h=h||"",n=n||t||h,l=(l=i&&!a?i+l:l)||o,(c=c&&!/\)|]/.test(b[y-1]))&&(l=l.slice(1).split(".").join("^")),u=u||v||"";var x,C,$,k,S,_=y;if(!T&&!z){if(s&&Y(M),g&&F){if(o=H[R-1],b.length-1>_-(o||0)){if(o=Q.trim(b.slice(o,_+e.length)),x=E||P[R-1].bd,(C=x[x.length-1])&&C.prm){for(;C.sb&&C.sb.prm;)C=C.sb;$=C.sb={path:C.sb,bnd:C.bnd}}else x.push($={path:x.pop()});C&&C.sb===$&&(W[R]=W[R-1].slice(C._cpPthSt)+W[R],W[R-1]=W[R-1].slice(0,C._cpPthSt)),$._cpPthSt=V[R-1],$._cpKey=o,W[R]+=b.slice(J,y),J=y,$._cpfn=Ee[o]=Ee[o]||new Function("data,view,j","//"+o+"\nvar v;\nreturn ((v="+W[R]+("]"===m?")]":m)+")!=null?v:null);"),W[R-1]+=q[N]&&K.cache?'view.getCache("'+o.replace(fe,"\\$&")+'"':W[R],$.prm=I.bd,$.bnd=$.bnd||$.path&&0<=$.path.indexOf("^")}W[R]=""}"["===u&&(u="[j._sq("),"["===n&&(n="[j._sq(")}return s=T?(T=!p)?e:h+'"':z?(z=!f)?e:h+'"':(n?(B[++N]=!0,O[N]=0,F&&(H[R++]=_++,I=P[R]={bd:[]},W[R]="",V[R]=1),n):"")+(w?N?"":(L=b.slice(L,_),(j?(j=E=!1,"\b"):"\b,")+L+(L=_+e.length,F&&A.push(I.bd=[]),"\b")):a?(R&&Y(M),F&&A.pop(),j="_"+l,L=_+e.length,F&&((F=I.bd=A[j]=[]).skp=!i),l+":"):l?l.split("^").join(".").replace(Z.rPath,function(e,t,n,i,r,s,a,o){if(k="."===n,n&&(l=l.slice(t.length),/^\.?constructor$/.test(o||l)&&Y(e),k||(e=(c?(D?"":"(ltOb.lt=ltOb.lt||")+"(ob=":"")+(i?'view.ctxPrm("'+i+'")':r?"view":"data")+(c?")===undefined"+(D?"":")")+'?"":view._getOb(ob,"':"")+(o?(s?"."+s:i||r?"":"."+n)+(a||""):(o=i?"":r?s||"":n,"")),e=t+("view.data"===(e+=o?"."+o:"").slice(0,9)?e.slice(5):e)+(c?(D?'"':'",ltOb')+(u?",1)":")"):"")),F)){if(x="_linkTo"===j?E=A._jsvto=A._jsvto||[]:I.bd,C=k&&x[x.length-1]){if(C._cpfn){for(;C.sb;)C=C.sb;C.prm&&(C.bnd&&(l="^"+l.slice(1)),C.sb=l,C.bnd=C.bnd||"^"===l[0])}}else x.push(l);u&&!k&&(H[R]=_,V[R]=W[R].length)}return e})+(u||r):r||(m?"]"===m?")]":")":d?(q[N]||Y(M),","):t?"":(T=p,z=f,'"'))),T||z||m&&(q[N]=!1,N--),F&&(T||z||(m&&(B[N+1]&&(I=P[--R],B[N+1]=!1),U=O[N+1]),u&&(O[N+1]=W[R].length+(n?1:0),l||m)&&(I=P[++R]={bd:[]},B[N+1]=!0)),W[R]=(W[R]||"")+b.slice(J,y),J=y+e.length,T||z||((S=n&&B[N+1])&&(W[R-1]+=n,V[R-1]++),"("===u&&k&&!$&&(W[R]=W[R-1].slice(U)+W[R],W[R-1]=W[R-1].slice(0,U))),W[R]+=S?s.slice(1):s),T||z||!u||(N++,l&&"("===u&&(q[N]=!0)),T||z||!v||(F&&(W[R]+=u),s+=u),s});return F&&(e=W[0]),!N&&e||Y(M)}function ae(e,t,n){var i,r,s,a,o,l,c,u,d,h,p,f,m,g,v,w,y,b,x,C,$,k,S,_,M,A,D,j,E,z=0,T=K.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,F="",I={},P=e.length;for(""+t===t?(v=n?'data-link="'+t.replace(he," ").slice(1,-1)+'"':t,t=0):(v=t.tmplName||"unnamed",t.allowCode&&(I.allowCode=!0),t.debug&&(I.debug=!0),d=t.bnds,g=t.tmpls),i=0;i<P;i++)if(""+(r=e[i])===r)F+='+"'+r+'"';else if("*"===(s=r[0]))F+=";\n"+r[1]+"\nret=ret";else{if(a=r[1],y=!n&&r[2],j=r[3],E=p=r[4],j="\n\tparams:{args:["+j[0]+"],\n\tprops:{"+j[1]+"}"+(j[2]?",\n\tctx:{"+j[2]+"}":"")+"},\n\targs:["+E[0]+"],\n\tprops:{"+E[1]+"}"+(E[2]?",\n\tctx:{"+E[2]+"}":""),E=r[6],M=r[7],D=r[8]?(A="\nvar ob,ltOb={},ctxs=",";\nctxs.lt=ltOb.lt;\nreturn ctxs;"):(A="\nreturn ",""),_=r[10]&&r[10].replace(pe,"$1"),(C="else"===s)?h&&h.push(r[9]):(S=r[5]||!1!==N.debugMode&&"undefined",d&&(h=r[9])&&(h=[h],z=d.push(1))),T=T||p[1]||p[2]||h||/view.(?!index)/.test(p[0]),($=":"===s)?a&&(s=a===V?">":a+s):(y&&((_=ee(_,I)).tmplName=v+"/"+s,_.useViews=_.useViews||T,ae(y,_),T=_.useViews,g.push(_)),C||(w=s,T=T||s&&(!L[s]||!L[s].flow),x=F,F=""),b=(b=e[i+1])&&"else"===b[0]),_=S?";\ntry{\nret+=":"\n+",f=C="",$&&(h||E||a&&a!==V||M)){if((k=new Function("data,view,j","// "+v+" "+ ++z+" "+s+A+"{"+j+"};"+D))._er=S,k._tag=s,k._bd=!!h,k._lr=M,n)return k;ie(k,h),u=!0,C=(m='c("'+a+'",view,')+z+",",f=")"}if(F+=$?(n?(S?"try{\n":"")+"return ":_)+(u?(T=c=!(u=void 0),m+(k?(d[z-1]=k,z):"{"+j+"}")+")"):">"===s?(l=!0,"h("+p[0]+")"):"((v="+p[0]+")!=null?v:"+(n?"null)":'"")')):(o=!0,"\n{view:view,content:false,tmpl:"+(y?g.length:"false")+","+j+"},"),w&&!b){if(F="["+F.slice(0,-1)+"]",m='t("'+w+'",view,this,',n||h){if((F=new Function("data,view,j"," // "+v+" "+z+" "+w+A+F+D))._er=S,F._tag=w,h&&ie(d[z-1]=F,h),F._lr=M,n)return F;C=m+z+",undefined,",f=")"}F=x+_+m+(h&&z||F)+")",w=h=0}S&&!b&&(T=!0,F+=";\n}catch(e){ret"+(n?"urn ":"+=")+C+"j._err(e,view,"+S+")"+f+";}"+(n?"":"\nret=ret"))}F="// "+v+(I.debug?"\ndebugger;":"")+"\nvar v"+(o?",t=j._tag":"")+(c?",c=j._cnvt":"")+(l?",h=j._html":"")+(n?(r[8]?", ob":"")+";\n":',ret=""')+F+(n?"\n":";\nreturn ret;");try{F=new Function("data,view,j",F)}catch(e){Y("Compiled template code:\n\n"+F+'\n: "'+(e.message||e)+'"')}return t&&(t.fn=F,t.useViews=!!T),F}function U(e,t){return e&&e!==t?t?C(C({},t),e):e:t&&C({},t)}function z(t,e){var n,i,r,s=e.tag,a=e.props,o=e.params.props,l=a.filter,c=a.sort,u=!0===c,d=parseInt(a.step),h=a.reverse?-1:1;if(q(t)){if(u||c&&""+c===c?((n=t.map(function(e,t){return{i:t,v:""+(e=u?e:M(e,c))===e?e.toLowerCase():e}})).sort(function(e,t){return e.v>t.v?h:e.v<t.v?-h:0}),t=n.map(function(e){return t[e.i]})):(c||h<0)&&!s.dataMap&&(t=t.slice()),k(c)&&(t=t.sort(function(){return c.apply(e,arguments)})),(t=h<0&&(!c||k(c))?t.reverse():t).filter&&l&&(t=t.filter(l,e),e.tag.onFilter)&&e.tag.onFilter(e),o.sorted&&(n=c||h<0?t:t.slice(),s.sorted?Q.observable(s.sorted).refresh(n):e.map.sorted=n),i=a.start,r=a.end,(o.start&&void 0===i||o.end&&void 0===r)&&(i=r=0),isNaN(i)&&isNaN(r)||(r=void 0===r||r>t.length?t.length:+r,t=t.slice(i=+i||0,r)),1<d){for(i=0,r=t.length,n=[];i<r;i+=d)n.push(t[i]);t=n}o.paged&&s.paged&&$observable(s.paged).refresh(t)}return t}function T(e,t,n){var i=this.jquery&&(this[0]||O("Unknown template")),r=i.getAttribute(De);return te.call(r&&Q.data(i)[m]||p(i),e,t,n)}function F(e){return _e[e]||(_e[e]="&#"+e.charCodeAt(0)+";")}function I(e,t){return Me[t]||""}function P(e){return null!=e?we.test(e)&&(""+e).replace(xe,F)||e:""}var oe=!1===Q;Q=Q&&Q.fn?Q:u.jQuery;var le,r,B,x,k,q,p,H,ce,L,Z,N,K,s,a,i,o,d,h,ue,f,n="v1.0.11",de="_ocp",he=/[ \t]*(\r\n|\n|\r)/g,pe=/\\(['"\\])/g,fe=/['"\\]/g,me=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,ge=/^if\s/,ve=/<(\w+)[>\s]/,we=/[\x00`><\"'&=]/,ye=/^on[A-Z]|^convert(Back)?$/,be=/^\#\d+_`[\s\S]*\/\d+_`$/,xe=/[\x00`><"'&=]/g,Ce=/[&<>]/g,$e=/&(amp|gt|lt);/g,ke=/\[['"]?|['"]?\]/g,Se=0,_e={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},Me={amp:"&",gt:">",lt:"<"},V="html",Ae="object",De="data-jsv-tmpl",m="jsvTmpl",je="For #index in nested block use #getIndex().",Ee={},ze={},g=u.jsrender,Te=g&&Q&&!Q.render,Fe={template:{compile:function n(i,e,r,s){function t(e){var t;if(""+e===e||0<e.nodeType&&(a=e)){if(!a)if(/^\.?\/[^\\:*?"<>]*$/.test(e))(t=p[i=i||e])?e=t:a=document.getElementById(e);else if("#"===e.charAt(0))a=document.getElementById(e.slice(1));else if(Q.fn&&!Z.rTmpl.test(e))try{a=Q(e,document)[0]}catch(e){}a&&("SCRIPT"!==a.tagName&&O(e+": Use script block, not "+a.tagName),s?e=a.innerHTML:((t=a.getAttribute(De))&&(t!==m?(e=p[t],delete p[t]):Q.fn&&(e=Q.data(a)[m])),(e=t&&e?e:n(i=i||(Q.fn?m:e),a.innerHTML,r,s)).tmplName=i=i||t,i!==m&&(p[i]=e),a.setAttribute(De,i),Q.fn&&Q.data(a,m,e))),a=void 0}else e.fn||(e=void 0);return e}var a,o,l,c,u,d=e=e||"";if(Z._html=H.html,0===s&&(s=void 0,d=t(d)),(s=s||(e.markup?e.bnds?C({},e):e:{})).tmplName=s.tmplName||i||"unnamed",r&&(s._parentTmpl=r),void 0!==(d=!d&&e.markup&&(d=t(e.markup))&&d.fn?d.markup:d)){if(d.render||e.render?d.tmpls&&(o=d):(e=ee(d,s),E(d.replace(fe,"\\$&"),e)),!o){var h=o=C(function(){return o.render.apply(o,arguments)},e);for(l in Fe)c=l+"s",h[c]&&(u=h[c],h[c]={},v[c](u,h))}return o}}},tag:{compile:function(e,t,n){function i(){this._={unlinked:!0},this.inline=!0,this.tagName=e}var r,s,a,o=new Z._tg;if(k(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t}),s=t.baseTag)for(a in t.flow=!!t.flow,(s=""+s===s?n&&n.tags[s]||L[s]:s)||O('baseTag: "'+t.baseTag+'" not found'),o=C(o,s),t)o[a]=l(s[a],t[a]);else o=C(o,t);return void 0!==(r=o.template)&&(o.template=""+r===r?p[r]||p(r):r),(i.prototype=o).constructor=o._ctr=i,n&&(o._parentTmpl=n),o}},viewModel:{compile:function(l,e){function t(e){n.apply(this,e)}function m(){return new t(arguments)}function g(e,t){for(var n,i,r,s,a,o,l=0;l<f;l++)n=void 0,(i=h[l])+""!==i&&(i=(n=i).getter,s=n.parentRef),void 0===(r=e[i])&&n&&void 0!==(a=n.defaultVal)&&(o=e,r=k(a=a)?a.call(o):a),t(r,n&&d[n.type],i,s)}function c(e,t,n){e=e+""===e?JSON.parse(e):e;var i,r,s,a,o,l,c,u,d,h,p=0,f=this;if(q(f)){for(c={},d=[],r=e.length,s=f.length;p<r;p++){for(u=e[p],l=!1,i=0;i<s&&!l;i++)c[i]||(o=f[i],v&&(c[i]=l=v+""===v?u[v]&&(y[v]?o[v]():o[v])===u[v]:v(o,u)));l?(o.merge(u),d.push(o)):(d.push(h=m.map(u)),n&&b(h,n,t))}w?w(f).refresh(d,!0):f.splice.apply(f,[0,f.length].concat(d))}else for(a in g(e,function(e,t,n,i){t?f[n]().merge(e,f,i):f[n]()!==e&&f[n](e)}),e)a===x||y[a]||(f[a]=e[a])}function u(){function e(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n].unmap());return t}var t,n,i,r,s=0,a=this;if(q(a))return e(a);for(t={};s<f;s++)i=void 0,r=a[n=(n=h[s])+""!==n?(i=n).getter:n](),t[n]=i&&r&&d[i.type]?q(r)?e(r):r.unmap():r;for(n in a)!a.hasOwnProperty(n)||"_"===n.charAt(0)&&y[n.slice(1)]||n===x||k(a[n])||(t[n]=a[n]);return t}var i,n,r,d=this,h=e.getters,s=e.extend,v=e.id,a=Q.extend({_is:l||"unnamed",unmap:u,merge:c},s),o="",p="",f=h?h.length:0,w=Q.observable,y={};for(t.prototype=a,i=0;i<f;i++)!function(t){t=t.getter||t,y[t]=i+1;var n="_"+t;o+=(o?",":"")+t,p+="this."+n+" = "+t+";\n",a[t]=a[t]||function(e){return arguments.length?void(w?w(this).setProperty(t,e):this[n]=e):this[n]},w&&(a[t].set=a[t].set||function(e){this[n]=e})}(h[i]);return p=new Function(o,p),((n=function(){p.apply(this,arguments),(r=arguments[f+1])&&b(this,arguments[f],r)}).prototype=a).constructor=n,m.map=function(e){var t,n,i,r,s=0,a=e=e+""===e?JSON.parse(e):e,o=[];if(q(e)){for(t=(e=e||[]).length;s<t;s++)o.push(this.map(e[s]));return o._is=l,o.unmap=u,o.merge=c,o}if(e){for(g(e,function(e,t){t&&(e=t.map(e)),o.push(e)}),a=this.apply(this,o),s=f;s--;)if(i=o[s],(r=h[s].parentRef)&&i&&i.unmap)if(q(i))for(t=i.length;t--;)b(i[t],r,a);else b(i,r,a);for(n in e)n===x||y[n]||(a[n]=e[n])}return a},m.getters=h,m.extend=s,m.id=v,m}},helper:{},converter:{}},v={jsviews:n,sub:{rPath:/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rPrm:/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(?:(\()\s*)?\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,View:$,Err:t,tmplFn:E,parse:se,extend:C,extendCtx:U,syntaxErr:Y,onStore:{template:function(e,t){null===t?delete ze[e]:e&&(ze[e]=t)}},addSetting:D,settings:{allowCode:!1},advSet:c,_thp:R,_gm:l,_tg:function(){},_cnvt:function(e,t,n,i){var r,s,a,o,l,c="number"==typeof n&&t.tmpl.bnds[n-1];if(void 0!==(i=void 0===i&&c&&c._lr?"":i)?n=i={props:{},args:[i]}:c&&(n=c(t.data,t,Z)),c=c._bd&&c,e||c){if(r=(s=t._lc)&&s.tag,n.view=t,!r){if(r=C(new Z._tg,{_:{bnd:c,unlinked:!0,lt:n.lt},inline:!s,tagName:":",convert:e,onArrayChange:!0,flow:!0,tagCtx:n,tagCtxs:[n],_is:"tag"}),1<(o=n.args.length))for(l=r.bindTo=[];o--;)l.unshift(o);s&&((s.tag=r).linkCtx=s),n.ctx=U(n.ctx,(s?s.view:t).ctx),R(r,n)}r._er=i&&a,r.ctx=n.ctx||r.ctx||{},n.ctx=void 0,a=r.cvtArgs()[0],r._er=i&&a}else a=n.args[0];return null!=(a=c&&t._.onRender?t._.onRender(a,t,r):a)?a:""},_tag:function(e,t,n,i,r,s){function P(e){var t=a[e];if(void 0!==t)for(t=q(t)?t:[t],h=t.length;h--;)_=t[h],isNaN(parseInt(_))||(t[h]=parseInt(_));return t||[0]}var a,o,l,c,u,d,h,p,f,m,g,v,w,y,b,x,C,L,$,k,S,_,M,A,D,j,E=0,z="",T=(t=t||B)._lc||!1,F=t.ctx,N=n||t.tmpl,I="number"==typeof i&&t.tmpl.bnds[i-1];for(("tag"===e._is?(e=(a=e).tagName,i=a.tagCtxs,a):o=t.getRsc("tags",e)||O("Unknown tag: {{"+e+"}} ")).template,void 0!==(s=void 0===s&&I&&(I._lr=o.lateRender&&!1!==I._lr||I._lr)?"":s)?(z+=s,i=s=[{props:{},args:[],params:{props:{}}}]):I&&(i=I(t.data,t,Z)),d=i.length;E<d;E++)b=(m=i[E]).tmpl,(!T||!T.tag||E&&!T.tag.inline||a._er||b&&+b===b)&&(b&&N.tmpls&&(m.tmpl=m.content=N.tmpls[b-1]),m.index=E,m.ctxPrm=W,m.render=te,m.cvtArgs=J,m.bndArgs=X,m.view=t,m.ctx=U(U(m.ctx,o&&o.ctx),F)),(n=m.props.tmpl)&&(m.tmpl=t._getTmpl(n),m.content=m.content||m.tmpl),a?T&&T.fn._lr&&(x=!!a.init):(x=!!(a=new o._ctr).init,a.parent=u=F&&F.tag,a.tagCtxs=i,T&&(a.inline=!1,T.tag=a),a.linkCtx=T,(a._.bnd=I||T.fn)?(a._.ths=m.params.props.this,a._.lt=i.lt,a._.arrVws={}):a.dataBoundOnly&&O(e+" must be data-bound:\n{^{"+e+"}}")),k=a.dataMap,m.tag=a,k&&i&&(m.map=i[E].map),a.flow||(b=m.ctx=m.ctx||{},l=a.parents=b.parentTags=F&&U(b.parentTags,F.parentTags)||{},u&&(l[u.tagName]=u),l[a.tagName]=b.tag=a,b.tagCtx=m);if(!(a._er=s)){for(R(a,i[0]),a.rendering={rndr:a.rendering},E=0;E<d;E++){if($=(m=a.tagCtx=i[E]).props,a.ctx=m.ctx,!E){if(x&&(a.init(m,T,a.ctx),x=void 0),m.args.length||!1===m.argDefault||!1===a.argDefault||(m.args=C=[m.view.data],m.params.args=["#data"]),v=P("bindTo"),void 0!==a.bindTo&&(a.bindTo=v),void 0!==a.bindFrom?a.bindFrom=P("bindFrom"):a.bindTo&&(a.bindFrom=a.bindTo=v),w=a.bindFrom||v,A=v.length,M=w.length,a._.bnd&&(D=a.linkedElement)&&(a.linkedElement=D=q(D)?D:[D],A!==D.length)&&O("linkedElement not same length as bindTo"),(D=a.linkedCtxParam)&&(a.linkedCtxParam=D=q(D)?D:[D],M!==D.length)&&O("linkedCtxParam not same length as bindFrom/bindTo"),w)for(a._.fromIndex={},a._.toIndex={},p=M;p--;)for(_=w[p],h=A;h--;)_===v[h]&&(a._.fromIndex[h]=p,a._.toIndex[p]=h);T&&(T.attr=a.attr=T.attr||a.attr||T._dfAt),c=a.attr,a._.noVws=c&&c!==V}if(C=a.cvtArgs(E),a.linkedCtxParam)for(L=a.cvtArgs(E,1),h=M,j=a.constructor.prototype.ctx;h--;)(g=a.linkedCtxParam[h])&&(_=w[h],y=L[h],m.ctx[g]=Z._cp(j&&void 0===y?j[g]:y,void 0!==y&&G(m.params,_),m.view,a._.bnd&&{tag:a,cvt:a.convert,ind:h,tagElse:E}));(S=$.dataMap||k)&&(C.length||$.dataMap)&&(($=m.map)&&$.src===C[0]&&!r||($&&$.src&&$.unmap(),S.map(C[0],m,$,!a._.bnd),$=m.map),C=[$.tgt]),f=void 0,a.render&&(f=a.render.apply(a,C),t.linked)&&f&&!be.test(f)&&((n={links:[]}).render=n.fn=function(){return f},f=ne(n,t.data,void 0,!0,t,void 0,void 0,a)),C.length||(C=[t]),void 0===f&&(S=C[0],a.contentCtx&&(S=!0===a.contentCtx?t:a.contentCtx(S)),f=m.render(S,!0)||(r?void 0:"")),z=z?z+(f||""):void 0!==f?""+f:void 0}a.rendering=a.rendering.rndr}return a.tagCtx=i[0],a.ctx=a.tagCtx.ctx,a._.noVws&&a.inline&&(z="text"===c?H.html(z):""),I&&t._.onRender?t._.onRender(z,t,a):z},_er:O,_err:function(e,t,n){var i=void 0!==n?k(n)?n.call(t.data,e,t):n||"":"{Error: "+(e.message||e)+"}";return N.onError&&void 0!==(n=N.onError.call(t.data,e,n&&i,t))&&(i=n),t&&!t._lc?H.html(i):i},_cp:e,_sq:function(e){return"constructor"===e&&Y(""),e}},settings:{delimiters:y,advanced:function(e){return e?(C(K,e),Z.advSet(),s):K}},map:j};if((t.prototype=new Error).constructor=t,S.depends=function(){return[this.get("item"),"index"]},_.depends="index",$.prototype={get:function(e,t){t||!0===e||(t=e,e=void 0);var n,i,r,s,a=this,o="root"===t;if(e){if(!(s=t&&a.type===t&&a))if(n=a.views,a._.useKey){for(i in n)if(s=t?n[i].get(e,t):n[i])break}else for(i=0,r=n.length;!s&&i<r;i++)s=t?n[i].get(e,t):n[i]}else if(o)s=a.root;else if(t)for(;a&&!s;)s=a.type===t?a:void 0,a=a.parent;else s=a.parent;return s||void 0},getIndex:_,ctxPrm:W,getRsc:function(e,t){var n,i,r=this;if(""+t===t){for(;void 0===n&&r;)n=(i=r.tmpl&&r.tmpl[e])&&i[t],r=r.parent;return n||v[e][t]}},_getTmpl:function(e){return e&&(e.fn?e:this.getRsc("templates",e)||p(e))},_getOb:M,getCache:function(e){return N._cchCt>this.cache._ct&&(this.cache={_ct:N._cchCt}),void 0!==this.cache[e]?this.cache[e]:this.cache[e]=Ee[e](this.data,this,Z)},_is:"view"},Z=v.sub,s=v.settings,!(g||Q&&Q.render)){for(le in Fe)A(le,Fe[le]);if(H=v.converters,ce=v.helpers,L=v.tags,Z._tg.prototype={baseApply:function(e){return this.base.apply(this,e)},cvtArgs:J,bndArgs:X,ctxPrm:W},B=Z.topView=new $,Q){if(Q.fn.render=T,x=Q.expando,Q.observable){if(n!==(n=Q.views.jsviews))throw"jquery.observable.js requires jsrender.js "+n;C(Z,Q.views.sub),v.map=Q.views.map}}else Q={},oe&&(u.jsrender=Q),Q.renderFile=Q.__express=Q.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},Q.isFunction=function(e){return"function"==typeof e},Q.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},Z._jq=function(e){e!==Q&&(C(e,Q),(Q=e).fn.render=T,delete Q.jsrender,x=Q.expando)},Q.jsrender=n;for(ue in(N=Z.settings).allowCode=!1,k=Q.isFunction,Q.render=ze,Q.views=v,Q.templates=p=v.templates,N)D(ue);(s.debugMode=function(e){return void 0===e?N.debugMode:(N._clFns&&N._clFns(),N.debugMode=e,N.onError=e+""===e?function(){return e}:k(e)?e:void 0,s)})(!1),K=N.advanced={cache:!0,useViews:!1,_jsv:!1},L({if:{render:function(e){var t=this.tagCtx;return this.rendering.done||!e&&(t.args.length||!t.index)?"":(this.rendering.done=!0,void(this.selected=t.index))},contentCtx:!0,flow:!0},for:{sortDataMap:j(z),init:function(e,t){this.setDataMap(this.tagCtxs)},render:function(e){var t,n,i,r,s=this.tagCtx,a=!1===s.argDefault,o=s.props,l=a||s.args.length,c="",u=0;if(!this.rendering.done){if(t=l?e:s.view.data,a)for(a=o.reverse?"unshift":"push",i=+o.end,r=+o.step||1,t=[],n=+o.start||0;0<(i-n)*r;n+=r)t[a](n);void 0!==t&&(e=q(t),c+=s.render(t,!l||o.noIteration),u+=e?t.length:1),(this.rendering.done=u)&&(this.selected=s.index)}return c},setDataMap:function(e){for(var t,n,i,r=e.length;r--;)n=(t=e[r]).props,i=t.params.props,t.argDefault=void 0===n.end||0<t.args.length,n.dataMap=!1!==t.argDefault&&q(t.args[0])&&(i.sort||i.start||i.end||i.step||i.filter||i.reverse||n.sort||n.start||n.end||n.step||n.filter||n.reverse)&&this.sortDataMap},flow:!0},props:{baseTag:"for",dataMap:j(function(e,t){var n,i,r=t.map,s=r&&r.propsArr;if(!s){if(s=[],typeof e===Ae||k(e))for(n in e)i=e[n],n===x||!e.hasOwnProperty(n)||t.props.noFunctions&&Q.isFunction(i)||s.push({key:n,prop:i});r&&(r.propsArr=r.options&&s)}return z(s,t)}),init:c,flow:!0},include:{flow:!0},"*":{render:e,flow:!0},":*":{render:e,flow:!0},dbg:ce.dbg=H.dbg=function(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}}),H({html:P,attr:P,encode:function(e){return""+e===e?e.replace(Ce,F):e},unencode:function(e){return""+e===e?e.replace($e,I):e},url:function(e){return null!=e?encodeURI(""+e):null===e?e:""}})}return N=Z.settings,q=(Q||g).isArray,s.delimiters("{{","}}","^"),Te&&g.views.sub._jq(Q),Q||g},window),function(l){"use strict";function e(){this.minw=40,this.minh=40,this.maxw=0,this.maxh=0,this.core=null}function t(){this.core=null}function i(){this.core=null}function r(){this.stepx=1,this.stepy=1,this.core=null}function s(){this.ratio=0,this.core=null}function a(){this.core=null}function o(e,t){this.color=t||"black",this.opacity=e||.5,this.core=null,this.shades={}}function c(e){this.selection=e,this.core=e.core}function u(e,t,n){var i=this,t=(i.x=e.pageX,i.y=e.pageY,i.selection=t,i.eventTarget=t.core.opt.dragEventTarget,i.orig=t.get(),t.callFilterFunction("refresh"),t.core.container.position());i.elx=t.left,i.ely=t.top,i.offsetx=0,i.offsety=0,i.ord=n,i.opposite=i.getOppositeCornerOffset(),i.initEvents(e)}function d(e){this.core=e}function h(e,t,n){this.src=e,t=t||new Image,this.element=t,this.callback=n,this.load()}function p(e){this.core=e,this.init()}function f(e){this.core=e,this.init()}function m(){}function g(e,t){l.extend(this,g.defaults,t||{}),this.manager=e,this.core=e.core}function v(e){this.core=e,this.ui=e.ui,this.init()}l.extend(e.prototype,{tag:"backoff",priority:22,filter:function(e){var t=this.bound;return e.x<t.minx&&(e.x=t.minx,e.x2=e.w+e.x),e.y<t.miny&&(e.y=t.miny,e.y2=e.h+e.y),e.x2>t.maxx&&(e.x2=t.maxx,e.x=e.x2-e.w),e.y2>t.maxy&&(e.y2=t.maxy,e.y=e.y2-e.h),e},refresh:function(e){this.elw=e.core.container.width(),this.elh=e.core.container.height(),this.bound={minx:0+e.edge.w,miny:0+e.edge.n,maxx:this.elw+e.edge.e,maxy:this.elh+e.edge.s}}}),l.extend(t.prototype,{tag:"constrain",priority:5,filter:function(e,t){return"move"==t?(e.x<this.minx&&(e.x=this.minx,e.x2=e.w+e.x),e.y<this.miny&&(e.y=this.miny,e.y2=e.h+e.y),e.x2>this.maxx&&(e.x2=this.maxx,e.x=e.x2-e.w),e.y2>this.maxy&&(e.y2=this.maxy,e.y=e.y2-e.h)):(e.x<this.minx&&(e.x=this.minx),e.y<this.miny&&(e.y=this.miny),e.x2>this.maxx&&(e.x2=this.maxx),e.y2>this.maxy&&(e.y2=this.maxy)),e.w=e.x2-e.x,e.h=e.y2-e.y,e},refresh:function(e){this.elw=e.core.container.width(),this.elh=e.core.container.height(),this.minx=0+e.edge.w,this.miny=0+e.edge.n,this.maxx=this.elw+e.edge.e,this.maxy=this.elh+e.edge.s}}),l.extend(i.prototype,{tag:"extent",priority:12,offsetFromCorner:function(e,t,n){var i=t[0],r=t[1];switch(e){case"bl":return[n.x2-i,n.y,i,r];case"tl":return[n.x2-i,n.y2-r,i,r];case"br":return[n.x,n.y,i,r];case"tr":return[n.x,n.y2-r,i,r]}},getQuadrant:function(e){var t=e.opposite[0]-e.offsetx,e=e.opposite[1]-e.offsety;return t<0&&e<0?"br":0<=t&&0<=e?"tl":t<0&&0<=e?"tr":"bl"},filter:function(e,t,n){var i,r;return"move"==t||(t=e.w,i=e.h,n=n.state,r=this.limits,n=n?this.getQuadrant(n):"br",r.minw&&t<r.minw&&(t=r.minw),r.minh&&i<r.minh&&(i=r.minh),r.maxw&&t>r.maxw&&(t=r.maxw),r.maxh&&i>r.maxh&&(i=r.maxh),t==e.w&&i==e.h)?e:w.wrapFromXywh(this.offsetFromCorner(n,[t,i],e))},refresh:function(e){this.elw=e.core.container.width(),this.elh=e.core.container.height(),this.limits={minw:e.minSize[0],minh:e.minSize[1],maxw:e.maxSize[0],maxh:e.maxSize[1]}}}),l.extend(r.prototype,{tag:"grid",priority:19,filter:function(e){e={x:Math.round(e.x/this.stepx)*this.stepx,y:Math.round(e.y/this.stepy)*this.stepy,x2:Math.round(e.x2/this.stepx)*this.stepx,y2:Math.round(e.y2/this.stepy)*this.stepy};return e.w=e.x2-e.x,e.h=e.y2-e.y,e}}),l.extend(s.prototype,{tag:"ratio",priority:15,offsetFromCorner:function(e,t,n){var i=t[0],r=t[1];switch(e){case"bl":return[n.x2-i,n.y,i,r];case"tl":return[n.x2-i,n.y2-r,i,r];case"br":return[n.x,n.y,i,r];case"tr":return[n.x,n.y2-r,i,r]}},getBoundRatio:function(e,t){var n=w.getLargestBox(this.ratio,e.w,e.h);return w.wrapFromXywh(this.offsetFromCorner(t,n,e))},getQuadrant:function(e){var t=e.opposite[0]-e.offsetx,e=e.opposite[1]-e.offsety;return t<0&&e<0?"br":0<=t&&0<=e?"tl":t<0&&0<=e?"tr":"bl"},filter:function(e,t,n){if(!this.ratio)return e;e.w,e.h;var n=n.state,i=n?this.getQuadrant(n):"br";if("move"==(t=t||"se"))return e;switch(t){case"n":e.x2=this.elw,e.w=e.x2-e.x,i="tr";break;case"s":e.x2=this.elw,e.w=e.x2-e.x,i="br";break;case"e":e.y2=this.elh,e.h=e.y2-e.y,i="br";break;case"w":e.y2=this.elh,e.h=e.y2-e.y,i="bl"}return this.getBoundRatio(e,i)},refresh:function(e){this.ratio=e.aspectRatio,this.elw=e.core.container.width(),this.elh=e.core.container.height()}}),l.extend(a.prototype,{tag:"round",priority:90,filter:function(e){e={x:Math.round(e.x),y:Math.round(e.y),x2:Math.round(e.x2),y2:Math.round(e.y2)};return e.w=e.x2-e.x,e.h=e.y2-e.y,e}}),l.extend(o.prototype,{tag:"shader",fade:!0,fadeEasing:"swing",fadeSpeed:320,priority:95,init:function(){var e=this;e.attached||(e.visible=!1,e.container=l("<div />").addClass(e.core.opt.css_shades).prependTo(this.core.container).hide(),e.elh=this.core.container.height(),e.elw=this.core.container.width(),e.shades={top:e.createShade(),right:e.createShade(),left:e.createShade(),bottom:e.createShade()},e.attached=!0)},destroy:function(){this.container.remove()},setColor:function(n,i){var r,s=this;return n!=s.color&&(this.color=n,r=w.supportsColorFade(),l.each(s.shades,function(e,t){s.fade&&!i&&r?t.animate({backgroundColor:n},{queue:!1,duration:s.fadeSpeed,easing:s.fadeEasing}):t.css("backgroundColor",n)})),s},setOpacity:function(n,i){var r=this;return n==r.opacity||(r.opacity=n,l.each(r.shades,function(e,t){!r.fade||i?t.css({opacity:n}):t.animate({opacity:n},{queue:!1,duration:r.fadeSpeed,easing:r.fadeEasing})})),r},createShade:function(){return l("<div />").css({position:"absolute",backgroundColor:this.color,opacity:this.opacity}).appendTo(this.container)},refresh:function(e){var t=this.core,n=this.shades;this.setColor(e.bgColor||this.core.opt.bgColor),this.setOpacity(e.bgOpacity||this.core.opt.bgOpacity),this.elh=t.container.height(),this.elw=t.container.width(),n.right.css("height",this.elh+"px"),n.left.css("height",this.elh+"px")},filter:function(e,t,n){var i;return n.active&&((i=(n=this).shades).top.css({left:Math.round(e.x)+"px",width:Math.round(e.w)+"px",height:Math.round(e.y)+"px"}),i.bottom.css({top:Math.round(e.y2)+"px",left:Math.round(e.x)+"px",width:Math.round(e.w)+"px",height:n.elh-Math.round(e.y2)+"px"}),i.right.css({left:Math.round(e.x2)+"px",width:n.elw-Math.round(e.x2)+"px"}),i.left.css({width:Math.round(e.x)+"px"}),n.visible||(n.container.show(),n.visible=!0)),e}}),l.extend(c.prototype,{getElement:function(){var e=this.selection.get();return l("<div />").css({position:"absolute",top:e.y+"px",left:e.x+"px",width:e.w+"px",height:e.h+"px"})},animate:function(e,t,n,i,r){var s=this;s.selection.allowResize(!1),s.getElement().animate({top:t+"px",left:e+"px",width:n+"px",height:i+"px"},{easing:s.core.opt.animEasing,duration:s.core.opt.animDuration,complete:function(){s.selection.allowResize(!0),r&&r.call(this)},progress:function(e){for(var t={},n=e.tweens,i=0;i<n.length;i++)t[n[i].prop]=n[i].now;e={x:parseInt(t.left),y:parseInt(t.top),w:parseInt(t.width),h:parseInt(t.height)};e.x2=e.x+e.w,e.y2=e.y+e.h,s.selection.updateRaw(e,"se")}})}}),l.extend(u.prototype,{getOppositeCornerOffset:function(){var e=this.orig,t=this.x-this.elx-e.x,n=this.y-this.ely-e.y;switch(this.ord){case"nw":case"w":return[e.w-t,e.h-n];case"sw":return[e.w-t,-n];case"se":case"s":case"e":return[-t,-n];case"ne":case"n":return[-t,e.h-n]}return[null,null]},initEvents:function(){l(this.eventTarget).on("mousemove.jcrop",this.createDragHandler()).on("mouseup.jcrop",this.createStopHandler())},dragEvent:function(e){this.offsetx=e.pageX-this.x,this.offsety=e.pageY-this.y,this.selection.updateRaw(this.getBox(),this.ord)},endDragEvent:function(){var e=this.selection;e.element.trigger("cropend",[e,e.core.unscale(e.get())])},createStopHandler:function(){var t=this;return function(e){return l(t.eventTarget).off(".jcrop"),t.endDragEvent(e),!1}},createDragHandler:function(){var t=this;return function(e){return t.dragEvent(e),!1}},update:function(e,t){this.offsetx=e-this.x,this.offsety=t-this.y},resultWrap:function(e){e={x:Math.min(e[0],e[2]),y:Math.min(e[1],e[3]),x2:Math.max(e[0],e[2]),y2:Math.max(e[1],e[3])};return e.w=e.x2-e.x,e.h=e.y2-e.y,e},getBox:function(){var e=this,t=e.orig,n={x2:t.x+t.w,y2:t.y+t.h};switch(e.ord){case"n":return e.resultWrap([t.x,e.offsety+t.y,n.x2,n.y2]);case"s":return e.resultWrap([t.x,t.y,n.x2,e.offsety+n.y2]);case"e":return e.resultWrap([t.x,t.y,e.offsetx+n.x2,n.y2]);case"w":return e.resultWrap([t.x+e.offsetx,t.y,n.x2,n.y2]);case"sw":return e.resultWrap([e.offsetx+t.x,t.y,n.x2,e.offsety+n.y2]);case"se":return e.resultWrap([t.x,t.y,e.offsetx+n.x2,e.offsety+n.y2]);case"ne":return e.resultWrap([t.x,e.offsety+t.y,e.offsetx+n.x2,n.y2]);case"nw":return e.resultWrap([e.offsetx+t.x,e.offsety+t.y,n.x2,n.y2]);case"move":return n.nx=t.x+e.offsetx,n.ny=t.y+e.offsety,e.resultWrap([n.nx,n.ny,n.nx+t.w,n.ny+t.h])}}}),l.extend(d,{prototype:{on:function(e,t){l(this).on(e,t)},off:function(e){l(this).off(e)},trigger:function(e){l(this).trigger(e)}}}),l.extend(h,{attach:function(e,t){return new h(e.src,e,t)},prototype:{getDimensions:function(){var e=this.element;return e.naturalWidth?[e.naturalWidth,e.naturalHeight]:e.width?[e.width,e.height]:null},fireCallback:function(){this.element.onload=null,"function"==typeof this.callback&&this.callback.apply(this,this.getDimensions())},isLoaded:function(){return this.element.complete},load:function(){var e=this;e.element.src=e.src,e.isLoaded()?e.fireCallback():e.element.onload=function(){e.fireCallback()}}}}),l.extend(p,{support:function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||void 0},prototype:{init:function(){var e=l.Jcrop.component.DragState.prototype;e.touch||(this.initEvents(),this.shimDragState(),this.shimStageDrag(),e.touch=!0)},shimDragState:function(){var t=this;l.Jcrop.component.DragState.prototype.initEvents=function(e){"touch"==e.type.substr(0,5)?l(this.eventTarget).on("touchmove.jcrop.jcrop-touch",t.dragWrap(this.createDragHandler())).on("touchend.jcrop.jcrop-touch",this.createStopHandler()):l(this.eventTarget).on("mousemove.jcrop",this.createDragHandler()).on("mouseup.jcrop",this.createStopHandler())}},shimStageDrag:function(){this.core.container.addClass("jcrop-touch").on("touchstart.jcrop.jcrop-stage",this.dragWrap(this.core.ui.stage.startDragHandler()))},dragWrap:function(t){return function(e){return e.preventDefault(),e.stopPropagation(),"touch"==e.type.substr(0,5)&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,t(e))}},initEvents:function(){var e=this.core;e.container.on("touchstart.jcrop.jcrop-touch","."+e.opt.css_drag,this.dragWrap(e.startDrag()))}}}),l.extend(f,{defaults:{eventName:"keydown.jcrop",passthru:[9],debug:!1},prototype:{init:function(){l.extend(this,f.defaults),this.enable()},disable:function(){this.core.container.off(this.eventName)},enable:function(){var n=this,i=n.core;i.container.on(n.eventName,function(e){var t=e.shiftKey?16:2;if(0<=l.inArray(e.keyCode,n.passthru))return!0;switch(e.keyCode){case 37:i.nudge(-t,0);break;case 38:i.nudge(0,-t);break;case 39:i.nudge(t,0);break;case 40:i.nudge(0,t);break;case 46:case 8:return i.requestDelete(),!1;default:n.debug&&console.log("keycode: "+e.keyCode)}e.metaKey||e.ctrlKey||e.preventDefault()})}}}),l.extend(m,{defaults:{minSize:[8,8],maxSize:[0,0],aspectRatio:0,edge:{n:0,s:0,e:0,w:0},bgColor:null,bgOpacity:null,last:null,state:null,active:!0,linked:!0,canDelete:!0,canDrag:!0,canResize:!0,canSelect:!0},prototype:{init:function(e){this.core=e,this.startup(),this.linked=this.core.opt.linked,this.attach(),this.setOptions(this.core.opt),e.container.trigger("cropcreate",[this])},attach:function(){},startup:function(){var e=this,t=e.core.opt;l.extend(e,m.defaults),e.filter=e.core.getDefaultFilters(),e.element=l("<div />").addClass(t.css_selection).data({selection:e}),e.frame=l("<button />").addClass(t.css_button).data("ord","move"),e.element.append(e.frame).appendTo(e.core.container),e.core.opt.is_msie&&e.frame.css({opacity:0,backgroundColor:"white"}),e.insertElements(),e.frame.on("focus.jcrop",function(){e.element.trigger("cropfocus",e),e.core.setSelection(e),e.element.addClass("jcrop-focus")}).on("blur.jcrop",function(){e.element.removeClass("jcrop-focus"),e.element.trigger("cropblur",e)})},propagate:["canDelete","canDrag","canResize","canSelect","minSize","maxSize","aspectRatio","edge"],setOptions:function(e){return w.propagate(this.propagate,e,this),this.refresh(),this},refresh:function(){this.allowResize(),this.allowDrag(),this.allowSelect(),this.callFilterFunction("refresh"),this.updateRaw(this.get(),"se")},callFilterFunction:function(e){for(var t=0;t<this.filter.length;t++)this.filter[t][e]&&this.filter[t][e](this);return this},addFilter:function(e){e.core=this.core,this.hasFilter(e)||(this.filter.push(e),this.sortFilters(),e.init&&e.init(),this.refresh())},hasFilter:function(e){for(var t=this.filter,n=0;n<t.length;n++)if(t[n]===e)return!0},sortFilters:function(){this.filter.sort(function(e,t){return e.priority-t.priority})},clearFilters:function(){for(var e=this.filter,t=0;t<e.length;t++)e[t].destroy&&e[t].destroy();this.filter=[]},removeFilter:function(e){for(var t=this.filter,n=[],i=0;i<t.length;i++)t[i].tag&&t[i].tag==e||e===t[i]?t[i].destroy&&t[i].destroy():n.push(t[i]);this.filter=n},runFilters:function(e,t){for(var n=0;n<this.filter.length;n++)e=this.filter[n].filter(e,t,this);return e},endDrag:function(){this.state&&(l(document.body).off(".jcrop"),this.focus(),this.state=null)},startDrag:function(e,t){return this.core,t=t||l(e.target).data("ord"),this.focus(),"move"==t&&this.element.hasClass(this.core.opt.css_nodrag)||(this.state=new w.component.DragState(e,this,t)),!1},allowSelect:function(e){return(e=void 0===e?this.canSelect:e)&&this.canSelect?this.frame.attr("disabled",!1):this.frame.attr("disabled","disabled"),this},allowDrag:function(e){var t=this,n=t.core.opt;return(e=null==e?t.canDrag:e)&&t.canDrag?t.element.removeClass(n.css_nodrag):t.element.addClass(n.css_nodrag),this},allowResize:function(e){var t=this,n=t.core.opt;return(e=null==e?t.canResize:e)&&t.canResize?t.element.removeClass(n.css_noresize):t.element.addClass(n.css_noresize),this},remove:function(){this.element.trigger("cropremove",this),this.element.remove()},toBack:function(){this.active=!1,this.element.removeClass("jcrop-current").removeClass("jcrop-focus").css({zIndex:20})},toFront:function(){this.active=!0,this.element.addClass("jcrop-current").css({zIndex:30}),this.callFilterFunction("refresh"),this.refresh()},redraw:function(e){return this.moveTo(e.x,e.y),this.resize(e.w,e.h),this.last=e,this},update:function(e,t){return this.updateRaw(this.core.scale(e),t)},updateRaw:function(e,t){return e=this.runFilters(e,t),this.redraw(e),this.element.trigger("cropmove",[this,this.core.unscale(e)]),this},animateTo:function(e,t){var n=new w.component.Animator(this),e=this.core.scale(w.wrapFromXywh(e));n.animate(e.x,e.y,e.w,e.h,t)},center:function(e){var t=this.get(),n=this.core,i=n.container.width(),n=n.container.height(),i=[(i-t.w)/2,(n-t.h)/2,t.w,t.h];return this[e?"setSelect":"animateTo"](i)},createElement:function(e,t){return l("<div />").addClass(e+" ord-"+t).data("ord",t)},moveTo:function(e,t){this.element.css({top:t+"px",left:e+"px"})},blur:function(){return this.element.blur(),this},focus:function(){return this.core.setSelection(this),this.frame.focus(),this},resize:function(e,t){this.element.css({width:e+"px",height:t+"px"})},get:function(){var e=this.element,t=e.position(),n=e.width(),e=e.height(),t={x:t.left,y:t.top};return t.x2=t.x+n,t.y2=t.y+e,t.w=n,t.h=e,t},insertElements:function(){for(var e=this,t=(e.core,e.element),n=e.core.opt,i=n.borders,r=n.handles,s=n.dragbars,a=0;a<i.length;a++)t.append(e.createElement(n.css_borders,i[a]));for(a=0;a<s.length;a++)t.append(e.createElement(n.css_dragbars,s[a]));for(a=0;a<r.length;a++)t.append(e.createElement(n.css_handles,r[a]))}}}),g.defaults={offset:[-8,-8],active:!0,minsize:[20,20]},l.extend(g.prototype,{start:function(e){var t=this.core;if(!t.opt.allowSelect)return!1;if(t.opt.multi&&t.opt.multiMax&&t.ui.multi.length>=t.opt.multiMax)return!1;var n=l(e.currentTarget).offset(),i=e.pageX-n.left+this.offset[0],n=e.pageY-n.top+this.offset[1],r=t.ui.multi;if(!t.opt.multi)if(t.opt.multiCleanup){for(var s=0;s<r.length;s++)r[s].remove();t.ui.multi=[]}else t.removeSelection(t.ui.selection);t=t.newSelection().updateRaw(w.wrapFromXywh([i,n,1,1]));return t.element.trigger("cropstart",[t,this.core.unscale(t.get())]),t.startDrag(e,"se")},end:function(e,t){this.drag(e,t);e=this.sel.get();e.w<this.minsize[0]||e.h<this.minsize[1]?this.core.requestDelete():this.sel.focus()}});l.extend(v.prototype,{init:function(){this.setupEvents(),this.dragger=new g(this)},tellConfigUpdate:function(e){for(var t=0,n=this.ui.multi,i=n.length;t<i;t++)n[t].setOptions&&(n[t].linked||this.core.opt.linkCurrent&&n[t]==this.ui.selection)&&n[t].setOptions(e)},startDragHandler:function(){var t=this;return function(e){return!e.button||t.core.opt.is_ie_lt9?t.dragger.start(e):void 0}},removeEvents:function(){this.core.event.off(".jcrop-stage"),this.core.container.off(".jcrop-stage")},shimLegacyHandlers:function(n){var i,r=this.core;l.each(r.opt.legacyHandlers,function(e,t){e in n&&(i=n[e],r.container.off(".jcrop-"+e).on(t+".jcrop.jcrop-"+e,function(e,t,n){i.call(r,n)}),delete n[e])})},setupEvents:function(){var e=this,t=e.core;t.event.on("configupdate.jcrop-stage",function(){e.shimLegacyHandlers(t.opt),e.tellConfigUpdate(t.opt),t.container.trigger("cropconfig",[t,t.opt])}),this.core.container.on("mousedown.jcrop.jcrop-stage",this.startDragHandler())}});var w=function(e,t){var n=navigator.userAgent.toLowerCase();this.opt=l.extend({},w.defaults,t||{}),this.container=l(e),this.opt.is_msie=/msie/.test(n),this.opt.is_ie_lt9=/msie [1-8]\./.test(n),this.container.addClass(this.opt.css_container),this.ui={},this.state=null,this.ui.multi=[],this.ui.selection=null,this.filter={},this.init(),this.setOptions(t),this.applySizeConstraints(),this.container.trigger("cropinit",this),this.opt.is_ie_lt9&&(this.opt.dragEventTarget=document.body)};w.component={Animator:c,DragState:u,EventManager:d,ImageLoader:h,StageManager:v,Selection:m,Keyboard:f,Touch:p},l.extend(w,{defaults:{edge:{n:0,s:0,e:0,w:0},setSelect:null,linked:!0,linkCurrent:!0,canDelete:!0,canSelect:!0,canDrag:!0,canResize:!0,eventManagerComponent:w.component.EventManager,keyboardComponent:w.component.Keyboard,dragstateComponent:w.component.DragState,stagemanagerComponent:w.component.StageManager,animatorComponent:w.component.Animator,selectionComponent:w.component.Selection,allowSelect:!0,multi:!1,multiMax:!1,multiCleanup:!0,animation:!0,animEasing:"swing",animDuration:400,fading:!0,fadeDuration:300,fadeEasing:"swing",bgColor:"black",bgOpacity:.5,applyFilters:["constrain","extent","backoff","ratio","shader","round"],borders:["n","s","e","w"],handles:["n","s","e","w","sw","ne","nw","se"],dragbars:["n","e","w","s"],dragEventTarget:window,xscale:1,yscale:1,boxWidth:null,boxHeight:null,css_nodrag:"jcrop-nodrag",css_drag:"jcrop-drag",css_container:"jcrop-active",css_shades:"jcrop-shades",css_selection:"jcrop-selection",css_borders:"jcrop-border",css_handles:"jcrop-handle jcrop-drag",css_button:"jcrop-box jcrop-drag",css_noresize:"jcrop-noresize",css_dragbars:"jcrop-dragbar jcrop-drag",legacyHandlers:{onChange:"cropmove",onSelect:"cropend"}},filter:{constrain:t,extent:i,grid:r,backoff:e,shader:o,ratio:s,round:a},attach:function(e,t){return new l.Jcrop(e,t)},supportsCanvas:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},imgCopy:function(e){var t=new Image;return t.src=e.src,t},imageClone:function(e){return w.supportsCanvas()?w.canvasClone(e):w.imgCopy(e)},canvasClone:function(e){var t=document.createElement("canvas"),n=l(t).width(e.width).height(e.height),i=t.getContext("2d");return t.width=e.naturalWidth,t.height=e.naturalHeight,i.drawImage(e,0,0,e.naturalWidth,e.naturalHeight),n},propagate:function(e,t,n){for(var i=0,r=e.length;i<r;i++)t.hasOwnProperty(e[i])&&(n[e[i]]=t[e[i]])},getLargestBox:function(e,t,n){return e<t/n?[n*e,n]:[t,t/e]},supportsColorFade:function(){return l.fx.step.hasOwnProperty("backgroundColor")},wrapFromXywh:function(e){e={x:e[0],y:e[1],w:e[2],h:e[3]};return e.x2=e.x+e.w,e.y2=e.y+e.h,e}}),l.extend(w.prototype,{init:function(){this.event=new this.opt.eventManagerComponent(this),this.ui.keyboard=new this.opt.keyboardComponent(this),this.ui.stage=new this.opt.stagemanagerComponent(this),this.applyFilters(),l.Jcrop.component.Touch.support()&&new l.Jcrop.component.Touch(this),this.initEvents()},applySizeConstraints:function(){var e,t,n,i=this.opt,r=this.opt.imgTarget;r&&(e=r.naturalWidth||r.width,t=r.naturalHeight||r.height,n=i.boxWidth||e,i=i.boxHeight||t,r)&&(n<e||i<t)&&(n=w.getLargestBox(e/t,n,i),l(r).width(n[0]).height(n[1]),this.resizeContainer(n[0],n[1]),this.opt.xscale=e/n[0],this.opt.yscale=t/n[1])},setOptions:function(e){return l.isPlainObject(e)||(e={}),l.extend(this.opt,e),this.opt.setSelect&&(this.ui.multi.length||this.newSelection(),this.ui.multi[0].update(w.wrapFromXywh(this.opt.setSelect)),this.opt.setSelect=null),this.event.trigger("configupdate"),this},destroy:function(){this.opt.imgTarget?(this.container.before(this.opt.imgTarget),this.container.remove(),l(this.opt.imgTarget).removeData("Jcrop")):this.container.remove()},applyFilters:function(){for(var e,t=0,n=this.opt.applyFilters,i=n.length;t<i;t++)(e=l.Jcrop.filter[n[t]]?new l.Jcrop.filter[n[t]]:e).core=this,e.init&&e.init(),this.filter[n[t]]=e},getDefaultFilters:function(){for(var e=[],t=0,n=this.opt.applyFilters,i=n.length;t<i;t++)this.filter.hasOwnProperty(n[t])&&e.push(this.filter[n[t]]);return e.sort(function(e,t){return e.priority-t.priority}),e},setSelection:function(e){for(var t=this.ui.multi,n=[],i=0;i<t.length;i++)t[i]!==e&&n.push(t[i]),t[i].toBack();return n.unshift(e),this.ui.multi=n,(this.ui.selection=e).toFront(),e},getSelection:function(){return this.ui.selection.get()},newSelection:function(e){return(e=e||new this.opt.selectionComponent).init(this),this.setSelection(e),e},hasSelection:function(e){for(var t=0;t<this.ui.multi;t++)if(e===this.ui.multi[t])return!0},removeSelection:function(e){for(var t=[],n=this.ui.multi,i=0;i<n.length;i++)e!==n[i]?t.push(n[i]):n[i].remove();return this.ui.multi=t},addFilter:function(e){for(var t=0,n=this.ui.multi,i=n.length;t<i;t++)n[t].addFilter(e);return this},removeFilter:function(e){for(var t=0,n=this.ui.multi,i=n.length;t<i;t++)n[t].removeFilter(e);return this},blur:function(){return this.ui.selection.blur(),this},focus:function(){return this.ui.selection.focus(),this},initEvents:function(){this.container.on("selectstart",function(){return!1}).on("mousedown","."+this.opt.css_drag,this.startDrag())},maxSelect:function(){this.setSelect([0,0,this.elw,this.elh])},nudge:function(e,t){var n=this.ui.selection,i=n.get();i.x+=e,i.x2+=e,i.y+=t,i.y2+=t,i.x<0?(i.x2=i.w,i.x=0):i.x2>this.elw&&(i.x2=this.elw,i.x=i.x2-i.w),i.y<0?(i.y2=i.h,i.y=0):i.y2>this.elh&&(i.y2=this.elh,i.y=i.y2-i.h),n.element.trigger("cropstart",[n,this.unscale(i)]),n.updateRaw(i,"move"),n.element.trigger("cropend",[n,this.unscale(i)])},refresh:function(){for(var e=0,t=this.ui.multi,n=t.length;e<n;e++)t[e].refresh()},blurAll:function(){for(var e=this.ui.multi,t=0;t<e.length;t++)e[t]!==sel&&n.push(e[t]),e[t].toBack()},scale:function(e){var t=this.opt.xscale,n=this.opt.yscale;return{x:e.x/t,y:e.y/n,x2:e.x2/t,y2:e.y2/n,w:e.w/t,h:e.h/n}},unscale:function(e){var t=this.opt.xscale,n=this.opt.yscale;return{x:e.x*t,y:e.y*n,x2:e.x2*t,y2:e.y2*n,w:e.w*t,h:e.h*n}},requestDelete:function(){return 1<this.ui.multi.length&&this.ui.selection.canDelete?this.deleteSelection():void 0},deleteSelection:function(){this.ui.selection&&(this.removeSelection(this.ui.selection),this.ui.multi[0].focus(),this.ui.selection.refresh())},animateTo:function(e){return this.ui.selection&&this.ui.selection.animateTo(e),this},setSelect:function(e){return this.ui.selection&&this.ui.selection.update(w.wrapFromXywh(e)),this},startDrag:function(){var i=this;return function(e){var t=l(e.target),n=t.closest("."+i.opt.css_selection).data("selection"),t=t.data("ord");return i.container.trigger("cropstart",[n,i.unscale(n.get())]),n.startDrag(e,t),!1}},resizeContainer:function(e,t){this.container.width(e).height(t),this.refresh()},setImage:function(n,i){var r=this,s=r.opt.imgTarget;return!!s&&void new l.Jcrop.component.ImageLoader(n,null,function(e,t){r.resizeContainer(e,t),s.src=n,l(s).width(e).height(t),r.applySizeConstraints(),r.refresh(),r.container.trigger("cropimage",[r,s]),"function"==typeof i&&i.call(r,e,t)})},update:function(e){this.ui.selection&&this.ui.selection.update(e)}}),l.fn.Jcrop=function(a,o){var e=this.eq(0).data("Jcrop"),t=Array.prototype.slice.call(arguments);return"api"==a?e:e&&"string"==typeof a?!!e[a]&&(t.shift(),e[a].apply(e,t),e):void this.each(function(){var i,r=this,s=l(this),e=s.data("Jcrop");return e?e.setOptions(a):"IMG"==this.tagName?l.Jcrop.component.ImageLoader.attach(this,function(e,t){var n=s.wrap("<div />").parent();n.width(e).height(t),i=l.Jcrop.attach(n,l.extend({},a,{imgTarget:r})),s.data("Jcrop",i),"function"==typeof o&&o.call(i)}):(i=l.Jcrop.attach(this,a),s.data("Jcrop",i),"function"==typeof o&&o.call(i)),this})},l.Jcrop=w}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(u){u.extend(u.fn,{validate:function(e){var i;if(this.length)return(i=u.data(this[0],"validator"))||(this.attr("novalidate","novalidate"),i=new u.validator(e,this[0]),u.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(e){i.submitButton=e.currentTarget,u(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==u(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(n){function e(){var e,t;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(e=u("<input type='hidden'/>").attr("name",i.submitButton.name).val(u(i.submitButton).val()).appendTo(i.currentForm)),!(i.settings.submitHandler&&!i.settings.debug)||(t=i.settings.submitHandler.call(i,i.currentForm,n),e&&e.remove(),void 0!==t&&t)}return i.settings.debug&&n.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,e()):i.form()?i.pendingRequest?!(i.formSubmitted=!0):e():(i.focusInvalid(),!1)})),i);e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,n;return u(this[0]).is("form")?e=this.validate().form():(n=[],e=!0,t=u(this[0].form).validate(),this.each(function(){(e=t.element(this)&&e)||(n=n.concat(t.errorList))}),t.errorList=n),e},rules:function(e,t){var n,i,r,s,a,o=this[0],l=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=o&&(!o.form&&l&&(o.form=this.closest("form")[0],o.name=this.attr("name")),null!=o.form)){if(e)switch(n=u.data(o.form,"validator").settings,i=n.rules,r=u.validator.staticRules(o),e){case"add":u.extend(r,u.validator.normalizeRule(t)),delete r.messages,i[o.name]=r,t.messages&&(n.messages[o.name]=u.extend(n.messages[o.name],t.messages));break;case"remove":return t?(a={},u.each(t.split(/\s/),function(e,t){a[t]=r[t],delete r[t]}),a):(delete i[o.name],r)}return(l=u.validator.normalizeRules(u.extend({},u.validator.classRules(o),u.validator.attributeRules(o),u.validator.dataRules(o),u.validator.staticRules(o)),o)).required&&(s=l.required,delete l.required,l=u.extend({required:s},l)),l.remote&&(s=l.remote,delete l.remote,l=u.extend(l,{remote:s})),l}}});function t(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var n;u.extend(u.expr.pseudos||u.expr[":"],{blank:function(e){return!t(""+u(e).val())},filled:function(e){e=u(e).val();return null!==e&&!!t(""+e)},unchecked:function(e){return!u(e).prop("checked")}}),u.validator=function(e,t){this.settings=u.extend(!0,{},u.validator.defaults,e),this.currentForm=t,this.init()},u.validator.format=function(n,e){return 1===arguments.length?function(){var e=u.makeArray(arguments);return e.unshift(n),u.validator.format.apply(this,e)}:(void 0===e||((e=2<arguments.length&&e.constructor!==Array?u.makeArray(arguments).slice(1):e).constructor!==Array&&(e=[e]),u.each(e,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})})),n)},u.extend(u.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:u([]),errorLabelContainer:u([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==u.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):u(e)).addClass(t).removeClass(n)},unhighlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):u(e)).removeClass(t).addClass(n)}},setDefaults:function(e){u.extend(u.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:u.validator.format("Please enter no more than {0} characters."),minlength:u.validator.format("Please enter at least {0} characters."),rangelength:u.validator.format("Please enter a value between {0} and {1} characters long."),range:u.validator.format("Please enter a value between {0} and {1}."),max:u.validator.format("Please enter a value less than or equal to {0}."),min:u.validator.format("Please enter a value greater than or equal to {0}."),step:u.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var t,n,i=void 0!==u(this).attr("contenteditable")&&"false"!==u(this).attr("contenteditable");!this.form&&i&&(this.form=u(this).closest("form")[0],this.name=u(this).attr("name")),r===this.form&&(i=u.data(this.form,"validator"),t="on"+e.type.replace(/^validate/,""),(n=i.settings)[t])&&!u(this).is(n.ignore)&&n[t].call(i,this,e)}this.labelContainer=u(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||u(this.currentForm),this.containers=u(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,r=this.currentForm,i=this.groups={};u.each(this.settings.groups,function(n,e){"string"==typeof e&&(e=e.split(/\s/)),u.each(e,function(e,t){i[t]=n})}),n=this.settings.rules,u.each(n,function(e,t){n[e]=u.validator.normalizeRule(t)}),u(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&u(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),u.extend(this.submitted,this.errorMap),this.invalid=u.extend({},this.errorMap),this.valid()||u(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t,n,i=this.clean(e),r=this.validationTargetFor(i),s=this,a=!0;return void 0===r?delete this.invalid[i.name]:(this.prepareElement(r),this.currentElements=u(r),(n=this.groups[r.name])&&u.each(this.groups,function(e,t){t===n&&e!==r.name&&(i=s.validationTargetFor(s.clean(s.findByName(e))))&&i.name in s.invalid&&(s.currentElements.push(i),a=s.check(i)&&a)}),t=!1!==this.check(r),a=a&&t,this.invalid[r.name]=!t,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),u(e).attr("aria-invalid",!t)),a},showErrors:function(t){var n;t&&(u.extend((n=this).errorMap,t),this.errorList=u.map(this.errorMap,function(e,t){return{message:e,element:n.findByName(t)[0]}}),this.successList=u.grep(this.successList,function(e){return!(e.name in t)})),this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){u.fn.resetForm&&u(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)void 0!==e[t]&&null!==e[t]&&!1!==e[t]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{u(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===u.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var n=this,i={};return u(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var e=this.name||u(this).attr("name"),t=void 0!==u(this).attr("contenteditable")&&"false"!==u(this).attr("contenteditable");return!e&&n.settings.debug&&window.console&&console.error("%o has no name assigned",this),t&&(this.form=u(this).closest("form")[0],this.name=e),!(this.form!==n.currentForm||e in i||!n.objectLength(u(this).rules())||(i[e]=!0,0))})},clean:function(e){return u(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return u(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=u([]),this.toHide=u([])},reset:function(){this.resetInternals(),this.currentElements=u([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=u(e),n=e.type,i=void 0!==t.attr("contenteditable")&&"false"!==t.attr("contenteditable");return"radio"===n||"checkbox"===n?this.findByName(e.name).filter(":checked").val():"number"===n&&void 0!==e.validity?e.validity.badInput?"NaN":t.val():(e=i?t.text():t.val(),"file"===n?"C:\\fakepath\\"===e.substr(0,12)?e.substr(12):0<=(i=e.lastIndexOf("/"))||0<=(i=e.lastIndexOf("\\"))?e.substr(i+1):e:"string"==typeof e?e.replace(/\r/g,""):e)},check:function(t){t=this.validationTargetFor(this.clean(t));var e,n,i,r,s=u(t).rules(),a=u.map(s,function(e,t){return t}).length,o=!1,l=this.elementValue(t);for(n in"function"==typeof s.normalizer?r=s.normalizer:"function"==typeof this.settings.normalizer&&(r=this.settings.normalizer),r&&(l=r.call(t,l),delete s.normalizer),s){i={method:n,parameters:s[n]};try{if("dependency-mismatch"===(e=u.validator.methods[n].call(this,l,t,i.parameters))&&1===a)o=!0;else{if(o=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,i),!1}}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+i.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+i.method+"' method."),e}}if(!o)return this.objectLength(s)&&this.successList.push(t),!0},customDataMessage:function(e,t){return u(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||u(e).data("msg")},customMessage:function(e,t){e=this.settings.messages[e];return e&&(e.constructor===String?e:e[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){var n=this.findDefined(this.customMessage(e.name,(t="string"==typeof t?{method:t}:t).method),this.customDataMessage(e,t.method),!this.settings.ignoreTitle&&e.title||void 0,u.validator.messages[t.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),i=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,t.parameters,e):i.test(n)&&(n=u.validator.format(n.replace(i,"{$1}"),t.parameters)),n},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t);this.errorList.push({message:n,element:e,method:t.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return e=this.settings.wrapper?e.add(e.parent(this.settings.wrapper)):e},defaultShowErrors:function(){for(var e,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,e=this.validElements();e[n];n++)this.settings.unhighlight.call(this,e[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return u(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var n,i,r,s=this.errorsFor(e),a=this.idOrName(e),o=u(e).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(t)):(i=s=u("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(i=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,u(e)):i.insertAfter(e),s.is("label")?s.attr("for",a):0===s.parents("label[for='"+this.escapeCssMeta(a)+"']").length&&(i=s.attr("id"),o?o.match(new RegExp("\\b"+this.escapeCssMeta(i)+"\\b"))||(o+=" "+i):o=i,u(e).attr("aria-describedby",o),n=this.groups[e.name])&&u.each((r=this).groups,function(e,t){t===n&&u("[name='"+r.escapeCssMeta(e)+"']",r.currentForm).attr("aria-describedby",s.attr("id"))})),!t&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var t=this.escapeCssMeta(this.idOrName(e)),e=u(e).attr("aria-describedby"),t="label[for='"+t+"'], label[for='"+t+"'] *";return e&&(t=t+", #"+this.escapeCssMeta(e).replace(/\s+/g,", #")),this.errors().filter(t)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||!this.checkable(e)&&e.id||e.name},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),u(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return u(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return u("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!u(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!u.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,u(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],u(e).removeClass(this.settings.pendingClass),t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(u(this.currentForm).submit(),this.submitButton&&u("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(u(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,t){return t="string"==typeof t&&t||"remote",u.data(e,"previousValue")||u.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:t})})},destroy:function(){this.resetForm(),u(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:u.extend(this.classRuleSettings,e)},classRules:function(e){var t={},e=u(e).attr("class");return e&&u.each(e.split(" "),function(){this in u.validator.classRuleSettings&&u.extend(t,u.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,n,i){(i=/min|max|step/.test(n)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i))?void 0:i)||0===i?e[n]=i:t===n&&"range"!==t&&(e[n]=!0)},attributeRules:function(e){var t,n,i={},r=u(e),s=e.getAttribute("type");for(t in u.validator.methods)n="required"===t?(n=e.getAttribute(t),""===n&&(n=!0),!!n):r.attr(t),this.normalizeAttributeRule(i,s,t,n);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var t,n,i={},r=u(e),s=e.getAttribute("type");for(t in u.validator.methods)n=r.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),""===n&&(n=!0),this.normalizeAttributeRule(i,s,t,n);return i},staticRules:function(e){var t={},n=u.data(e.form,"validator");return t=n.settings.rules?u.validator.normalizeRule(n.settings.rules[e.name])||{}:t},normalizeRules:function(i,r){return u.each(i,function(e,t){if(!1===t)delete i[e];else if(t.param||t.depends){var n=!0;switch(typeof t.depends){case"string":n=!!u(t.depends,r.form).length;break;case"function":n=t.depends.call(r,r)}n?i[e]=void 0===t.param||t.param:(u.data(r.form,"validator").resetElements(u(r)),delete i[e])}}),u.each(i,function(e,t){i[e]="function"==typeof t&&"normalizer"!==e?t(r):t}),u.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),u.each(["rangelength","range"],function(){var e;i[this]&&(Array.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(e=i[this].replace(/[\[\]]/g,"").split(/[\s,]+/),i[this]=[Number(e[0]),Number(e[1])]))}),u.validator.autoCreateRanges&&(null!=i.min&&null!=i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),null!=i.minlength)&&null!=i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength),i},normalizeRule:function(e){var t;return"string"==typeof e&&(t={},u.each(e.split(/\s/),function(){t[this]=!0}),e=t),e},addMethod:function(e,t,n){u.validator.methods[e]=t,u.validator.messages[e]=void 0!==n?n:u.validator.messages[e],t.length<3&&u.validator.addClassRules(e,u.validator.normalizeRule(e))},methods:{required:function(e,t,n){return this.depend(n,t)?"select"===t.nodeName.toLowerCase()?(n=u(t).val())&&0<n.length:this.checkable(t)?0<this.getLength(e,t):null!=e&&0<e.length:"dependency-mismatch"},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)},date:(n=!1,function(e,t){return n||(n=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())}),dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||n<=e},maxlength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e<=n},rangelength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e>=n[0]&&e<=n[1]},min:function(e,t,n){return this.optional(t)||n<=e},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},step:function(e,t,n){function i(e){return(e=(""+e).match(/(?:\.(\d+))?$/))&&e[1]?e[1].length:0}function r(e){return Math.round(e*Math.pow(10,s))}var s,a=u(t).attr("type"),o="Step attribute on input type "+a+" is not supported.",l=new RegExp("\\b"+a+"\\b"),c=!0;if(a&&!l.test(["text","number","range"].join()))throw new Error(o);return s=i(n),(i(e)>s||r(e)%r(n)!=0)&&(c=!1),this.optional(t)||c},equalTo:function(e,t,n){n=u(n);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){u(t).valid()}),e===n.val()},remote:function(i,r,e,s){if(this.optional(r))return"dependency-mismatch";s="string"==typeof s&&s||"remote";var a,t,o=this.previousValue(r,s);return this.settings.messages[r.name]||(this.settings.messages[r.name]={}),o.originalMessage=o.originalMessage||this.settings.messages[r.name][s],this.settings.messages[r.name][s]=o.message,t=u.param(u.extend({data:i},(e="string"==typeof e?{url:e}:e).data)),o.old===t?o.valid:(o.old=t,(a=this).startRequest(r),(t={})[r.name]=i,u.ajax(u.extend(!0,{mode:"abort",port:"validate"+r.name,dataType:"json",data:t,context:a.currentForm,success:function(e){var t,n=!0===e||"true"===e;a.settings.messages[r.name][s]=o.originalMessage,n?(t=a.formSubmitted,a.resetInternals(),a.toHide=a.errorsFor(r),a.formSubmitted=t,a.successList.push(r),a.invalid[r.name]=!1,a.showErrors()):(t={},e=e||a.defaultMessage(r,{method:s,parameters:i}),t[r.name]=o.message=e,a.invalid[r.name]=!0,a.showErrors(t)),o.valid=n,a.stopRequest(r,n)}},e)),"pending")}}});var i,r={};return u.ajaxPrefilter?u.ajaxPrefilter(function(e,t,n){var i=e.port;"abort"===e.mode&&(r[i]&&r[i].abort(),r[i]=n)}):(i=u.ajax,u.ajax=function(e){var t=("mode"in e?e:u.ajaxSettings).mode,n=("port"in e?e:u.ajaxSettings).port;return"abort"===t?(r[n]&&r[n].abort(),r[n]=i.apply(this,arguments),r[n]):i.apply(this,arguments)}),u});var validateUserpassword={p_policy_uppercase:function(e){this.name="p_policy_uppercase";if(/^(?=.*[A-Z]).+$/.test(e))return"p_policy_uppercase"},p_policy_lowercase:function(e){this.name="p_policy_lowercase";if(/^(?=.*[a-z]).+$/.test(e))return"p_policy_lowercase"},p_policy_number:function(e){this.name="p_policy_number";if(/^(?=.*\d).+$/.test(e))return"p_policy_number"},p_policy_specialcharacter:function(e){this.name="p_policy_specialcharacter";if(/^(?=.*(_|[^\w])).+$/.test(e))return"p_policy_specialcharacter"},p_policy_length:function(e){if(this.name="p_policy_length",e.length>=$('meta[name="password_policy:minlength"]').attr("content"))return"p_policy_length"}};function passwordBoxHightlight(e){var t="",n=($(e).closest("div").addClass("e-error"),"popover"===$("#new-password").data("toggle")),i=n?$("#password_policy_rules").find("li>span:not(.content)"):$("#password_policy_rules").find("li>span"),r=n?"su-password-tick":"su-tick";if("new-password"==$(e).attr("id")){for(var s=0;s<i.length;s++)$(i[s]).attr("class")==r?$(e).closest("div").removeClass("e-error"):t="unsatisfied-rule";""!=t&&null!=t&&$(e).closest("div").addClass("e-error")}}function passwordBoxUnhightlight(e){var t="",n=($(e).closest("div").removeClass("e-error"),"popover"===$("#new-password").data("toggle")),i=n?$("#password_policy_rules").find("li>span:not(.content)"):$("#password_policy_rules").find("li>span"),r=n?"su-password-tick":"su-tick";if("new-password"==$(e).attr("id")){for(var s=0;s<i.length;s++)$(i[s]).attr("class")!=r&&(t="unsatisfied-rule"),$(i[s]).attr("class")==r&&$(e).closest("div").removeClass("e-error");""!=t&&null!=t&&($(e).closest("div").addClass("e-error"),t="")}$(e).closest("div").find(".password-validate-holder").html("")}function passwordPolicyPopover(e,t){var n=$(e),i=(n.popover("show"),new Array);i.push(validateUserpassword.p_policy_uppercase),i.push(validateUserpassword.p_policy_lowercase),i.push(validateUserpassword.p_policy_number),i.push(validateUserpassword.p_policy_specialcharacter),i.push(validateUserpassword.p_policy_length),$.each(i,function(e){e=i[e];null!=(ruleName=e(t))&&""!=ruleName?n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").hasClass("su-password-tick")||n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").addClass("su-password-tick").removeClass("icon"):(ruleName=name,n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").hasClass("su-password-tick")&&n.next().find("#password_policy_rules").find("li#"+ruleName+" span:first").removeClass("su-password-tick").addClass("icon")),ruleName=""})}$.validator.addMethod("isValidPassword",function(e,t){var n=new Array;if(n.push(validateUserpassword.p_policy_uppercase),n.push(validateUserpassword.p_policy_lowercase),n.push(validateUserpassword.p_policy_number),n.push(validateUserpassword.p_policy_specialcharacter),n.push(validateUserpassword.p_policy_length),passwordPolicyPopover("#new-password",e),$("#password_policy_rules li>span.su-password-tick").length==$("#password_policy_rules li>span:not(.content)").length)return!0},"");var userDetails,isKeyUp=!1;function successMessage(){"block"==$("#invalid-firstname, #invalid-lastname, #invalid-email").css("display")&&$("#updation-validation-message").css("display","none")}function onUserChangePasswordClick(){$("#user-id").val();$(".validation-message").html(""),$("#new-password-validate, #confirm-password-validate").closest("div").prev("div").removeClass("has-error");var e=!0;(e=$(".change-password-form").valid())&&$("#new-password").val()!=$("#confirm-password").val()&&($("#confirm-password-validate").html(window.Server.App.LocalizationContent.PasswordsMismatch),$("#confirm-password-validate").closest("div").prev("div").addClass("has-error"),e=!1),0!=e&&(showWaitingPopup("content-area"),doAjaxPost("POST",UpdatePasswordUrl,{newpassword:$("#new-password").val(),confirmpassword:$("#confirm-password").val(),userId:$("#user-id").val()},function(e){$("input[type='password']").val(""),hideWaitingPopup("content-area"),$("#password_policy_rules").remove(),$("#confirm-password-section").removeAttr("style"),e.Data.status?SuccessAlert(window.Server.App.LocalizationContent.UpdatePassword,window.Server.App.LocalizationContent.PasswordSuccess,7e3):WarningAlert(window.Server.App.LocalizationContent.UpdatePassword,window.Server.App.LocalizationContent.PasswordFailure,e.Data.Message,7e3)}))}function editUser(e){var t=e;userDetails=e,$("#user-name").val(t.UserName),$("#user-email").val(t.Email.toString().includes(autoGeneratedEmail)?"":t.Email),$("#user-head").html(t.FirstName+" "+t.LastName),$("#status-user").val(t.StatusDescription),$("#activation-div").val(),null!=e.FirstName&&""!=e.FirstName?$("#user-firstname").val(e.FirstName):$("#user-firstname").val(t.FullName),null!=e.LastName&&""!=e.LastName&&$("#user-lastname").val(e.LastName),null!=e.Contact&&""!=e.Contact&&$("#user-phonenumber").val(e.Contact)}function SaveUserdetails(){$("#updation-validaton-message").html(""),$("#email-duplicate-validation").closest("div").prev("div").removeClass("has-error");var e,t=$("#user-firstname").val().trim(),n=$("#user-email").val().trim(),i=!0;$(".edit-user-profile-form").valid()&&($(".userprofile-validation-messages").css("display","none"),e=$("#user-status").val(),i=!!$("#show-active").hasClass("show")||!!$("#container-select").hasClass("show")&&e,showWaitingPopup("content-area"),doAjaxPost("POST",updateUserProfileUrl,{username:$("#user-name").val(),email:n,picturename:$("#upload-picture").attr("data-filename"),firstname:t,lastname:$("#user-lastname").val(),mobile:$("#user-phonenumber").val().trim(),status:i},function(e){var t,n,i,r,s;hideWaitingPopup("content-area"),e.Data.status?(t=null!=(s=e.Data.profileinfo).firstName?$("#user-firstname").val(s.firstName):$("#user-firstname").val(s.previousFirstName),n=null!=s.lastName?$("#user-lastname").val(s.lastName):$("#user-lastname").val(s.previousLastName),i=null!=s.email?$("#user-email").val(s.email):$("#user-email").val(s.previousMail),r=null!=s.mobile?$("#user-phonenumber").val(s.mobile):$("#user-phonenumber").val(s.previousMobile),s="false"==s.status.toLowerCase()?$("#status-user").val("Inactive"):$("#status-user").val("Active"),userDetails={FirstName:t.val(),LastName:n.val(),ContactNumber:r.val(),Email:i.val(),Status:s.val()},SuccessAlert("Update Profile",e.Data.value,7e3),$("#password-updation-validation").css("display","none"),$(".userpassword-validation-messages").css("display","none"),$("#new-password-validate").closest("div").prev("div").removeClass("has-error"),$("#confirm-password-validate").closest("div").prev("div").removeClass("has-error"),e.Data.isCurrentUser&&$("#display-name").html(t.val()+" "+n.val().trim()),$("#display-name").html(t.val()+" "+n.val().trim())):e.Data.status||"email"!=e.Data.key?(SuccessAlert("Update Profile",e.Data.value,7e3),$("#password-updation-validation").css("display","none"),$(".userpassword-validation-messages").css("display","none")):($("#email-duplicate-validation").html(e.Data.value).css("display","block"),$("#email-duplicate-validation").closest("div").prev("div").addClass("has-error"))}),$(".edit-user-profile-field").attr("disabled",!0).removeClass("enable"),$("#save-button,#cancel-button,#status-dom").hide(),$("#edit,#group-div,#status-show").show(),$("#status-div").removeClass("top-margin"))}function onPictureCropEnd(e){$("input[name=LeftOfCropArea]").val(e.x),$("input[name=TopOfCropArea]").val(e.y),$("input[name=LeftToCropArea]").val(e.x2),$("input[name=TopToCropArea]").val(e.y2),$("input[name=height]").val(e.h),$("input[name=width]").val(e.w)}function onSingleDeleteDialogOpen(){$("#singleuser-delete-confirmation").find("button.e-primary").addClass("critical-action-button"),document.getElementById("singleuser-delete-confirmation").ej2_instances[0].show()}function onMakeAdminDialogOpen(){document.getElementById("make-admin-confirmation").ej2_instances[0].show()}function onRemoveAdminDialogOpen(){document.getElementById("remove-admin-confirmation").ej2_instances[0].show()}function MakeSingleUserAdmin(){var e=$(".make-admin").attr("data-content");showWaitingPopup("make-admin-confirmation"),$.ajax({type:"POST",url:makeAdminUrl,data:"&users="+e,success:function(e){hideWaitingPopup("make-admin-confirmation"),onMakeAdminDialogClose(),window.location.reload()}})}function onMakeAdminDialogClose(){document.getElementById("make-admin-confirmation").ej2_instances[0].hide()}function removeAdmin(){var e=$(".remove-admin").attr("data-content");showWaitingPopup("remove-admin-confirmation"),$.ajax({type:"POST",url:removeAdminUrl,data:{userId:e},success:function(e){hideWaitingPopup("remove-admin-confirmation"),onRemoveAdminDialogClose(),window.location.reload()}})}function onRemoveAdminDialogClose(){document.getElementById("remove-admin-confirmation").ej2_instances[0].hide()}function deleteSingleUser(){showWaitingPopup("singleuser-delete-confirmation");var e=$(".is-delete").attr("data-content");doAjaxPost("POST",deleteSingleFromUserListUrl,"UserId="+e,function(e){e.status?window.location.href=userPageUrl:(hideWaitingPopup("singleuser-delete-confirmation"),onSingleDeleteDialogClose(),window.location.reload())})}function onSingleDeleteDialogClose(){document.getElementById("singleuser-delete-confirmation").ej2_instances[0].hide()}function onDisableMfaDialogOpen(){$("#disable-mfa-confirmation").find("button.e-primary").addClass("critical-action-button"),document.getElementById("disable-mfa-confirmation").ej2_instances[0].show()}function onDisableMfaDialogClose(){document.getElementById("disable-mfa-confirmation").ej2_instances[0].hide(),window.location.reload()}function onRecoveryCodeDialogOpen(){document.getElementById("recovery-code-regeneration-confirmation").ej2_instances[0].show()}function onRecoveryCodeDialogClose(){document.getElementById("recovery-code-regeneration-confirmation").ej2_instances[0].hide()}function disableMfa(){showWaitingPopup("content-area");var e=document.getElementById("user-id").value;$.ajax({type:"POST",url:disableMfaUrl,data:{userId:e},async:!1,success:function(e){hideWaitingPopup("content-area"),window.location.reload()}})}function onShowRecoveryCodeDialogOpen(){document.getElementById("recovery-code-box").ej2_instances[0].show()}function onShowRecoveryCodeDialogClose(){document.getElementById("recovery-code-box").ej2_instances[0].hide(),window.location.reload()}function regenerateRecoveryCode(){showWaitingPopup("content-area");var e=document.getElementById("user-id").value;$.ajax({type:"POST",url:regenerateRecoveryCodeUrl,data:{userId:e},success:function(e){if(e.Data.status&&""!=e.Data.recovery){onShowRecoveryCodeDialogOpen(),$(".mfa-success-message").css("display","none");var n=document.getElementById("table-recovery"),i=e.Data.recovery.split(";");document.getElementById("copy-recovery").value=i;for(let t=0;t<i.length;t+=2){var r=n.insertRow();for(let e=0;e<2;e++){var s=i[t+e];r.insertCell().appendChild(document.createTextNode(""+s))}}}hideWaitingPopup("content-area")}})}function copyToClip(){value=document.getElementById("copy-recovery").value,navigator.clipboard.writeText(value),setTimeout(function(){$("#recovery-code-copy").attr("data-original-title",window.Server.App.LocalizationContent.Copied),$("#recovery-code-copy").tooltip("show")},200),setTimeout(function(){$("#recovery-code-copy").attr("data-original-title",window.Server.App.LocalizationContent.ClickToCopy),$("#recovery-code-copy").tooltip()},3e3)}function unLockUser(){var e=null==(e=$(".unlock-user-id").attr("data-content"))?document.getElementById("user-id").value:e,t=(showWaitingPopup("unlock-user-confirmation"),null===document.getElementById("user_grid")?null:document.getElementById("user_grid").ej2_instances[0]);unlockUser(e)?null===t?(hideWaitingPopup("unlock-user-confirmation"),onUserUnlockDialogClose(),window.location.reload()):(SuccessAlert(window.Server.App.LocalizationContent.UnlockUser,window.Server.App.LocalizationContent.UserUnlocked,7e3),t.refresh(),onUserUnlockDialogClose(),hideWaitingPopup("unlock-user-confirmation")):null===t?(hideWaitingPopup("unlock-user-confirmation"),onUserUnlockDialogClose(),window.location.reload()):(WarningAlert(window.Server.App.LocalizationContent.UnlockUser,window.Server.App.LocalizationContent.UserUnlockedError,7e3),t.refresh(),onUserUnlockDialogClose(),hideWaitingPopup("unlock-user-confirmation"))}function onUserUnlockDialogOpen(){document.getElementById("unlock-user-confirmation").ej2_instances[0].show()}function onUserUnlockDialogClose(){document.getElementById("unlock-user-confirmation").ej2_instances[0].hide()}function unlockUser(e){var t=!1;return $.ajax({type:"POST",url:unlockUserUrl,async:!1,data:{userId:e},success:function(e){t=e.Status}}),t}function CheckMailSettingsAndNotify(t,n,i){$.ajax({type:"POST",url:checkMailSettingUrl,success:function(e){"success"==e.result||0==e.activation?void 0!==n&&n.html("<span class='SuccessMessage'>"+i+"</span>"):"failure"==e.result&&1==e.isAdmin&&1==e.activation&&void 0!==n&&n.html("<span class='alert alert-danger'>"+t+"</span>")}})}function ValidateMailSettingsAndShowToast(t,n,i){$.ajax({type:"POST",url:checkMailSettingUrl,success:function(e){"success"==e.result||0==e.activation?void 0!==n&&SuccessAlert("Activate User",i,7e3):"failure"==e.result&&1==e.isAdmin&&1==e.activation&&void 0!==n&&n.html("<span class='alert alert-danger'>"+t+"</span>")}})}$(document).ready(function(){var e;$.now();addPlacehoder("body"),$(".security-setting-container").is(":visible")&&(location.href.match(/2fa/)?$("#2fa").tab("show"):($("#change-password").tab("show"),(e=window.location.search.toString()).includes("&view=change-password")||history.pushState(null,"",e+"&view=change-password"))),$("a[data-toggle='tab']").on("click",function(e){var t;"change-password"==$(this).attr("id")?(t=window.location.search.toString()).includes("&view=2fa")?(t=t.replace("&view=2fa","&view=change-password"),history.pushState(null,"",t)):t.includes("&view=change-password")||history.pushState(null,"",t+"&view=change-password"):"2fa"==$(this).attr("id")&&((t=window.location.search.toString()).includes("&view=change-password")?(t=t.replace("&view=change-password","&view=2fa"),history.pushState(null,"",t)):t.includes("&view=2fa")||history.pushState(null,"",t+"&view=2fa")),$(".success-message, .error-message").hide()}),$.validator.addMethod("isValidEmail",function(e,t){return""==e.trim()||IsEmail(e)},window.Server.App.LocalizationContent.InvalidEmailAddress),$.validator.addMethod("isRequired",function(e,t){return!isEmptyOrWhitespace(e)},window.Server.App.LocalizationContent.EnterName),$.validator.addMethod("isValidName",function(e,t){return IsValidName("name",e)},window.Server.App.LocalizationContent.AvoidSpecailCharacters),$.validator.addMethod("isValidUsername",function(e,t){return IsValidUsername(e)},window.Server.App.LocalizationContent.InvalidUsername),$.validator.addMethod("isValidUsernameLength",function(e,t){return IsValidUsernameLength(e)},window.Server.App.LocalizationContent.UsernameExceeds),$.validator.addMethod("isValidPhoneNumber",function(e,t){return IsValidContactNumber(e)},window.Server.App.LocalizationContent.PhoneNumberValidator),addPlacehoder("#user-phonenumber"),$(".edit-user-profile-form").validate({errorElement:"span",onkeyup:function(e,t){$("#updation-validation-message").html(""),9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid(),$("#updation-validation-message").html("")},rules:{"user-username":{isRequired:!0,isValidUsernameLength:!0,isValidUsername:!0},"user-email":{isValidName:!0,isValidEmail:!0},"user-firstname":{isRequired:!0,isValidName:!0},"user-lastname":{isValidName:!0},"user-phonenumber":{isValidPhoneNumber:!0}},highlight:function(e){$("#"+e.id).not(":disabled")&&$(e).closest("div").addClass("has-error")},unhighlight:function(e){$(e).closest("div").removeClass("has-error"),$(e).closest("div").find("span").html("")},errorPlacement:function(e,t){$("#"+t.context.id).not(":disabled")&&$(t).closest("div").find("span").html(e.html())},messages:{"user-firstname":{isRequired:window.Server.App.LocalizationContent.FirstNameValidator}}}),$(document).on("keyup","#new-password",function(){$("#new-password").val()==$("#confirm-password").val()?($("#confirm-password").closest("div").removeClass("has-error"),$("#confirm-password").closest("tr").next("tr").find("span").html("")):""!=$("#confirm-password").val()&&($("#confirm-password").closest("div").addClass("has-error"),$("#confirm-password").closest("div").next("div").find("span").html(window.Server.App.LocalizationContent.PasswordMismatch).css("display","block")),passwordPolicyPopover("#new-password",$("#new-password").val())}),$(".change-password-form").validate({errorElement:"span",onkeyup:function(e,t){$("#success-message").html(""),9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid(),$("#success-message").html("")},rules:{"new-password":{required:!0,isValidPassword:!0},"confirm-password":{required:!0,equalTo:"#new-password"}},highlight:function(e){$(e).closest("div").addClass("has-error"),passwordBoxHightlight(e)},unhighlight:function(e){$(e).closest("div").removeClass("has-error"),passwordBoxUnhightlight(e),$(e).closest("div").find(".validation-message").html("")},errorPlacement:function(e,t){$(t).closest("div").find(".validation-message").html(e.html())},messages:{"new-password":{required:window.Server.App.LocalizationContent.NewPasswordValidator},"confirm-password":{required:window.Server.App.LocalizationContent.ConfirmPasswordValidator,equalTo:window.Server.App.LocalizationContent.PasswordMismatch}}}),$("#new-password").on("change",function(){passwordPolicyPopover("#new-password",$("#new-password").val()),$("#new-password").valid()}),$(".edit-user-profile-field").on("keypress",function(e){if(13==e.keyCode)return e.preventDefault(),SaveUserdetails(),!1}),$(document).on("click","#activate-button-click",function(){$(".success-message").hide(),$("#activate-button-click").attr("disabled",!0).css("cursor","default");var t=$(this).attr("id");$.ajax({type:"POST",url:activateUserUrl,data:{username:$("#user-name").val(),email:$("#user-email").val(),firstname:$("#user-firstname").val()},success:function(e){$("#activate-button-click").attr("disabled",!1),"object"==$.type(e)&&("success"==e.Data.result&&1==e.Data.type?($("#"+t).hide(),$("<input>",{class:"primary-button password-save-button",type:"button",id:"resend-button-click",value:"Resend Activation Code",title:""}).insertAfter("#"+t),CheckMailSettingsAndNotify(window.Server.App.LocalizationContent.ActivationCodeGenerated+" <a href='"+emailSettingsUrl+"'>"+window.Server.App.LocalizationContent.ConfigureEmailSettings+"</a>",$("#alert-message"),window.Server.App.LocalizationContent.ActivationCodeSent)):"success"==e.Data.result&&($("#inactive-user").hide(),$('<span id="active-user">Active</span>').insertAfter("#inactive-user").addClass("content-size status"),$("#user-status").val("true"),$("#status-user").val("Active"),$("#"+t).attr("disabled",!0),ValidateMailSettingsAndShowToast("",$("#alert-message"),window.Server.App.LocalizationContent.UserAccountHasActivated)))}})}),$(document).on("click","#resend-button-click",function(){$(".success-message").hide(),$("#resend-button-click").attr("disabled",!0).css("cursor","default");$(this).attr("id");$.ajax({type:"POST",url:resendactivationcodeUrl,data:{username:$("#user-name").val(),email:$("#user-email").val(),firstname:$("#user-firstname").val()},success:function(e){$("#resend-button-click").attr("disabled",!1),"object"==$.type(e)&&"success"==e.Data.result&&(CheckMailSettingsAndNotify(window.Server.App.LocalizationContent.ActivationCodeGenerated+" <a href='"+emailSettingsUrl+"'>"+window.Server.App.LocalizationContent.ConfigureEmailSettings+"</a>",$("#alert-message"),window.Server.App.LocalizationContent.ActivationCodeResent),$("#edit").addClass("adjustment"))}})}),$(document).on("click","#avatar-delete-click",function(){messageBox("su-delete",window.Server.App.LocalizationContent.DeleteProfilePicture,window.Server.App.LocalizationContent.DeleteProfilePictureConfirm+"?","error",function(){deleteUserAvatar()})}),$("#avatar-button-click").click(function(){$("#image-path").val(window.Server.App.LocalizationContent.BrowseImagePath).removeClass("ValidationErrorImage"),$("#image-path").closest("div").removeClass("has-error"),$("#avatar-upload-box").ejDialog("open"),$("#cancel-avatar-popup").click(function(){$("#profile-picture").attr("src",tanantManagementServerResourceUrl+"/images/common/preview.jpg"),$("#upload-image").attr("disabled","disabled"),$(".img-container").children().hasClass("jcrop-active")&&$("#profile-picture").data("Jcrop").destroy(),$("#avatar-upload-box").ejDialog("close")}),$(".e-uploadinput").attr({title:window.Server.App.LocalizationContent.NoFileSelected,accept:".png, .jpg ,.jpeg"}),"msie"==browser.name.toLowerCase()||"webkit"==browser.name.toLowerCase()?$(".e-selectpart").addClass("upload-box"):$(".e-selectpart").removeClass("upload-box");var e=getMaxZIndex()+2;$("#avatar-upload-box a.popup-close").trigger("mouseover").mouseover(function(){$(".tooltip").css("z-index",e)})}),createWaitingPopup("make-admin-confirmation"),createWaitingPopup("remove-admin-confirmation"),createWaitingPopup("singleuser-delete-confirmation"),createWaitingPopup("content-area"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.AssignRole,content:document.getElementById("make-admin-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:MakeSingleUserAdmin,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onMakeAdminDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"}}).appendTo("#make-admin-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.RemoveRole,content:document.getElementById("remove-admin-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:removeAdmin,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onRemoveAdminDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"}}).appendTo("#remove-admin-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.DeleteUser,content:document.getElementById("singleuser-delete-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:deleteSingleUser,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onSingleDeleteDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,animationSettings:{effect:"Zoom"},visible:!1}).appendTo("#singleuser-delete-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.RegenerateRecoveryCode,content:document.getElementById("recovery-code-regeneration-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:regenerateRecoveryCode,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onRecoveryCodeDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,animationSettings:{effect:"Zoom"},visible:!1}).appendTo("#recovery-code-regeneration-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.DisableMfa,content:document.getElementById("disable-mfa-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:disableMfa,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onDisableMfaDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"},close:onDisableMfaDialogClose}).appendTo("#disable-mfa-confirmation"),new ej.popups.Dialog({header:window.Server.App.LocalizationContent.RecoveryCode,content:document.getElementById("recovery-code-box-content"),showCloseIcon:!0,buttons:[{click:onShowRecoveryCodeDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.CloseButton}}],width:"424px",height:"auto",isModal:!0,visible:!1,animationSettings:{effect:"Zoom"},close:onShowRecoveryCodeDialogClose}).appendTo("#recovery-code-box")}),$(document).on("click","#edit",function(e){$("#save-button,#status-dom").show(),$("#cancel-button").css("display","inline"),$("#group-div,#status-show,#edit,#activation-div").hide(),$("#resend-button-click").removeClass("show"),$("#status-div").addClass("top-margin"),$("#show-active,#show-inactive,#show-active-user").find("span").addClass("margin-top"),$(".edit-user-profile-field").attr("disabled",!1).addClass("enable")}),$(document).on("click","#cancel-button",function(e){$("#user-firstname").val(userDetails.FirstName),$("#user-email").val(userDetails.Email),$("#user-lastname").val(userDetails.LastName),$("#user-phonenumber").val(userDetails.ContactNumber),$("#status-div").removeClass("top-margin"),$("#show-active,#show-inactive,#show-active-user").find("span").removeClass("margin-top"),0==userDetails.Status?$("#status-user").html("Active"):$("#status-user").html("InActive"),$(".alert-messages").closest("div").removeClass("has-error form-control"),$(".alert-messages").html(""),$(".edit-user-profile-field").attr("disabled",!0).removeClass("enable"),$("#save-button,#status-dom,#cancel-button").hide(),$("#edit, #status-show, #group-div,#activation-div").show(),"Active"==$("#status-user").val&&$("#activate-button-click").hide()}),"InActive"==$("#status-user").val&&$("#activate-button-click").removeClass("hide"),$(document).on("click",".delete-class",function(){$(this).parent("li").addClass("is-delete"),onSingleDeleteDialogOpen()}),$(document).on("click",".make-admin-class",function(){$(this).parent("li").addClass("make-admin"),onMakeAdminDialogOpen()}),$(document).on("click",".remove-admin-class",function(){$(this).parent("li").addClass("remove-admin"),onRemoveAdminDialogOpen()}),$(document).on("click","#mfa-disable-button",function(){onDisableMfaDialogOpen()}),$(document).on("click","#generate-recovery-code",function(){onRecoveryCodeDialogOpen()}),$(document).ready(function(){new ej.popups.Dialog({header:window.Server.App.LocalizationContent.UnlockUser,content:document.getElementById("unlock-user-confirmation-dialog-content"),showCloseIcon:!0,buttons:[{click:unLockUser,buttonModel:{content:window.Server.App.LocalizationContent.YesButton,isPrimary:!0}},{click:onUserUnlockDialogClose,buttonModel:{content:window.Server.App.LocalizationContent.NoButton}}],width:"472px",height:"auto",isModal:!0,animationSettings:{effect:"Zoom"},visible:!1}).appendTo("#unlock-user-confirmation"),createWaitingPopup("unlock-user-confirmation")}),$(document).on("click",".unlock-user-class",function(){$(this).parent("li").addClass("unlock-user-id"),onUserUnlockDialogOpen()}),$(document).on("click",".unlock-userclass",function(){unlockUser($(".unlock_user").attr("data-content")),window.location.reload()}),$(document).on("click","#unlock-user",function(){onUserUnlockDialogOpen()}),$(function(){$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?($(this).siblings("input").attr("type","text").val(),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touchstart",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("touchend",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),window.innerWidth<1041&&$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("click",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show").addClass("su-hide").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoHide)):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide").addClass("su-show").attr("data-original-title",window.Server.App.LocalizationContent.ClicktoView)),$(this).tooltip("show")}),$(document).on("touch",".show-hide-password-ej2",function(){$(this).siblings().find("input").is(":password")?($(this).siblings().find("input").attr("type","text"),$(this).removeClass("su-show"),$(this).addClass("su-hide")):($(this).siblings().find("input").attr("type","password"),$(this).removeClass("su-hide"),$(this).addClass("su-show"))})});