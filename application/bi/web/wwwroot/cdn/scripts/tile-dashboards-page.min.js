!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(d){d.extend(d.fn,{validate:function(e){var i;if(this.length)return(i=d.data(this[0],"validator"))||(this.attr("novalidate","novalidate"),i=new d.validator(e,this[0]),d.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(e){i.settings.submitHandler&&(i.submitButton=e.target),d(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==d(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(o){function e(){var e,t;return!i.settings.submitHandler||(i.submitButton&&(e=d("<input type='hidden'/>").attr("name",i.submitButton.name).val(d(i.submitButton).val()).appendTo(i.currentForm)),t=i.settings.submitHandler.call(i,i.currentForm,o),i.submitButton&&e.remove(),void 0!==t&&t)}return i.settings.debug&&o.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,e()):i.form()?i.pendingRequest?!(i.formSubmitted=!0):e():(i.focusInvalid(),!1)})),i);e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,o;return d(this[0]).is("form")?e=this.validate().form():(o=[],e=!0,t=d(this[0].form).validate(),this.each(function(){e=t.element(this)&&e,o=o.concat(t.errorList)}),t.errorList=o),e},rules:function(e,t){var o,i,a,n,s,r=this[0];if(e)switch(o=d.data(r.form,"validator").settings,i=o.rules,a=d.validator.staticRules(r),e){case"add":d.extend(a,d.validator.normalizeRule(t)),delete a.messages,i[r.name]=a,t.messages&&(o.messages[r.name]=d.extend(o.messages[r.name],t.messages));break;case"remove":return t?(s={},d.each(t.split(/\s/),function(e,t){s[t]=a[t],delete a[t],"required"===t&&d(r).removeAttr("aria-required")}),s):(delete i[r.name],a)}return(e=d.validator.normalizeRules(d.extend({},d.validator.classRules(r),d.validator.attributeRules(r),d.validator.dataRules(r),d.validator.staticRules(r)),r)).required&&(n=e.required,delete e.required,e=d.extend({required:n},e),d(r).attr("aria-required","true")),e.remote&&(n=e.remote,delete e.remote,e=d.extend(e,{remote:n})),e}}),d.extend(d.expr[":"],{blank:function(e){return!d.trim(""+d(e).val())},filled:function(e){return!!d.trim(""+d(e).val())},unchecked:function(e){return!d(e).prop("checked")}}),d.validator=function(e,t){this.settings=d.extend(!0,{},d.validator.defaults,e),this.currentForm=t,this.init()},d.validator.format=function(o,e){return 1===arguments.length?function(){var e=d.makeArray(arguments);return e.unshift(o),d.validator.format.apply(this,e)}:((e=2<arguments.length&&e.constructor!==Array?d.makeArray(arguments).slice(1):e).constructor!==Array&&(e=[e]),d.each(e,function(e,t){o=o.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})}),o)},d.extend(d.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:d([]),errorLabelContainer:d([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==d.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,o){("radio"===e.type?this.findByName(e.name):d(e)).addClass(t).removeClass(o)},unhighlight:function(e,t,o){("radio"===e.type?this.findByName(e.name):d(e)).removeClass(t).addClass(o)}},setDefaults:function(e){d.extend(d.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:d.validator.format("Please enter no more than {0} characters."),minlength:d.validator.format("Please enter at least {0} characters."),rangelength:d.validator.format("Please enter a value between {0} and {1} characters long."),range:d.validator.format("Please enter a value between {0} and {1}."),max:d.validator.format("Please enter a value less than or equal to {0}."),min:d.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var t=d.data(this.form,"validator"),o="on"+e.type.replace(/^validate/,""),i=t.settings;i[o]&&!d(this).is(i.ignore)&&i[o].call(t,this,e)}this.labelContainer=d(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||d(this.currentForm),this.containers=d(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var o,i=this.groups={};d.each(this.settings.groups,function(o,e){"string"==typeof e&&(e=e.split(/\s/)),d.each(e,function(e,t){i[t]=o})}),o=this.settings.rules,d.each(o,function(e,t){o[e]=d.validator.normalizeRule(t)}),d(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&d(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),d(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),d.extend(this.submitted,this.errorMap),this.invalid=d.extend({},this.errorMap),this.valid()||d(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t=this.clean(e),o=this.validationTargetFor(t),i=!0;return void 0===(this.lastElement=o)?delete this.invalid[t.name]:(this.prepareElement(o),this.currentElements=d(o),(i=!1!==this.check(o))?delete this.invalid[o.name]:this.invalid[o.name]=!0),d(e).attr("aria-invalid",!i),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){for(var e in d.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[e],element:this.findByName(e)[0]});this.successList=d.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){d.fn.resetForm&&d(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors();var e,t=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,"");else t.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,o=0;for(t in e)o++;return o},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{d(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===d.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var e=this,t={};return d(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in t||!e.objectLength(d(this).rules())||(t[this.name]=!0,0))})},clean:function(e){return d(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return d(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=d([]),this.toHide=d([]),this.currentElements=d([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=d(e),o=e.type;return"radio"===o||"checkbox"===o?this.findByName(e.name).filter(":checked").val():"number"===o&&void 0!==e.validity?!e.validity.badInput&&t.val():"string"==typeof(o=t.val())?o.replace(/\r/g,""):o},check:function(t){t=this.validationTargetFor(this.clean(t));var e,o,i,a=d(t).rules(),n=d.map(a,function(e,t){return t}).length,s=!1,r=this.elementValue(t);for(o in a){i={method:o,parameters:a[o]};try{if("dependency-mismatch"===(e=d.validator.methods[o].call(this,r,t,i.parameters))&&1===n)s=!0;else{if(s=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,i),!1}}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+i.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+i.method+"' method."),e}}if(!s)return this.objectLength(a)&&this.successList.push(t),!0},customDataMessage:function(e,t){return d(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||d(e).data("msg")},customMessage:function(e,t){e=this.settings.messages[e];return e&&(e.constructor===String?e:e[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){return this.findDefined(this.customMessage(e.name,t),this.customDataMessage(e,t),!this.settings.ignoreTitle&&e.title||void 0,d.validator.messages[t],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,t){var o=this.defaultMessage(e,t.method),i=/\$?\{(\d+)\}/g;"function"==typeof o?o=o.call(this,t.parameters,e):i.test(o)&&(o=d.validator.format(o.replace(i,"{$1}"),t.parameters)),this.errorList.push({message:o,element:e,method:t.method}),this.errorMap[e.name]=o,this.submitted[e.name]=o},addWrapper:function(e){return e=this.settings.wrapper?e.add(e.parent(this.settings.wrapper)):e},defaultShowErrors:function(){for(var e,t,o=0;this.errorList[o];o++)t=this.errorList[o],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(o=0;this.successList[o];o++)this.showLabel(this.successList[o]);if(this.settings.unhighlight)for(o=0,e=this.validElements();e[o];o++)this.settings.unhighlight.call(this,e[o],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return d(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var o,i,a=this.errorsFor(e),n=this.idOrName(e),s=d(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(t)):(i=a=d("<"+this.settings.errorElement+">").attr("id",n+"-error").addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(i=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,d(e)):i.insertAfter(e),a.is("label")?a.attr("for",n):0===a.parents("label[for='"+n+"']").length&&(i=a.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),s?s.match(new RegExp("\\b"+i+"\\b"))||(s+=" "+i):s=i,d(e).attr("aria-describedby",s),o=this.groups[e.name])&&d.each(this.groups,function(e,t){t===o&&d("[name='"+e+"']",this.currentForm).attr("aria-describedby",a.attr("id"))})),!t&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var t=this.idOrName(e),e=d(e).attr("aria-describedby"),t="label[for='"+t+"'], label[for='"+t+"'] *";return e&&(t=t+", #"+e.replace(/\s+/g,", #")),this.errors().filter(t)},idOrName:function(e){return this.groups[e.name]||!this.checkable(e)&&e.id||e.name},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),d(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return d(this.currentForm).find("[name='"+e+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return d("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!d(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!d.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(d(this.currentForm).submit(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(d(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return d.data(e,"previousValue")||d.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})},destroy:function(){this.resetForm(),d(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:d.extend(this.classRuleSettings,e)},classRules:function(e){var t={},e=d(e).attr("class");return e&&d.each(e.split(" "),function(){this in d.validator.classRuleSettings&&d.extend(t,d.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,o,i){(i=/min|max/.test(o)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i))?void 0:i)||0===i?e[o]=i:t===o&&"range"!==t&&(e[o]=!0)},attributeRules:function(e){var t,o,i={},a=d(e),n=e.getAttribute("type");for(t in d.validator.methods)o="required"===t?(o=e.getAttribute(t),""===o&&(o=!0),!!o):a.attr(t),this.normalizeAttributeRule(i,n,t,o);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var t,o,i={},a=d(e),n=e.getAttribute("type");for(t in d.validator.methods)o=a.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),this.normalizeAttributeRule(i,n,t,o);return i},staticRules:function(e){var t={},o=d.data(e.form,"validator");return t=o.settings.rules?d.validator.normalizeRule(o.settings.rules[e.name])||{}:t},normalizeRules:function(i,a){return d.each(i,function(e,t){if(!1===t)delete i[e];else if(t.param||t.depends){var o=!0;switch(typeof t.depends){case"string":o=!!d(t.depends,a.form).length;break;case"function":o=t.depends.call(a,a)}o?i[e]=void 0===t.param||t.param:delete i[e]}}),d.each(i,function(e,t){i[e]=d.isFunction(t)?t(a):t}),d.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),d.each(["rangelength","range"],function(){var e;i[this]&&(d.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(e=i[this].replace(/[\[\]]/g,"").split(/[\s,]+/),i[this]=[Number(e[0]),Number(e[1])]))}),d.validator.autoCreateRanges&&(null!=i.min&&null!=i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),null!=i.minlength)&&null!=i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength),i},normalizeRule:function(e){var t;return"string"==typeof e&&(t={},d.each(e.split(/\s/),function(){t[this]=!0}),e=t),e},addMethod:function(e,t,o){d.validator.methods[e]=t,d.validator.messages[e]=void 0!==o?o:d.validator.messages[e],t.length<3&&d.validator.addClassRules(e,d.validator.normalizeRule(e))},methods:{required:function(e,t,o){return this.depend(o,t)?"select"===t.nodeName.toLowerCase()?(o=d(t).val())&&0<o.length:this.checkable(t)?0<this.getLength(e,t):0<e.length:"dependency-mismatch"},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var o,i,a=0,n=0,s=!1;if((e=e.replace(/\D/g,"")).length<13||19<e.length)return!1;for(o=e.length-1;0<=o;o--)i=e.charAt(o),n=parseInt(i,10),s&&9<(n*=2)&&(n-=9),a+=n,s=!s;return a%10==0},minlength:function(e,t,o){e=d.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||o<=e},maxlength:function(e,t,o){e=d.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e<=o},rangelength:function(e,t,o){e=d.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e>=o[0]&&e<=o[1]},min:function(e,t,o){return this.optional(t)||o<=e},max:function(e,t,o){return this.optional(t)||e<=o},range:function(e,t,o){return this.optional(t)||e>=o[0]&&e<=o[1]},equalTo:function(e,t,o){o=d(o);return this.settings.onfocusout&&o.off(".validate-equalTo").on("blur.validate-equalTo",function(){d(t).valid()}),e===o.val()},remote:function(i,a,e){var n,t,s;return this.optional(a)?"dependency-mismatch":(s=this.previousValue(a),this.settings.messages[a.name]||(this.settings.messages[a.name]={}),s.originalMessage=this.settings.messages[a.name].remote,this.settings.messages[a.name].remote=s.message,e="string"==typeof e?{url:e}:e,s.old===i?s.valid:(s.old=i,(n=this).startRequest(a),(t={})[a.name]=i,d.ajax(d.extend(!0,{mode:"abort",port:"validate"+a.name,dataType:"json",data:t,context:n.currentForm,success:function(e){var t,o=!0===e||"true"===e;n.settings.messages[a.name].remote=s.originalMessage,o?(t=n.formSubmitted,n.prepareElement(a),n.formSubmitted=t,n.successList.push(a),delete n.invalid[a.name],n.showErrors()):(t={},e=e||n.defaultMessage(a,"remote"),t[a.name]=s.message=d.isFunction(e)?e(i):e,n.invalid[a.name]=!0,n.showErrors(t)),s.valid=o,n.stopRequest(a,o)}},e)),"pending"))}}});var i,a={};d.ajaxPrefilter?d.ajaxPrefilter(function(e,t,o){var i=e.port;"abort"===e.mode&&(a[i]&&a[i].abort(),a[i]=o)}):(i=d.ajax,d.ajax=function(e){var t=("mode"in e?e:d.ajaxSettings).mode,o=("port"in e?e:d.ajaxSettings).port;return"abort"===t?(a[o]&&a[o].abort(),a[o]=i.apply(this,arguments),a[o]):i.apply(this,arguments)})}),function(g,B,C){"use strict";function e(e,t){t&&t.onError&&!1===t.onError(e)||(this.name="JsRender Error",this.message=e||"JsRender error")}function I(e,t){for(var o in e=e||{},t)e[o]=t[o];return e}function t(e,t,o){return h.rTag&&!arguments.length||(n=e?e.charAt(0):n,s=e?e.charAt(1):s,r=t?t.charAt(0):r,d=t?t.charAt(1):d,e="\\"+n+"(\\"+(p=o||p)+")?\\"+s,t="\\"+r+"\\"+d,a="(?:(?:(\\w+(?=[\\/\\s\\"+r+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+r+"]|\\"+r+"(?!\\"+d+"))*?)",h.rTag=a+")",a=new RegExp(e+a+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),v=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)),[n,s,r,d,p]}function l(e,t){t||(t=e,e=C);var o,i,a,n,s=this,r=!t||"root"===t;if(e){if(!(n=s.type===t?s:C))if(o=s.views,s._.useKey){for(i in o)if(n=o[i].get(e,t))break}else for(i=0,a=o.length;!n&&i<a;i++)n=o[i].get(e,t)}else if(r)for(;s.parent.parent;)n=s=s.parent;else for(;s&&!n;)n=s.type===t?s:C,s=s.parent;return n}function c(){var e=this.get("item");return e?e.index:C}function u(e){var t,o=this,i=(o.ctx||{})[e];return(i=i===C?o.getRsc("helpers",e):i)&&"function"==typeof i&&I(t=function(){return i.apply(o,arguments)},i),t||i}function m(e,t){for(var o=this,i=j[e],a=i&&i[t];a===C&&o;)a=(i=o.tmpl[e])&&i[t],o=o.parent;return a}function y(e,t,o,i,a,n,s,r){var d="array"===t,r={key:0,useKey:d?0:1,id:""+K++,onRender:r,bnds:{}},i={data:i,tmpl:a,content:s,views:d?[]:{},parent:o,ctx:e,type:t,get:l,getIndex:c,getRsc:m,hlp:u,_:r,_is:"view"};return o&&(a=o.views,(s=o._).useKey?(a[r.key="_"+s.useKey++]=i,t=s.tag,r.bnd=d&&(!t||!!t._.bnd&&t)):a.splice(r.key=i.index=n!==C?n:a.length,0,i),i.ctx=e||o.ctx),i}function f(t,e,o,i,a,n){function s(e){if(""+e===e||0<e.nodeType){try{r=0<e.nodeType?e:!v.test(e)&&B&&B(g.document).find(e)[0]}catch(e){}return r&&(e=r.getAttribute(w),t=t||e,(e=O[e])||(t=t||"_"+Q++,r.setAttribute(w,t),e=O[t]=f(t,r.innerHTML,o,i,a,n))),e}}var r,d,l,c,p,h,u=s(e=e||"");if((n=n||(e.markup?e:{})).tmplName=t,o&&(n._parentTmpl=o),(u=!u&&e.markup&&(u=s(e.markup))&&u.fn&&(u.debug!==e.debug||u.allowCode!==e.allowCode)?u.markup:u)!==C){t&&!o&&(x[t]=function(){return e.render.apply(e,arguments)}),u.fn||e.fn?u.fn&&(e=t&&t!==u.tmplName?P(n,u):u):b(u,e=L(u,n));var m=n;for(d in A)if(p=A[d],(h=p.compile)&&(l=m[d+"s"]))for(c in l)l[c]=h(c,l[c],m,d,p);return e}}function L(e,t){var o,i=M.wrapMap||{},a=I({markup:e,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:D},t);return t.htmlTag||(o=H.exec(e),a.htmlTag=o?o[1].toLowerCase():""),(o=i[a.htmlTag])&&o!==i.div&&(a.markup=$.trim(a.markup),a._elCnt=!0),a}function U(d,l){var c=d+"s";j[c]=function e(t,o,i){var a,n,s,r;if(!t||""+t===t||t.nodeType||t.markup)return r=i?i[c]=i[c]||{}:e,o===C&&(o=t,t=C),n=l.compile,(a=h.onBeforeStoreItem)&&(n=a(r,t,o,n)||n),t?""+t===t&&(null===o?delete r[t]:r[t]=n?o=n(t,o,i,d,l):o):o=n(C,o),o&&(o._is=d),(a=h.onStoreItem)&&a(r,t,o,n),o;for(s in t)e(s,t[s],o);return j},A[d]=l}function D(e,t,o,i,a,n){var s,r,d,l,c,p,h,u,m,g,f,b=this,v=!b.attr||"html"===b.attr,w="";if(!0===i&&(p=!0,i=0),b.tag?(u=(b=(m=b).tag)._,g=b.tagName,f=m.tmpl,t=P(t,b.ctx),h=m.content,!1===m.props.link&&((t=t||{}).link=!1),o=o||m.view,e=e===C?o:e):f=b.jquery&&(b[0]||S('Unknown template: "'+b.selector+'"'))||b,f&&((o=!o&&e&&"view"===e._is?e:o)&&(h=h||o.content,n=n||o._.onRender,e===o&&(e=o.data,a=!0),t=P(t,o.ctx)),o&&o.data!==C||((t=t||{}).root=e),f=f.fn?f:O[f]||O(f))){if(!0===(m=n=!1!==(t&&t.link)&&v&&n)&&(m=C,n=o._.onRender),$.isArray(e)&&!a)for(d=p?o:i!==C&&o||y(t,"array",o,e,f,i,h,n),s=0,r=e.length;s<r;s++)l=y(t,"item",d,c=e[s],f,(i||0)+s,h,n),c=f.fn(c,l,j),w+=d._.onRender?d._.onRender(c,l):c;else d=p?o:y(t,g||"data",o,e,f,i,h,n),u&&!b.flow&&(d.tag=b),w+=f.fn(e,d,j);return m?m(w,d):w}return""}function S(e){if(M.debugMode)throw new j.sub.Error(e)}function E(e){S("Syntax error\n"+e)}function b(m,e,g,f){function b(e){(e-=$)&&I.push(m.substr($,e).replace(T,"\\n"))}function v(e){e&&E('Unmatched or missing tag: "{{/'+e+'}}" in template:\n'+m)}var w,y=e&&e.allowCode,t=[],$=0,C=[],I=t,D=[,,,t];return m=m.replace(F,"\\$1"),v(C[0]&&C[0][3].pop()[0]),m.replace(a,function(e,t,o,i,a,n,s,r,d,l,c,p){n&&(a=":",i="html");var n=t&&[],t="",h="",u="",l=!(l=l||g)&&!a&&!s;o=o||a,b(p),$=p+e.length,r?y&&I.push(["*","\n"+d.replace(W,"$1")+"\n"]):o?("else"===o&&(G.test(d)&&E('for "{{else if expr}}" use "{{else expr}}"'),n=D[6],D[7]=m.substring(D[7],p),D=C.pop(),I=D[3],l=!0),d&&(t=k(d=d.replace(T," "),n).replace(R,function(e,t,o){return t?u+=o+",":h+=o+",",""})),h=h.slice(0,-1),t=t.slice(0,-1),s=h&&h.indexOf("noerror:true")+1&&h||"",w=[o,i||!!f||"",t,l&&[],'params:"'+d+'",props:{'+h+"}"+(u?",ctx:{"+u.slice(0,-1)+"}":""),s,n||0],I.push(w),l&&(C.push(D),(D=w)[7]=$)):c&&(v(c!==(a=D[0])&&"else"!==a&&c),D[7]=m.substring(D[7],p),D=C.pop()),v(!D&&c),I=D[3]}),b(m.length),($=t[t.length-1])&&v(""+$!==$&&+$[7]===$[7]&&$[0]),function e(t,o,i){var a,n,s,r,d,l,c,p,h,u,m,g,f,b,v,w,y,$,C,I,D,S,k=0,P="",x="",A={},j=t.length;for(""+o===o?(f=i?'data-link="'+o.replace(T," ").slice(1,-1)+'"':o,o=0):(f=o.tmplName||"unnamed",o.allowCode&&(A.allowCode=!0),o.debug&&(A.debug=!0),u=o.bnds,g=o.tmpls),a=0;a<j;a++)if(I=t[a],""+I===I)P+='\nret+="'+I+'";';else if(n=I[0],"*"===n)P+=""+I[1];else{if(s=I[1],r=I[2],v=I[3],d=I[4],x=I[5],w=I[7],(C="else"===n)||(k=0,u&&(m=I[6])&&(k=u.push(m))),(I=":"===n)?(s&&(n="html"===s?">":s+n),x&&(x="try{var "+(D="prm"+a)+"=["+r+"][0];}catch(e){"+D+'="";}\n',r=D)):(v&&((D=L(w,A)).tmplName=f+"/"+n,e(v,D),g.push(D)),C||(b=n,$=P,P="",0),y=(y=t[a+1])&&"else"===y[0]),d+=",args:["+r+"]}",I&&m||s&&">"!==n){if((S=new Function("data,view,j,u"," // "+f+" "+k+" "+n+"\n"+x+"return {"+d+";")).paths=m,S._ctxs=n,i)return S;h=!0}if(P+=I?"\n"+(m?"":x)+(i?"return ":"ret+=")+(h?(h=!0,'c("'+s+'",view,'+(m?(u[k-1]=S,k):"{"+d)+");"):">"===n?(c=!0,"h("+r+");"):(p=!0,"(v="+r+")!="+(i?"=":"")+'u?v:"";')):(l=!0,"{tmpl:"+(v?g.length:"0")+","+d+","),b&&!y){if(P="["+P.slice(0,-1)+"]",(i||m)&&(P=new Function("data,view,j,u"," // "+f+" "+k+" "+b+"\nreturn "+P+";"),m&&((u[k-1]=P).paths=m),P._ctxs=n,i))return P;P=$+'\nret+=t("'+b+'",view,this,'+(k||P)+");",b=m=0}}P="// "+f+"\nvar j=j||"+(B?"jQuery.":"js")+"views"+(p?",v":"")+(l?",t=j._tag":"")+(h?",c=j._cnvt":"")+(c?",h=j.converters.html":"")+(i?";\n":',ret="";\n')+(M.tryCatch?"try{\n":"")+(A.debug?"debugger;":"")+P+(i?"\n":"\nreturn ret;\n")+(M.tryCatch?"\n}catch(e){return j._err(e);}":"");try{P=new Function("data,view,j,u",P)}catch(e){E("Compiled template code:\n\n"+P)}return o&&(o.fn=P),P}(t,e||m,g)}function k(w,y){var $,C,I={},D={0:-1},S=0,k=!1,P=!1;return(w+" ").replace(z,function(e,t,o,r,i,a,n,s,d,l,c,p,h,u,m,g,f,b,v){if(i=i||"",o=o||t||c,r=r||s,y&&m&&y.push({_jsvOb:v.slice(D[S-1]+1,b+1)}),d=d||g||"",!a)return P?(P=!p)?e:'"':k?(k=!h)?e:'"':(o?(D[++S]=b,o):"")+(f?S?"":$?($=C=!1,"\b"):",":n?(S&&E(w),C="~"===($=r).charAt(0),"\b"+r+":"):r?r.split("^").join(".").replace(N,function(e,t,o,i,a,n,s){return t&&(y&&!C&&y.push(r),"."!==t)?(n=(o?'view.hlp("'+o+'")':i?"view":"data")+(s?(a?"."+a:o||i?"":"."+t)+(n||""):(s=o?"":i?a||"":t,"")),"view.data"===(n+=s?"."+s:"").slice(0,9)?n.slice(5):n):e})+(d?(I[++S]=!0,d):i):i||(u?(I[S--]=!1,u+(d?(I[++S]=!0,d):"")):l?(I[S]||E(w),","):t?"":(P=p,k=h,'"')));E(w)})}function P(e,t){return e&&e!==t?t?I(I({},t),e):e:t&&I({},t)}function o(e){return Z[e]}if(!(B&&B.views||g.jsviews)){var $,i,a,v,n="{",s="{",r="}",d="}",p="^",N=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,z=/(\()(?=\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*((\))(?=\s*\.|\s*\^)|\)|\])([([]?))|(\s+)/g,T=/\s*\n/g,W=/\\(['"])/g,F=/([\\'"])/g,R=/\x08(~)?([^\x08]+)\x08/g,G=/^if\s/,H=/<(\w+)[>\s]/,q=/[<"'&]/g,V=/[><"'&]/g,Q=0,K=0,Z={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;"},w="data-jsv-tmpl",x={},A={template:{compile:f},tag:{compile:function(e,t,o){var i;return"function"==typeof t?t={depends:t.depends,render:t}:((i=t.template)&&(t.template=""+i===i?O[i]||O(i):i),!1!==t.init&&((i=t.init=t.init||function(){}).prototype=t,(i.prototype=t).constructor=i)),o&&(t._parentTmpl=o),t}},helper:{},converter:{}},j={jsviews:"v1.0pre",render:x,View:y,settings:{delimiters:t,debugMode:!0,tryCatch:!0},sub:{Error:e,tmplFn:b,parse:k,extend:I,error:S,syntaxError:E},_cnvt:function(e,t,o){var i,a=+o===o&&o,n=t.linkCtx,s=(o=a?(a=t.tmpl.bnds[a-1])(t.data,t,j):o).args[0];return(e||a)&&((i=n&&n.tag||{_:{inline:!n},tagName:e+":",flow:!0,_is:"tag"})._.bnd=a,n&&((n.tag=i).linkCtx=n,o.ctx=P(o.ctx,n.view.ctx)),(i.tagCtx=o).view=t,i.ctx=o.ctx||{},delete o.ctx,t._.tag=i,(e="true"!==e&&e)&&((n=t.getRsc("converters",e))?(i.depends=n.depends,s=n.apply(i,o.args)):S("Unknown converter: {{"+e+":")),s=a&&t._.onRender?t._.onRender(s,t,a):s),s},_tag:function(e,t,o,i){var a,n,s,r,d,l,c,p,h,u,m,g,f="",b=+i===i&&i,v=t.linkCtx||0,w=t.ctx,y=o||t.tmpl,$=t._;for("tag"===e._is&&(e=(n=e).tagName),c=(i=b?(m=y.bnds[b-1])(t.data,t,j):i).length,n=n||v.tag,l=0;l<c;l++)u=(h=i[l]).tmpl,u=h.content=u&&y.tmpls[u-1],o=h.props.tmpl,l||o&&n||(g=t.getRsc("tags",e)||S("Unknown tag: {{"+e+"}}")),I(h,{tmpl:o=""+(o=o||!l&&g.template||u)===o?t.getRsc("templates",o)||O(o):o,render:D,index:l,view:t,ctx:P(h.ctx,w)}),n||(g.init?(n=new g.init(h,v,w)).attr=n.attr||g.attr||C:n={render:g.render},n._={inline:!v},v&&(v.attr=n.attr=v.attr||n.attr,(v.tag=n).linkCtx=v),(n._.bnd=m||v)&&(n._.arrVws={}),n.tagName=e,n.parent=d=w&&w.tag,n._is="tag"),$.tag=n,(h.tag=n).tagCtxs=i,n.rendering={},n.flow||(s=(u=h.ctx=h.ctx||{}).parentTags=w&&P(u.parentTags,w.parentTags)||{},d&&(s[d.tagName]=d),u.tag=n);for(l=0;l<c;l++)h=n.tagCtx=i[l],n.ctx=h.ctx,f+=(p=(a=n.render)?a.apply(n,h.args):p)!==C?p:h.tmpl?h.render():"";return delete n.rendering,n.tagCtx=n.tagCtxs[0],n.ctx=n.tagCtx.ctx,n._.inline&&(r=n.attr)&&"html"!==r&&(f="text"===r?_.html(f):""),b&&t._.onRender?t._.onRender(f,t,b):f},_err:function(e){return M.debugMode?"Error: "+(e.message||e)+". ":""}};for(i in(e.prototype=new Error).constructor=e,c.depends=function(){return[this.get("item"),"index"]},A)U(i,A[i]);var O=j.templates,_=j.converters,J=(j.helpers,j.tags),h=j.sub,M=j.settings;B?($=B).fn.render=D:($=g.jsviews={}).isArray=Array&&Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},$.render=x,$.views=j,$.templates=O=j.templates,J({else:function(){},if:{render:function(e){var t=this;return t.rendering.done||!e&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render())},onUpdate:function(e,t,o){for(var i,a,n=0;(i=this.tagCtxs[n])&&i.args.length;n++)if(a=!(i=i.args[0])!=!o[n].args[0],i||a)return a;return!1},flow:!0},for:{render:function(e){var t=this.tagCtx,o=!arguments.length,i="",a=o||0;return!this.rendering.done&&(o?i=C:e!==C&&(i+=t.render(e),a+=$.isArray(e)?e.length:1),this.rendering.done=a)&&(this.selected=t.index),i},onUpdate:function(){},onArrayChange:function(e,t){var o,i=t.change;if(this.tagCtxs[1]&&("insert"===i&&e.target.length===t.items.length||"remove"===i&&!e.target.length||"refresh"===i&&!t.oldItems.length!=!e.target.length))this.refresh();else for(o in this._.arrVws)o=this._.arrVws[o],o.data===e.target&&o._.onArrayChange.apply(o,arguments);e.done=!0},flow:!0},include:{flow:!0},"*":{render:function(e){return e},flow:!0}}),_({html:function(e){return e!=C?String(e).replace(V,o):""},attr:function(e){return e!=C?String(e).replace(q,o):null===e?null:""},url:function(e){return e!=C?encodeURI(String(e)):null===e?null:""}}),t()}}(this,this.jQuery);var browser=("undefined"!=typeof ej?ej:BoldBIDashboard).browserInfo(),isGetLinkDialogBinded=!1;function intializeGetLinkDialog(){$.ajax({type:"Get",url:getLinkDialogViewUrl,success:function(e){$("body").append(e)}})}function GetLink(e){var t,o,i=e.ItemType,i=(2==i?$(".dashboard-link").show():6==i?($(".file-link").show(),$("#compressed-link").prop("checked",!0)):(8==i?$(".widget-link"):$(".link")).show(),e.Name),a=(e.Id,document.getElementById("get_item_link").style.display="block",'<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.GetLink+'</span><span class="item-name">'+e.Name+"</span></span>");isGetLinkDialogBinded?((o=document.getElementById("get_item_link_dialog").ej2_instances)[0].header=a,o[0].show()):((t=document.createElement("div")).setAttribute("id","get_item_link_dialog"),document.getElementById("dashboard-page-container").appendChild(t),(o=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"450px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:a,showCloseIcon:!0,open:onGetLinkDialogOpen,content:document.getElementById("get_item_link"),buttons:[{click:function(e){o.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.OKButton}}]})).appendTo(t),isGetLinkDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("get_item_link_dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("get_item_link_dialog")),intializeGetLinkDialog(),ejs.popups.hideSpinner(document.getElementById("get_item_link_dialog")),$(".get_link").show(),e.IsPublic?($(".private-note").hide(),$(".public-note").show()):($(".private-note").show(),$(".public-note").hide()),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link").css({width:"100%",borderRadius:"4px"}),$("#item-link-copy").attr("data-original-title","")):$("#item-link-copy").tooltip({animation:!1}),$(".report-name").html(i),$(".report-name").attr("title",i),$("#item-link").val(getDashboardShareLink(e.Id,e.CategoryName,e.Name)),$("#item-link").select(),$(".modal-footer .validation-area").css("display","block")}function onGetLinkDialogOpen(){$("#item-link").select(),$(".get_link").show(),$("#item-link").val(itemUrl.trim()),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link-copy").attr("data-original-title",""))}function getDashboardShareLink(e,t,o,i){var a=baseUrl.split("/");return encodeURI(a[0]+"//"+a[2]+(i||viewDashboardUrlAction)+"/"+e+"/"+t+"/"+o)}$(document).on("click","#item-link-copy",function(e){$("#item-link").select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").attr("data-original-title","")):(document.execCommand("copy"),$("#item-link-copy").attr("data-original-title",window.Server.App.Localization.Copysuccess),$("#item-link-copy").tooltip("hide").attr("data-original-title",window.Server.App.Localization.Copysuccess).tooltip("fixTitle").tooltip("show"),setTimeout(function(){$("#item-link-copy").attr("data-original-title",window.Server.App.Localization.LinkCopy),$("#item-link-copy").tooltip()},3e3))});var isMakePublicDialogBinded=!1,isMakePrivateDialogBinded=!1;function makePublic(e){document.getElementById("make_item_public").style.display="block";var t,o,i='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.MakePublic+'</span><span class="item-name">'+e.Name+"</span></span>";isMakePublicDialogBinded?((o=document.getElementById("make_item_public_dialog").ej2_instances)[0].header=i,o[0].show()):((t=document.createElement("div")).setAttribute("id","make_item_public_dialog"),document.getElementById("dashboard-page-container").appendChild(t),(o=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"450px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:i,showCloseIcon:!0,content:document.getElementById("make_item_public")})).appendTo(t),isMakePublicDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("make_item_public_dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("make_item_public_dialog")),getMakeItemPublicDetails(e)}function getMakeItemPublicDetails(o){$("#item_name").html(o.Name);var i=getDashboardShareLink(o.Id,o.CategoryName,o.Name);$.ajax({type:"POST",url:makePublicUrl,data:{itemId:o.Id},success:function(e){$("#make_item_public").html(e);var t,e=$("#make-public-status").val();(t=document.getElementById("make_item_public_dialog").ej2_instances)[0].buttons="true"==e?[{click:function(e){makeItemPublic(o)},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.MakePublic}},{click:function(){t[0].hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.NoButton}}]:[{click:function(){t[0].hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CloseButton}}],ejs.popups.hideSpinner(document.getElementById("make_item_public_dialog")),$("#make-item-public").attr("data-itemtype",o.ItemType),$("#make-item-public").attr("data-url",i),$("#make_item_public_dialog").focus()}})}function makeItemPublic(t){$("#item_name").html($("#make-item-public").attr("data-name")),itemUrl=$("#make-item-public").attr("data-url");var e=$("#make-item-public").attr("data-item-id"),o=$("#make-item-public").attr("data-name"),i=$("#make-item-public").attr("data-item-type").trim(),a=(ejs.popups.showSpinner(document.getElementById("make_item_public_dialog")),document.getElementById("make_item_public_dialog").ej2_instances);$.ajax({type:"POST",url:makeItemPublicUrl,data:{itemId:e},success:function(e){e.validation&&e.result?(a[0].hide(),GetLink(t),$(".report-name").html(o),$(".report-name").attr("title",o),$("."+i.toLowerCase()+"-link").show(),$(".unlist-note").hide(),$(".private-note").hide(),$(".public-note").show(),$("#change-privacy").attr("data-ispublic",!1),ResetItemList(ItemType.Dashboard)):($("#makepublicitem").hide(),$("#select-area").hide(),$("#close").show(),$(".error-msg").show()),ejs.popups.hideSpinner(document.getElementById("make_item_public_dialog"))}})}function makePrivate(e){var t,o,i='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.MakePrivate+'</span><span class="item-name">'+e.Name+"</span></span>";isMakePrivateDialogBinded?((o=document.getElementById("remove_item_public_dialog").ej2_instances)[0].header=i,o[0].show()):((t=document.createElement("div")).setAttribute("id","remove_item_public_dialog"),document.getElementById("dashboard-page-container").appendChild(t),(o=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"450px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:i,showCloseIcon:!0,content:document.getElementById("remove_item_public"),buttons:[{click:function(e){removeItemPublic()},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.MakePrivate}},{click:function(){o.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.NoButton}}]})).appendTo(t),isMakePrivateDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("remove_item_public_dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("remove_item_public_dialog")),getRemoveItemPublicDetails(e)}function getRemoveItemPublicDetails(t){$("#item_name").html(t.Name);var o=getDashboardShareLink(t.Id,t.CategoryName,t.Name);$.ajax({type:"POST",url:removePublicUrl,data:{itemId:t.Id},success:function(e){$("#remove_item_public").html(e),ejs.popups.hideSpinner(document.getElementById("remove_item_public_dialog")),$("#remove-public").attr("data-itemtype",t.ItemType),$("#remove-public").attr("data-url",o),$("#remove_item_public_dialog").focus()}})}function removeItemPublic(){$("#item_name").html($("#remove-public").attr("data-name"));var e=$("#remove-public").attr("data-item-id"),t=(ejs.popups.showSpinner(document.getElementById("remove_item_public_dialog")),document.getElementById("remove_item_public_dialog").ej2_instances);$.ajax({type:"POST",url:removeItemPublicUrl,data:{itemId:e},success:function(e){t[0].hide(),e.validation&&e.result?(successToast(window.Server.App.Localization.PrivateDashboard,7e3),$("#change-privacy").attr("data-ispublic",!1),ResetItemList(ItemType.Dashboard)):warningToast(window.Server.App.Localization.InternalServerError),ejs.popups.hideSpinner(document.getElementById("remove_item_public_dialog"))}})}var isItemDeleteDialogBinded=!1;function DeleteItem(e){document.getElementById("item-delete-confirmation").style.display="block";var t,o,i='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.DeleteDashboard+'</span><span class="item-name">'+e.Name+"</span></span>";isItemDeleteDialogBinded?((o=document.getElementById("delete-item-dialog").ej2_instances)[0].header=i,o[0].show()):((t=document.createElement("div")).setAttribute("id","delete-item-dialog"),document.getElementById("dashboard-page-container").appendChild(t),(o=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"450px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:i,showCloseIcon:!0,content:document.getElementById("item-delete-confirmation")})).appendTo(t),isItemDeleteDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("delete-item-dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("delete-item-dialog")),getDeleteItemDetails(e)}function getDeleteItemDetails(e){$("#delete-item-name").html(e.Name),$("#delete-item").attr("data-item-id",e.Id);var t="";e.ItemType==ItemType.Datasource&&(t=$(this).attr("data-datasource-type")),$.ajax({type:"POST",url:deleteConfirmationUrl,data:{itemId:e.Id,itemTypeId:e.ItemType,itemName:e.Name,datasourceType:t},success:function(e){$("#item-delete-confirmation").html(e);var t,e=$("#delete-category-status").val();(t=document.getElementById("delete-item-dialog").ej2_instances)[0].buttons="true"==e?[{click:function(e){deleteItemConfirmation()},buttonModel:{cssClass:"app-btn-danger",content:window.Server.App.Localization.YesButton}},{click:function(){t[0].hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.NoButton}}]:[{click:function(){t[0].hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.OKButton}}],ejs.popups.hideSpinner(document.getElementById("delete-item-dialog")),$("#item-delete-confirmation").focus()}})}function deleteItemConfirmation(){ejs.popups.showSpinner(document.getElementById("delete-item-dialog"));var o=$("#delete-item").attr("data-item-id"),i=$("#delete-item").attr("data-itemtype"),e="";"Datasource"==i&&(e=$("#delete-item").attr("data-datasource-type")),$.ajax({type:"POST",url:deleteItemUrl,data:{itemId:o,datasourceType:e},success:function(e){var t;ejs.popups.hideSpinner(document.getElementById("delete-item-dialog")),e.Success?(successToast(window.Server.App.Localization.DeleteSuccess.format($("#delete-item-name").html()),7e3),"Dashboard"==i?0<e.DashboardCount&&null!=e.DashboardCount&&(ResetItemList(ItemType.Dashboard),ResetItemList(ItemType.Category),void 0===(t=$("#dashboard-rendering-iframe").attr("src"))||!t.contains(o))||($("#body").ejWaitingPopup("show"),location.reload()):"Category"==i&&ResetItemList(ItemType.Category)):0==e.HasPermission?warningToast(window.Server.App.Localization.DeleteItemPermissionMessage+" "+window.Server.App.Localization.ReloadPage,null,(new Date).getTime(),window.Server.App.Localization.DeleteFail):warningToast(window.Server.App.Localization.DeleteFailMessage.format($("#delete-item-name").html()),null,(new Date).getTime(),window.Server.App.Localization.DeleteFail),document.getElementById("delete-item-dialog").ej2_instances[0].hide()}})}var isWidget=!1,sharePermissionDlgObj="",sharePermissionDlgWrapperObj="",sharePermisisonDlgHeader="",sharePermissionDlgHeaderItemName="",selectedMode="",sharePermissionConatiner="",accessModeContainer="",dummyContainer="",embedCodeContainer="",sharePermissionDashboardSettingSectionObj="",sharePermissionPublicSectionObj="",sharePermissionPrivateSectionObj="",sharePermissionUserGroupSectionObj="",manageUserGroupContainer="",manageUserGroupBodySection="",getEmbedLinkSection="",embedConfiguration="",changeIndicatorBannerObj="",shareWithLabelObj="",getLinkInputObj="",getLinkCopyLinkobj="",getEmbedCodeInputObj="",getEmbedCodeCopyBtnobj="",accessModeChangeLink="",manageAccessButton="",manageAccessBackButton="",manageAccessSaveBtnObj="",manageAccessCancelBtnObj="",shareDoneBtnObj="",shareBtnObj="",accessModeChngBtnObj="",accessModeCancelBtnObj="",embedCodeDoneBtnObj="",embedCodeBackButton="",addOwnerBtnObj="",publicRadioBtnObj="",privateRadioBtnObj="",isItemPublic=!1,isEntireDOMRendered=!1,isItemUnlisted=!1,isGetEmbedCodeTriggered=!1,isMarkItemsPublicForShareDialog=!1,accessModeSelectionInput="",sharedUserGroupsPreservedList=[],sharedAccessModePreservedList=[],markForDeleteBtnObj="",removeMarkForDeleteBtnObj="",toggleMarkForDeletionObj="",modifiedItemIndex=[],addNewItemPermission=[],userMarkedForDeletionList=[],groupMarkedForDeletionList=[],showSharedUserGroupContainer="",showSharedUserGroupNameSection="",showSharedUserGroupName="",showSharedUserGroupCountSection="",showSharedUserGroupCount="",currentItemDetail=[],currentDashboardDetail=[],shareItem=angular.module("serverApp");function manageAccessCancelBtn(){$('[data-toggle="popover"]').popover("hide"),resetToActualScope(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection()}function shareDashboardPermission(e,t){$("#user-group-search-input_suggestion").removeClass("hide-suggesstion"),currentItemDetail=e,currentDashboardDetail=t;var o=null!=window.granularPermissions&&(window.granularPermissions.All||window.granularPermissions.DashboardSettings),i=null!=window.granularPermissions&&window.granularPermissions.Dashboard,a=null!=window.granularPermissions&&window.granularPermissions.Slideshow,n=null!=window.granularPermissions&&window.granularPermissions.Datasource,s=null!=window.granularPermissions&&window.granularPermissions.Category,r=angular.element("#share-permission-content-section").scope(),o=(r.currentItemType=e.ItemType,r.isAdmin=isAdmin,r.hasDashboardSettingsPermission=isAdmin||o,isItemUnlisted=e.IsUnlisted,null!=t&&(r.isDashboardPublic=t.IsPublic),0),o=e.ItemType==ItemType.Category||e.ItemType==ItemType.Datasource?241:e.ItemType==ItemType.Slideshow?356:e.ItemType==ItemType.ItemView?418:isMarkItemsPublicForShareDialog?e.IsMultiDashboard?e.IsPublic?407:391:e.IsPublic?434:418:e.IsMultiDashboard?335:362;switch("undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog({height:o}):sharePermissionDlgObj.ejDialog({height:o}),sharePermissionDlgHeaderItemName.text(e.Name),sharePermissionDlgObj.show(),$("#share-permission-popup_wrapper, #user-group-search-input_suggestion").addClass("custom-bootstrap-styles"),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog("open"):sharePermissionDlgObj.ejDialog("open"),e.ItemType==ItemType.Dashboard||e.ItemType==ItemType.ItemView?e.CreatedById==currentUserId||isAdmin||i?((isMarkItemsPublicForShareDialog||e.ItemType==ItemType.ItemView||!isMarkItemsPublicForShareDialog&&e.ItemType==ItemType.Dashboard?e.IsPublic?showPublicContent:showPrivateContent:showDashboardSettingContent)(),addAttributeValueToBtnEle(e)):(hidePublicPrivateContent(),r=e.IsMultiDashboard?312:339,"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog({height:r}):sharePermissionDlgObj.ejDialog({height:r})):hidePublicPrivateContent(),e.ItemType==ItemType.Dashboard?e.CreatedById==currentUserId||isAdmin||i?showShareDialogContent(e):hideShareUserGroupPermissionSection():e.ItemType==ItemType.Slideshow?e.CreatedById==currentUserId||isAdmin||a?showShareDialogContent(e):hideShareUserGroupPermissionSection():e.ItemType==ItemType.Datasource?e.CreatedById==currentUserId||isAdmin||n?showShareDialogContent(e):hideShareUserGroupPermissionSection():e.ItemType==ItemType.Category?e.CreatedById==currentUserId||isAdmin||s?showShareDialogContent(e):hideShareUserGroupPermissionSection():e.CreatedById==currentUserId||isAdmin?showShareDialogContent(e):hideShareUserGroupPermissionSection(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-url-copy").hide(),$("#item-url").css({width:"100%",borderRadius:"4px"}),$("#item-url-copy").attr("data-original-title","")):$("#item-url-copy").tooltip({animation:!1}),e.ItemType){case ItemType.Dashboard:$("#item-url").val(getDashboardShareLink(e.Id,e.CategoryName,e.Name));break;case ItemType.ItemView:var d=getDashboardShareLink(t.Id,t.CategoryName,t.Name);$("#item-url").val(d+"?viewid="+e.Id);break;case ItemType.Slideshow:d=baseUrl.split("/");$("#item-url").val(d[0]+"//"+d[2]+slideShowUrl+"/"+e.Id+"/"+e.Name);break;default:$("#item-url").val("")}}function addGroupOwnerDialogOpen(){var e=$("#add-owner-button").attr("data-groupname"),t=$("#add-owner-button").attr("data-groupid"),o=angular.element("#share-permission-content-section").scope();currentItemDetail.ItemType=ItemType.UserManagement,o.currentItemType=ItemType.UserManagement,o.isAdmin=isAdmin,"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog({height:241}):sharePermissionDlgObj.ejDialog({height:241}),sharePermisisonDlgHeader.text(window.Server.App.Localization.AddGroupOwnerBtn),sharePermissionDlgHeaderItemName.text(e),sharePermissionDlgObj.show(),$("#share-permission-popup_wrapper, #user-group-search-input_suggestion").addClass("custom-bootstrap-styles"),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog("open"):sharePermissionDlgObj.ejDialog("open"),hidePublicPrivateContent(),getGroupUserPermission(t),addOwnerBtnObj.attr("data-item-id",t),addOwnerBtnObj.attr("data-name",e),addOwnerBtnObj.attr("data-itemtype",ItemType.UserManagement),autoCompleteHiddenEle.attr("data-item-id",t),autoCompleteHiddenEle.attr("data-itemtype",ItemType.UserManagement)}function showShareDialogContent(e){showShareUserGroupPermissionSection(),getShareItemPermission(e.Id),addAttributeValueToBtnEle(e),addAttributeValueToAutoCompleteEle(e)}function onSharePermissionPopupOpen(e){$('[data-toggle="popover"]').popover("hide"),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("refresh"):sharePermissionDlgWrapperObj.ejWaitingPopup("refresh"),0==isGetEmbedCodeTriggered&&showSharePermissionContainer(),refreshDialogBoxPosition()}function onSharePermissionPopupClose(e){currentItemDetail=[],$(".embed-configuration [type='checkbox']").prop("checked",!1),$("#mode-selection").val("view"),$("#sso-providers").val("OpenID"),selectedMode="",$(".auth-provider-row").addClass("hide"),$('[data-toggle="popover"]').popover("hide"),showSharePermissionContainer(),"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("refresh"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):(sharePermissionDlgWrapperObj.ejWaitingPopup("refresh"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide")),isGetEmbedCodeTriggered=!1,refreshDialogBoxPosition()}function showAccessModeContainer(){sharePermisisonDlgHeader.text(window.Server.App.Localization.SharePermissionAccessMode),accessModeContainer.show(),accessModeChngBtnObj.show(),accessModeCancelBtnObj.show(),sharePermissionConatiner.hide(),manageAccessButton.hide(),shareBtnObj.hide(),shareDoneBtnObj.hide(),refreshDialogBoxPosition(),currentItemDetail.ItemType!=ItemType.Dashboard||isMarkItemsPublicForShareDialog||sharePermissionDashboardSettingSectionObj.show()}function showManageAccessContainer(){sharePermissionDashboardSettingSectionObj.hide(),showSharedUserGroupContainer.hide(),shareBtnObj.text(window.Server.App.Localization.AddPeopleBtn),addOwnerBtnObj.text(window.Server.App.Localization.AddPeopleBtn),sharePermisisonDlgHeader.text(window.Server.App.Localization.ManageAccess),dummyContainer.hide(),""==autoCompleteInstance.getValue()&&(shareBtnObj.hide(),addOwnerBtnObj.hide()),currentItemDetail.ItemType==ItemType.UserManagement&&($(".change-access-mode-selection span").removeClass("caret"),$(".change-access-mode-selection button").attr("disabled",!0)),manageAccessBackButton.show(),manageUserGroupContainer.show(),manageAccessButton.hide(),refreshUserGroupScroll(),refreshDialogBoxPosition(),generateProfileAvatar()}function hideManageAccessContainer(){manageUserGroupContainer.hide(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),embedCodeDoneBtnObj.hide(),embedCodeBackButton.hide(),embedCodeContainer.hide(),changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues()}function showSharePermissionContainer(){currentItemDetail.ItemType==ItemType.UserManagement?(sharePermisisonDlgHeader.text(window.Server.App.Localization.AddGroupOwnerBtn),$(".show-shared-user-group-label").text("Group Owners :")):sharePermisisonDlgHeader.text(window.Server.App.Localization.SharePermissionDefault),dummyContainer.show(),shareBtnObj.text(window.Server.App.Localization.SharePeopleBtn),enableAutocompleteAccessModeSelectionWithoutReset(),refreshAutoComplete(),sharePermissionConatiner.show(),manageAccessButton.show(),shareDoneBtnObj.show(),manageAccessBackButton.hide(),hideManageAccessContainer(),accessModeContainer.hide(),accessModeChngBtnObj.hide(),accessModeCancelBtnObj.hide(),displaySharedUserGroupInfo(),currentItemDetail.ItemType==ItemType.Dashboard?"undefined"!=typeof BoldBIDashboard&&".sydj"==currentItemDetail.Extension.toLowerCase()||currentItemDetail.IsMultiDashboard||!ej.isNullOrUndefined(currentItemDetail.Extension)&&".sydj"==currentItemDetail.Extension.toLowerCase()||currentItemDetail.IsMultiDashboard?getEmbedLinkSection.show():getEmbedLinkSection.hide():currentItemDetail.ItemType==ItemType.ItemView&&getEmbedLinkSection.show(),embedCodeDoneBtnObj.hide(),embedCodeBackButton.hide(),sharePermissionDlgHeaderItemName.show(),sharePermisisonDlgHeader.css("line-height",""),refreshDialogBoxPosition()}function showSharePermissionContainerWithRefresh(){$('[data-toggle="popover"]').popover("hide"),resetToActualScope(),hideManageAccessContainer(),enableAutocompleteAccessModeSelectionWithoutReset(),autoCompleteHiddenEle.attr("data-itemtype")!=ItemType.UserManagement?sharePermisisonDlgHeader.text(window.Server.App.Localization.SharePermissionDefault):sharePermisisonDlgHeader.text(window.Server.App.Localization.AddGroupOwnerBtn),displaySharedUserGroupInfo(),dummyContainer.show(),shareBtnObj.text(window.Server.App.Localization.SharePeopleBtn),addOwnerBtnObj.text(window.Server.App.Localization.AddGroupOwnerBtn),showPublicPrivateContent(),sharePermissionConatiner.show(),manageAccessButton.show(),""!=autoCompleteInstance.getValue()?((autoCompleteHiddenEle.attr("data-itemtype")!=ItemType.UserManagement?shareBtnObj:addOwnerBtnObj).show(),manageAccessCancelBtnObj.show(),shareDoneBtnObj.hide()):shareDoneBtnObj.show(),manageAccessBackButton.hide(),accessModeContainer.hide(),accessModeChngBtnObj.hide(),accessModeCancelBtnObj.hide(),refreshDialogBoxPosition()}function showDashboardSettingContent(){sharePermissionPublicSectionObj.hide(),sharePermissionPrivateSectionObj.hide(),sharePermissionDashboardSettingSectionObj.show()}function showPublicContent(){sharePermissionPublicSectionObj.show(),sharePermissionPrivateSectionObj.hide(),isItemPublic=!0}function showPrivateContent(){sharePermissionPublicSectionObj.hide(),sharePermissionPrivateSectionObj.show(),isItemPublic=!1}function showPublicOrPrivateContent(){(isItemPublic?showPublicContent:showPrivateContent)()}function showShareUserGroupPermissionSection(){sharePermissionUserGroupSectionObj.show()}function hideShareUserGroupPermissionSection(){sharePermissionUserGroupSectionObj.hide()}function hidePublicPrivateContent(){sharePermissionPublicSectionObj.hide(),sharePermissionPrivateSectionObj.hide(),sharePermissionDashboardSettingSectionObj.hide()}function showPublicPrivateContent(){var e=null!=window.granularPermissions&&window.granularPermissions.Dashboard;(currentItemDetail.ItemType==ItemType.Dashboard||currentItemDetail.ItemType==ItemType.ItemView)&&(currentItemDetail.CreatedById==currentUserId||isAdmin||e)?(isMarkItemsPublicForShareDialog||currentItemDetail.ItemType==ItemType.ItemView?isItemPublic?sharePermissionPublicSectionObj:sharePermissionPrivateSectionObj:sharePermissionDashboardSettingSectionObj).show():hidePublicPrivateContent()}function changeAccessMode(){manageAccessCancelBtn(),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),showAccessModeContainer(),(isItemPublic?publicRadioBtnObj:privateRadioBtnObj).prop("checked",!0),$("#make-unlisted").prop("checked",isItemUnlisted),accessModeChngBtnObj.attr("disabled",!0),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}function getEmbedCode(){embedCodeDialog(),embedCodeBackButton.show()}function embedCodeDialog(){$("#embed-code").val(generateEmbedCode(currentItemDetail)),embedCodeContainer.show(),$("#mode-selection").selectpicker("refresh"),$("#sso-providers").selectpicker("refresh"),sharePermisisonDlgHeader.text(window.Server.App.Localization.EmbedCode),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&getEmbedCodeCopyBtnobj.hide(),currentItemDetail.IsPublic?($(".private-embed-code-note").hide(),$(".public-embed-code-note").show()):($(".private-embed-code-note").show(),$(".public-embed-code-note").hide()),embedCodeDoneBtnObj.show(),manageAccessBackButton.hide(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),sharePermissionDlgHeaderItemName.hide(),sharePermisisonDlgHeader.css("line-height","32px"),sharePermissionConatiner.hide(),manageAccessButton.hide(),shareBtnObj.hide(),shareDoneBtnObj.hide(),isEntireDOMRendered=!0,refreshDialogBoxPosition()}function getEmbedCodeFromContext(){embedCodeDialog()}function addAttributeValueToBtnEle(e){accessModeChngBtnObj.attr("data-item-id",e.Id),accessModeChngBtnObj.attr("data-name",e.Name),accessModeChngBtnObj.attr("data-itemtype",e.ItemType),accessModeChngBtnObj.attr("data-category-name",e.CategoryName),shareBtnObj.attr("data-item-id",e.Id),shareBtnObj.attr("data-name",e.Name),shareBtnObj.attr("data-itemtype",e.ItemType)}function addAttributeValueToAutoCompleteEle(e){autoCompleteHiddenEle.attr("data-item-id",e.Id),autoCompleteHiddenEle.attr("data-itemtype",e.ItemType)}function getShareItemPermission(e){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),$.ajax({type:"get",url:getShareItemPermissionUrl,data:{itemId:e},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var t;e.status&&((t=angular.element("#share-permission-content-section").scope()).$apply(function(){angular.copy(e.SharedUserGroupList,sharedUserGroupsPreservedList),t.sharedUserGroups=e.SharedUserGroupList}),t.$apply(function(){angular.copy(e.AccessModeOptionList,sharedAccessModePreservedList),t.accessModes=e.AccessModeOptionList}),t.$apply(function(){t.isMarkItemsPublic=e.isItemPublic}),isMarkItemsPublicForShareDialog=e.isItemPublic,currentItemDetail.ItemType==ItemType.ItemView?$("#user-group-search-input_suggestion").removeClass("item-user-input_suggestion"):$("#user-group-search-input_suggestion").addClass("item-user-input_suggestion"),$(".change-access-mode-selection").selectpicker("refresh"),$(".change-access-mode-selection .selectpicker").removeAttr("title"),accessModeSelectionInput.html(""),accessModeSelectionInput.append(e.AccessModeList),accessModeSelectionInput.selectpicker("refresh"),refreshUserGroupScroll(),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide"),displaySharedUserGroupInfo(),isEntireDOMRendered=!0,$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover())},error:function(){warningToast(window.Server.App.Localization.InternalServerError),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}})}function getGroupUserPermission(e){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),$.ajax({type:"get",url:getGroupOwnersUrl,data:{groupId:e},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var t;e.status?((t=angular.element(manageUserGroupBodySection).scope()).$apply(function(){angular.copy(e.SharedUserGroupList,sharedUserGroupsPreservedList),t.sharedUserGroups=e.SharedUserGroupList}),t.$apply(function(){angular.copy(e.AccessModeOptionList,sharedAccessModePreservedList),t.accessModes=e.AccessModeOptionList}),currentItemDetail.ItemType==ItemType.UserManagement?$("#user-group-search-input_suggestion").removeClass("item-user-input_suggestion"):$("#user-group-search-input_suggestion").addClass("item-user-input_suggestion"),$(".change-access-mode-selection").selectpicker("refresh"),$(".change-access-mode-selection .selectpicker").removeAttr("title"),$(".change-access-mode-selection span").removeClass("caret"),$(".change-access-mode-selection button").attr("disabled",!0),accessModeSelectionInput.html(""),accessModeSelectionInput.append(e.AccessModeList),accessModeSelectionInput.selectpicker("refresh"),refreshUserGroupScroll(),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide"),displaySharedUserGroupInfo(),isEntireDOMRendered=!0,$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover()):null!=e.permissionDenied&&e.permissionDenied&&(warningToast(window.Server.App.Localization.UserManagementWarningAlert),"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog("close"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):(sharePermissionDlgObj.ejDialog("close"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide")))},error:function(){warningToast(window.Server.App.Localization.InternalServerError),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide")}})}function displaySharedUserGroupInfo(){var i,e,a=angular.element(manageUserGroupBodySection).scope().sharedUserGroups;null!=a&&(0<a.length?(i="",$.each(a,function(e,t){var o="<div class='shared-user-group-name'><span class='shared-user-group-name-label'>";e<3&&(0<t.TargetUserId?o+=t.DisplayName+"</span>":o+=t.TargetGroupName+"</span>",e!=a.length-1?o+="<span class='shared-user-group-name-comma'>,</span> </div>":o+="</div>",i+=o)}),showSharedUserGroupNameSection.html(i),manageUserGroupContainer.is(":visible")||showSharedUserGroupContainer.show()):showSharedUserGroupContainer.hide(),3<a.length?(e=a.length-3,showSharedUserGroupCount.text(e),showSharedUserGroupCountSection.show()):showSharedUserGroupCountSection.hide(),generateProfileAvatar())}function saveItemPermission(){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),splitUserGroupList();var e=userEmailList,t=groupIdList,o=accessModeSelectionInput.val(),i=shareBtnObj.attr("data-item-id"),a=shareBtnObj.attr("data-itemtype");$.ajax({type:"POST",url:sharepermissionUrl,data:{permissionList:JSON.stringify({mode:o,itemType:a,UserList:e,GroupList:t}),itemId:i},success:function(e,t){"true"==e.toString().toLowerCase()?(getShareItemPermission(i),refreshAutoComplete(),refreshAutocompleteAccessModeSelection()):(sharePermissionDlgObj.ejDialog("close"),warningToast(window.Server.App.Localization.ShareItemPermissionMessage+" "+window.Server.App.Localization.ReloadPage))}})}function addGroupOwnerPermission(){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),splitUserGroupList();var e=userEmailList,t=groupIdList,o=accessModeSelectionInput.val(),i=addOwnerBtnObj.attr("data-item-id"),a=addOwnerBtnObj.attr("data-itemtype");$.ajax({type:"POST",url:addGroupOwnerPermissionUrl,data:{permissionList:JSON.stringify({mode:o,itemType:a,UserList:e,GroupList:t}),groupId:i},success:function(e,t){e.status?(getGroupUserPermission(i),refreshAutoComplete(),refreshAutocompleteAccessModeSelection()):null!=e.permissionDenied&&e.permissionDenied&&(warningToast(window.Server.App.Localization.UserManagementWarningAlert),"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog("close"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide")):(sharePermissionDlgObj.ejDialog("close"),sharePermissionDlgWrapperObj.ejWaitingPopup("hide")))},error:function(){warningToast(window.Server.App.Localization.InternalServerError)}})}function updateBulkItemPermission(){var o=shareBtnObj.attr("data-item-id"),i=addOwnerBtnObj.attr("data-item-id");$.ajax({type:"POST",url:updateBulkItemPermissionUrl,data:{permissionList:addNewItemPermission,userMarkedForDeletionList:userMarkedForDeletionList,groupMarkedForDeletionList:groupMarkedForDeletionList,itemId:o,groupId:i},success:function(e,t){"true"==e.toString().toLowerCase()?(null!=o?getShareItemPermission(o):getGroupUserPermission(i),changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareDoneBtnObj.show(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection()):warningToast(window.Server.App.Localization.InternalServerError)},error:function(){warningToast(window.Server.App.Localization.InternalServerError)}})}function refreshDialogBoxPosition(){"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog({height:"auto"}),isEntireDOMRendered&&(sharePermissionDlgObj.BoldBIDashboardDialog({width:529}),sharePermissionDlgObj.BoldBIDashboardDialog({width:530})),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("refresh"),sharePermissionDlgObj.BoldBIDashboardDialog("refresh")):(sharePermissionDlgObj.ejDialog({height:"auto"}),isEntireDOMRendered&&(sharePermissionDlgObj.ejDialog({width:529}),sharePermissionDlgObj.ejDialog({width:530})),sharePermissionDlgWrapperObj.ejWaitingPopup("refresh"),sharePermissionDlgObj.ejDialog("refresh")),isWidget&&("undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("hide"):sharePermissionDlgWrapperObj.ejWaitingPopup("hide"),sharePermisisonDlgHeader.text(window.Server.App.Localization.EmbedCode),sharePermisisonDlgHeader.css("line-height","32px"),sharePermissionDlgHeaderItemName.hide(),sharePermissionConatiner.hide(),embedCodeContainer.show(),embedConfiguration.hide(),manageAccessButton.hide())}function prepareRequestForAddItemPermission(){var n,e,s,r;0<modifiedItemIndex.length&&(e=(n=angular.element(manageUserGroupBodySection).scope()).accessModes,s=n.sharedUserGroups,r=shareBtnObj.attr("data-itemtype"),$.each(e,function(e,o){var t=o.Key,i=[],a=[];$.each(modifiedItemIndex,function(e,t){s[t].PermissionAccess!=sharedUserGroupsPreservedList[t].PermissionAccess&&s[t].PermissionAccess==o.Key&&(n.IsUserItem(t)?-1==jQuery.inArray(s[t].Email,i)&&i.push(s[t].Email):n.IsGroupItem(t)&&-1==jQuery.inArray(s[t].TargetGroupId,a)&&a.push(s[t].TargetGroupId))}),(0<i.length||0<a.length)&&addNewItemPermission.push(JSON.stringify({mode:t,itemType:r,UserList:i,GroupList:a}))}),$.each(modifiedItemIndex,function(e,t){s[t].PermissionAccess!=sharedUserGroupsPreservedList[t].PermissionAccess&&(n.IsUserItem(t)?-1==jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,userMarkedForDeletionList)&&userMarkedForDeletionList.push(sharedUserGroupsPreservedList[t].PermissionId):n.IsGroupItem(t)&&-1==jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,groupMarkedForDeletionList)&&groupMarkedForDeletionList.push(sharedUserGroupsPreservedList[t].PermissionId))}))}function resetPreRequestValues(){modifiedItemIndex=[],addNewItemPermission=[],userMarkedForDeletionList=[],groupMarkedForDeletionList=[]}function resetToActualScope(){var e=angular.element(manageUserGroupBodySection).scope();e.$apply(function(){angular.copy(sharedUserGroupsPreservedList,e.sharedUserGroups)}),e.$apply(function(){angular.copy(sharedAccessModePreservedList,e.accessModes)}),$(".change-access-mode-selection").selectpicker("refresh"),$(".change-access-mode-selection .selectpicker").removeAttr("title"),changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),$('[data-toggle="tooltip"]').tooltip(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareBtnObj.hide(),shareDoneBtnObj.show()}function enableAutocompleteAccessModeSelectionWithoutReset(){"undefined"!=typeof BoldBIDashboard?autoCompleteControlEle.BoldBIDashboardAutocomplete("enable"):autoCompleteControlEle.ejAutocomplete("enable"),autoCompleteControlWrapperEle.find(".e-in-wrap.e-box.e-corner").removeClass("disable-autocomplete"),accessModeSelectionInput.prop("disabled",!1),$(".selectpicker[data-id='access-mode-selection']").removeClass("disabled"),$(".selectpicker[data-id='access-mode-selection']").removeClass("disable-autocomplete-access-mode-selection"),accessModeSelectionInput.selectpicker("refresh")}function refreshAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("selectedIndex",0),accessModeSelectionInput.selectpicker("refresh")}function enableAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("disabled",!1),$(".selectpicker[data-id='access-mode-selection']").removeClass("disabled"),$(".selectpicker[data-id='access-mode-selection']").removeClass("disable-autocomplete-access-mode-selection"),refreshAutocompleteAccessModeSelection()}function disableAutocompleteAccessModeSelection(){accessModeSelectionInput.prop("disabled",!0),$(".selectpicker[data-id='access-mode-selection']").addClass("disabled"),$(".selectpicker[data-id='access-mode-selection']").addClass("disable-autocomplete-access-mode-selection"),refreshAutocompleteAccessModeSelection()}function onSuggestionListOpen(){manageUserGroupContainer.addClass("disable-element-opacity")}function onSuggestionListClose(){""==autoCompleteInstance.getValue()&&manageUserGroupContainer.removeClass("disable-element-opacity")}function refreshUserGroupScroll(){var e,t;manageUserGroupBodySection.is(":visible")&&($(".tooltip").tooltip("hide"),e={height:225,width:"100%",scrollerSize:7,buttonSize:0,enableTouchScroll:!(t=""),scrollOneStepBy:20,scroll:function(){$(".tooltip").tooltip("hide"),$('[data-toggle="popover"]').popover("hide")}},(t="undefined"!=typeof BoldBIDashboard?(manageUserGroupBodySection.BoldBIDashboardScroller(e),manageUserGroupBodySection.BoldBIDashboardScroller("instance")):(manageUserGroupBodySection.ejScroller(e),manageUserGroupBodySection.ejScroller("instance"))).model.height=225,t.refresh(),$(".manage-user-group-body-section .e-scrollbar").show())}function generateEmbedCode(e){var t,o="",o=currentItemDetail.ItemType==ItemType.ItemView?getDashboardShareLink(currentDashboardDetail.Id,currentDashboardDetail.CategoryName,currentDashboardDetail.Name)+"?viewid="+currentItemDetail.Id+"&isembed=true":e.ItemType==ItemType.Widget?(isWidget=!0,(t=angular.element("#share-permission-content-section").scope()).$apply(function(){t.isDashboardPublic=e.IsPublic,t.currentItemType=e.ItemType}),sharePermissionDlgObj.show(),"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog("open"),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show")):(sharePermissionDlgObj.ejDialog("open"),sharePermissionDlgWrapperObj.ejWaitingPopup("show")),getDashboardShareLink(e.Id,e.CategoryName,e.Name)+"?isembed=true&isWidgetMode=true&WidgetId="+e.widgetId):e.ItemType==ItemType.Datasource?($(".datasource-hide").hide(),getDatasourceShareLink(e.Id,e.Name)+"?isembed=true"):e.ItemType==ItemType.Dashboard?"edit"==selectedMode?($(".mode-change").attr("disabled",!0),getDashboardShareLink(e.Id,e.CategoryName,e.Name,editDashboardEmbedUrl)+"?isembed=true"):($(".mode-change").attr("disabled",!1),getDashboardShareLink(e.Id,e.CategoryName,e.Name)+"?isembed=true"):getDashboardShareLink(e.Id,e.CategoryName,e.Name)+"?isembed=true";return"edit"!=selectedMode&&(o=(o=(o=(o+=$("#embed-dashboard-comments").is(":checked")?"&dashboard_comments=true":"")+($("#embed-widget-comments").is(":checked")?"&widget_comments=true":""))+($("#embed-views").is(":checked")?"&views=true":""))+($("#embed-export").is(":checked")?"&export=true":"")),"<iframe src='"+(o+=$("#embed-sso").is(":checked")?"&hassso=true&externallogin="+$("#sso-providers").val().toLowerCase():"")+"' id='dashboard-frame' width='100%' height='600px' allowfullscreen frameborder='0'></iframe>"}shareItem.controller("shareItemController",["$scope",function(i){i.currentUserId=window.currentUserId,i.sharedUserGroups=window.sharedUserGroupList,i.accessModes=window.accessModeList,i.showPopover=!1,i.currentItemType=ItemType.Dashboard,i.isAdmin=!1,i.isDashboardPublic=!1,i.hasDashboardSettingsPermission=!1,i.isUnlisted=!1,i.isMarkItemsPublic=!1,i.formatAccessModeString=function(e){return e.toString()},i.ImageLink=function(e){return idpUrl+"/User/Avatar?id="+e+"&ImageSize=64"};i.GetGroupColor=function(e,t){return{"background-color":"#dfdfdf"}},i.typeOptions=[{Key:2,Value:"Read"}],i.parseInt=function(e){return parseInt(e,10)},i.updateValue=function(e,t){i.CheckForModification(e,t)},i.MarkForDeletion=function(e,t,o){i.AddItemInUserGroupDeletionList(o),i.RemoveFromModified(o);o=angular.element(e.currentTarget).parents(".shared-user-group-list-section").children();o.find(".action-for-delete-container").hide(),o.find(".marked-for-delete-container").show(),o.find(".change-indicator").show(),i.ShowChangeIndicatorBanner()},i.RemoveMarkForDeletion=function(e,t,o){i.RemoveItemInUserGroupDeletionList(o);e=angular.element(e.currentTarget).parents(".shared-user-group-list-section").children();e.find(".marked-for-delete-container").hide(),e.find(".action-for-delete-container").show(),e.find(".change-indicator").hide(),i.CheckForModification(t,o)},i.CheckForModification=function(e,t){currentItemDetail.ItemType!=ItemType.ItemView&&(sharedUserGroupsPreservedList[t].PermissionAccess!=e?(i.AddToModified(t),$("#select_"+t).parents(".shared-user-group-list-section").children().find(".change-indicator").show()):sharedUserGroupsPreservedList[t].PermissionAccess==e&&(i.RemoveFromModified(t),$("#select_"+t).parents(".shared-user-group-list-section").children().find(".change-indicator").hide())),i.ShowChangeIndicatorBanner()},i.ShowChangeIndicatorBanner=function(){($(".change-indicator").is(":visible")?(changeIndicatorBannerObj.css("visibility","visible"),manageAccessSaveBtnObj.show(),manageAccessCancelBtnObj.show(),shareDoneBtnObj.hide(),disableAutomCompleteControl(),disableAutocompleteAccessModeSelection):(changeIndicatorBannerObj.css("visibility","hidden"),resetPreRequestValues(),manageAccessSaveBtnObj.hide(),manageAccessCancelBtnObj.hide(),shareDoneBtnObj.show(),enableAutomCompleteControl(),enableAutocompleteAccessModeSelection))()},i.AddItemInUserGroupDeletionList=function(e){i.IsUserItem(e)?-1==jQuery.inArray(sharedUserGroupsPreservedList[e].PermissionId,userMarkedForDeletionList)&&userMarkedForDeletionList.push(sharedUserGroupsPreservedList[e].PermissionId):i.IsGroupItem(e)&&-1==jQuery.inArray(sharedUserGroupsPreservedList[e].PermissionId,groupMarkedForDeletionList)&&groupMarkedForDeletionList.push(sharedUserGroupsPreservedList[e].PermissionId)},i.RemoveItemInUserGroupDeletionList=function(t){i.IsUserItem(t)?-1!=jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,userMarkedForDeletionList)&&(userMarkedForDeletionList=jQuery.grep(userMarkedForDeletionList,function(e){return e!=sharedUserGroupsPreservedList[t].PermissionId})):i.IsGroupItem(t)&&-1!=jQuery.inArray(sharedUserGroupsPreservedList[t].PermissionId,groupMarkedForDeletionList)&&(groupMarkedForDeletionList=jQuery.grep(groupMarkedForDeletionList,function(e){return e!=sharedUserGroupsPreservedList[t].PermissionId}))},i.AddToModified=function(e){-1==jQuery.inArray(e,modifiedItemIndex)&&modifiedItemIndex.push(e)},i.RemoveFromModified=function(t){modifiedItemIndex=jQuery.grep(modifiedItemIndex,function(e){return e!=t})},i.IsUserItem=function(e){return null!=sharedUserGroupsPreservedList[e].Email&&sharedUserGroupsPreservedList[e].IsUserPermission&&0<sharedUserGroupsPreservedList[e].TargetUserId},i.IsGroupItem=function(e){return null==sharedUserGroupsPreservedList[e].Email&&!sharedUserGroupsPreservedList[e].IsUserPermission&&0<sharedUserGroupsPreservedList[e].TargetGroupId},i.getDashboardEmbedCode=getDashboardEmbedCode,i.GetManagePermisisionContent=function(e){var t=null!=window.granularPermissions&&window.granularPermissions.Dashboard,o=sharedUserGroupsPreservedList[e].PermissionEntityDescription;return i.IsUserItem(e)?isAdmin||t?(t=editUserPermissionUrl+"?userId="+sharedUserGroupsPreservedList[e].TargetUserId,window.Server.App.Localization.UserPermissionWithAdmin.format("<strong>"+o+"</strong>","</br></br>","<a target='_blank' href='"+t+"'>","</a>")):window.Server.App.Localization.UserPermissionNonAdmin.format("<strong>"+o+"</strong>","</br></br>"):isAdmin?(t=editGroupPermissionUrl+"?groupId="+sharedUserGroupsPreservedList[e].TargetGroupId,window.Server.App.Localization.GroupPermissionWithAdmin.format("<strong>"+o+"</strong>","</br></br>","<a target='_blank' href='"+t+"'>","</a>")):window.Server.App.Localization.GroupPermissionNonAdmin.format("<strong>"+o+"</strong>","</br></br>")}}]),$(function(){sharePermissionDlgObj=$("#share-permission-popup"),sharePermisisonDlgHeader=$("#share-permission-dialog-header"),sharePermissionDlgHeaderItemName=$(".item-name-container #item-name-header"),sharePermissionConatiner=$("#share-permission-container"),accessModeContainer=$("#access-mode-container"),dummyContainer=$("#dummy-container"),embedCodeContainer=$("#get-embed-code-container"),sharePermissionDashboardSettingSectionObj=$(".share-permission-dashboard-setting-section"),sharePermissionPublicSectionObj=$(".share-permission-public-section"),sharePermissionPrivateSectionObj=$(".share-permission-private-section"),sharePermissionUserGroupSectionObj=$("#assign-user-group-container"),manageUserGroupContainer=$("#manage-user-group-container"),manageUserGroupBodySection=$(".manage-user-group-body-section"),getEmbedLinkSection=$(".get-item-embed-link-section"),embedConfiguration=$(".embed-configuration"),changeIndicatorBannerObj=$(".changes-indicator-banner"),shareWithLabelObj=$(".share-with-label"),getLinkInputObj=$("#item-url"),getLinkCopyLinkobj=$("#item-url-copy"),getEmbedCodeInputObj=$("#embed-code"),getEmbedCodeCopyBtnobj=$("#copy-embed-code"),accessModeChangeLink=$("#access-mode-change-link"),manageAccessButton=$("#manage-access-button"),manageAccessBackButton=$("#manage-access-back-button"),manageAccessSaveBtnObj=$("#manage-access-save-button"),manageAccessCancelBtnObj=$("#manage-access-cancel-button"),shareDoneBtnObj=$("#share-done-popup-button"),shareBtnObj=$("#share-permission-button"),accessModeChngBtnObj=$("#access-mode-change-button"),accessModeCancelBtnObj=$("#access-mode-cancel-button"),embedCodeDoneBtnObj=$("#copy-embed-code-done-button"),embedCodeBackButton=$("#copy-embed-code-back-button"),addOwnerBtnObj=$("#add-owner-permission-button"),publicRadioBtnObj=$("#public-access-mode"),privateRadioBtnObj=$("#private-access-mode"),accessModeSelectionInput=$("#access-mode-selection"),markForDeleteBtnObj=$(".mark-for-deletion-icon"),removeMarkForDeleteBtnObj=$(".remove-mark-for-deletion-icon"),showSharedUserGroupContainer=$("#show-shared-user-group-container"),showSharedUserGroupNameSection=$(".shared-user-group-name-section"),showSharedUserGroupName=$(".shared-user-group-name"),showSharedUserGroupCountSection=$(".shared-user-group-count-section"),showSharedUserGroupCount=$(".shared-user-group-count"),toggleMarkForDeletionObj=$(".action-for-delete-container, .marked-for-delete-container");createLoader("permission-popup_wrapper");sharePermissionDlgWrapperObj=$("#share-permission-popup_wrapper");var e=createLoader("share-permission-popup_wrapper"),t={width:"529px",showOnInit:!1,allowDraggable:!1,enableResize:!1,showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"onSharePermissionPopupClose",open:"onSharePermissionPopupOpen"};"undefined"!=typeof BoldBIDashboard?(sharePermissionDlgObj.BoldBIDashboardDialog(t),sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup({template:$("#"+e)}),$("#share-close-popup, #share-done-popup-button").on("click",function(){sharePermissionDlgObj.BoldBIDashboardDialog("close"),isWidget&&(sharePermissionConatiner.show(),embedCodeContainer.hide(),embedConfiguration.show(),manageAccessButton.hide(),isWidget=!1)})):(sharePermissionDlgObj.ejDialog(t),sharePermissionDlgWrapperObj.ejWaitingPopup({template:$("#"+e)}),$("#share-close-popup, #share-done-popup-button").on("click",function(){sharePermissionDlgObj.ejDialog("close"),isWidget&&(sharePermissionConatiner.show(),embedCodeContainer.hide(),embedConfiguration.show(),manageAccessButton.hide(),isWidget=!1)})),accessModeCancelBtnObj.on("click",function(){showSharePermissionContainer()}),manageAccessButton.on("click",function(){showManageAccessContainer()}),manageAccessBackButton.on("click",function(){showSharePermissionContainerWithRefresh()}),manageAccessSaveBtnObj.on("click",function(){$('[data-toggle="popover"]').popover("hide"),"undefined"!=typeof BoldBIDashboard?sharePermissionDlgWrapperObj.BoldBIDashboardWaitingPopup("show"):sharePermissionDlgWrapperObj.ejWaitingPopup("show"),prepareRequestForAddItemPermission(),updateBulkItemPermission()}),manageAccessCancelBtnObj.on("click",function(){manageAccessCancelBtn(),generateProfileAvatar()}),getLinkCopyLinkobj.on("click",function(e){getLinkInputObj.select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?getLinkCopyLinkobj.attr("data-original-title",""):(document.execCommand("copy"),getLinkCopyLinkobj.attr("data-original-title",window.Server.App.Localization.Copysuccess),getLinkCopyLinkobj.tooltip("hide").attr("data-original-title",window.Server.App.Localization.Copysuccess).tooltip("fixTitle").tooltip("show"),setTimeout(function(){getLinkCopyLinkobj.attr("data-original-title",window.Server.App.Localization.LinkCopy),getLinkCopyLinkobj.tooltip()},3e3))}),getLinkCopyLinkobj.removeClass("focusdiv"),getLinkInputObj.on("focusin",function(){getLinkCopyLinkobj.addClass("focusdiv")}),getLinkInputObj.on("focusout",function(){getLinkCopyLinkobj.removeClass("focusdiv")}),$("input[type=radio][name=access-mode]").on("change",function(){isItemPublic&&privateRadioBtnObj.prop("checked")||!isItemPublic&&publicRadioBtnObj.prop("checked")?(accessModeChngBtnObj.removeAttr("disabled"),$("#make-unlisted").prop("checked",!1)):(accessModeChngBtnObj.attr("disabled",!0),$("#make-unlisted").prop("checked",isItemUnlisted))}),$(document).on("click","#make-unlisted",function(){isItemUnlisted&&!$("#make-unlisted").prop("checked")?accessModeChngBtnObj.prop("disabled")&&accessModeChngBtnObj.removeAttr("disabled"):!isItemUnlisted&&$("#make-unlisted").prop("checked")&&accessModeChngBtnObj.prop("disabled")&&accessModeChngBtnObj.removeAttr("disabled")}),$(document).on("click","#access-mode-change-button",function(e){var t=$(this).attr("data-item-id"),o=$(this).attr("data-name"),i=$(this).attr("data-itemtype"),a=($(this).attr("data-category-name"),"");isItemPublic&&privateRadioBtnObj.prop("checked")?a=removeItemPublicUrl:!isItemPublic&&publicRadioBtnObj.prop("checked")&&(a=makeItemPublicUrl),$("#progress-alert-container").css("z-index",$("#share-permission-popup_wrapper").css("z-index")+1),""!=a&&$.ajax({type:"POST",url:a,data:{itemId:t,itemTypeId:i,itemName:o},async:!1,success:function(e){e.validation&&e.result?void 0!==currentItemDetail&&void 0!==currentItemDetail.IsPublic&&(currentItemDetail.IsPublic=!currentItemDetail.IsPublic):warningToast(window.Server.App.Localization.InternalServerError)}}),isItemUnlisted=$("#make-unlisted").prop("checked"),$.ajax({type:"POST",url:makeItemUnlistedUrl,data:{itemId:t,isUnlisted:isItemUnlisted},async:!1,success:function(e){e.validation&&e.result?void 0!==currentItemDetail&&void 0!==currentItemDetail.IsUnlisted&&(currentItemDetail.IsUnlisted=isItemUnlisted):warningToast(window.Server.App.Localization.InternalServerError)},error:function(){warningToast(window.Server.App.Localization.InternalServerError)}}),"function"==typeof ResetItemList&&ResetItemList(ItemType.Dashboard),showSharePermissionContainer(),isItemPublic&&privateRadioBtnObj.prop("checked")?(showPrivateContent(),isItemPublic=!1):!isItemPublic&&publicRadioBtnObj.prop("checked")&&(showPublicContent(),isItemPublic=!0)}),$(document).on("shown.bs.dropdown",".user-group-scroll-content .change-access-mode-select",function(){var e,t;$(".tooltip").hide(),0<$(this).find(".change-access-mode-selection").length&&(t=manageUserGroupBodySection,e=$(this).offset().top+$(this).outerHeight(!0)/2-t.offset().top,t.height()-($(this).offset().top-t.offset().top+$(this).outerHeight(!0)/2)<=(t=$(this).find(".change-access-mode-selection .dropdown-menu").outerHeight(!0))&&t<=e?$(this).find(".change-access-mode-selection").removeClass("dropdown").addClass("dropup"):refreshUserGroupScroll())}),$.views.helpers({getUserGroupLogo:function(e){return"user"==e?"<img src='' alt='Profile Picture' id='' onerror='' >":"<div class='group-logo' style=''> <i class='su su-group-1'></i></div >"}}),$("body").on("click",function(e){"popover"!==$(e.target).data("toggle")&&0===$(e.target).parents('[data-toggle="popover"]').length&&0===$(e.target).parents(".popover.in").length?$('[data-toggle="popover"]').popover("hide"):"popover"==$(e.target).data("toggle")&&$(".access-info-icon").not(e.target).popover("hide")}),getEmbedCodeInputObj.on("click",function(e){getEmbedCodeInputObj.select()}),getEmbedCodeCopyBtnobj.on("click",function(e){getEmbedCodeInputObj.select(),document.execCommand("copy");var t=$(".embed-copy-success");t.show(),setTimeout(function(){t.fadeOut(3e3)},3e3)}),embedCodeDoneBtnObj.on("click",function(){"undefined"!=typeof BoldBIDashboard?sharePermissionDlgObj.BoldBIDashboardDialog("close"):sharePermissionDlgObj.ejDialog("close")}),embedCodeBackButton.on("click",function(){showSharePermissionContainer()}),$(".embed-configuration [type='checkbox']").on("change",function(e){$("#embed-code").val(generateEmbedCode(currentItemDetail)),$("#embed-sso").is(":checked")?$(".auth-provider-row").removeClass("hide"):$(".auth-provider-row").addClass("hide"),refreshDialogBoxPosition()}),$(document).on("change",".sso-providers",function(e){$("#embed-code").val(generateEmbedCode(currentItemDetail))}),$(document).on("change",".mode-selection",function(e){selectedMode=$("#mode-selection").val().toLowerCase(),$("#embed-code").val(generateEmbedCode(currentItemDetail))})}),$(document).on("click","#show-shared-user-group-link",function(e){showManageAccessContainer()});var isMoveItemDialogBinded=!1,isCopyItemDialogBinded=!1,isDownloadItemDialogBinded=!1;function MoveDashboardItem(e,t){var o,i,a='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.MoveDashboard+'</span><span class="item-name">'+e.Name+"</span></span>";isMoveItemDialogBinded?((i=document.getElementById("move_item_dialog").ej2_instances)[0].header=a,i[0].show()):((o=document.createElement("div")).setAttribute("id","move_item_dialog"),document.getElementById("dashboard-page-container").appendChild(o),(i=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"436px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:a,showCloseIcon:!0,content:document.getElementById("ItemAction"),buttons:[{click:function(e){MoveItem()},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.Move}},{click:function(){i.hide(),$("#move_item_name").closest("div").removeClass("has-error"),$("#move_item_name").parent().find(".validation-error").html("")},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}]})).appendTo(o),isMoveItemDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("move_item_dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("move_item_dialog")),$("#move_item_name").val(e.Name),document.getElementById("ItemAction").style.display="block",getItemDetails(e,t)}function getItemDetails(a,e){var n=document.getElementById("move_item_dialog").ej2_instances;$.ajax({type:"POST",url:moveIframeUrl,data:{itemId:a.Id,itemAction:e},success:function(e){if(e.status){if(n[0].buttons=[{click:function(e){MoveItem()},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.Move}},{click:function(){n[0].hide(),$("#move_item_name").closest("div").removeClass("has-error"),$("#move_item_name").parent().find(".validation-error").html("")},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}],$("#move_report_form").show(),$("#move-item-denied").hide(),$("#MoveItemIdHidden").val(a.Id),$("#move_item_name").val(e.fullName),null!=e.categoryDetails){for(var t=e.categoryDetails,o="",i=0;i<t.length;i++)t[i].Id!=a.Id&&(o+="<option value="+t[i].Id+">"+t[i].Name+"</option>");$(".move-category").find("#CategoryList").html(o),$(".move-category").find("#CategoryList").selectpicker("refresh"),$("#add-new-category [data-toggle='tooltip']").tooltip()}}else $("#move_report_form").hide(),null!=e.accessDenied?$("#move-item-denied").text(e.accessDenied).show():null!=e.exception&&$("#move-item-denied").text(e.exception).show(),n[0].buttons=[{click:function(){n[0].hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.OKButton}}];ejs.popups.hideSpinner(document.getElementById("move_item_dialog"))}})}function CopyDashboardItem(e,t,o){$(this).attr("data-itemId");var i,a,n='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.CopyDashboard+'</span><span class="item-name">'+e.Name+"</span></span>";isCopyItemDialogBinded?((a=document.getElementById("copy_item_dialog").ej2_instances)[0].header=n,a[0].show()):((i=document.createElement("div")).setAttribute("id","copy_item_dialog"),document.getElementById("dashboard-page-container").appendChild(i),(a=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"436px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:n,showCloseIcon:!0,content:document.getElementById("Copy_Item"),buttons:[{click:function(e){CopyItem()},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.Copy}},{click:function(){a[0].hide(),$("#copy-datasource").removeAttr("disabled"),$("#copy_item_name").closest("div").removeClass("has-error"),$("#copy_item_name").parent().find(".validation-error").html("")},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}]})).appendTo(i),isCopyItemDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("copy_item_dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("copy_item_dialog")),$("#copy_item_name").val(e.Name),$("#copy-datasource").prop("checked",!1),document.getElementById("Copy_Item").style.display="block",$("#isUsageAnalytics").val(o),$("#CopyItemIdHidden").val(e.Id),$("#CopyItemType").val(e.ItemType),e.ItemType==ItemType.Dashboard&&$("#copyaction-category-division").show(),e.ItemType!=ItemType.Dashboard||o||$("#copy-datasource-checkbox").show(),getCopyItemDetails(e,t,o)}function getCopyItemDetails(e,t,o){var a=document.getElementById("copy_item_dialog").ej2_instances;$.ajax({type:"POST",url:copyIframeUrl,data:{itemId:e.Id,itemAction:t,isUsageAnalytics:o},success:function(e){if(e.status){if($("#item_action_form").show(),$("#copy-item-denied").hide(),a[0].buttons=[{click:function(e){CopyItem()},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.Copy}},{click:function(){a[0].hide(),$("#copy_item_name").closest("div").removeClass("has-error"),$("#copy_item_name").parent().find(".validation-error").html("")},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}],0!=e.dataSourceCount&&e.hasCreateDataSourcePermission?$("#copy-datasource").attr("disabled",!1):$("#copy-datasource").attr("disabled",!0),e.hasCreateDataSourcePermission||($("#copy-datasource-label").attr("data-toggle","tooltip"),$("#copy-datasource-label").attr("data-original-title",window.Server.App.Localization.DatasourceCloneCopyDenied),$('[data-toggle="tooltip"]').tooltip()),null!=e.categories){for(var t=e.categories,o="",i=0;i<t.length;i++)o+="<option value="+t[i].Id+">"+t[i].Name+"</option>";$(".copy-category").find("#CategoryList").html(o),$(".copy-category").find("#CategoryList").selectpicker("refresh"),$("#add-new-category [data-toggle='tooltip']").tooltip()}}else $("#item_action_form").hide(),null!=e.accessDenied?$("#copy-item-denied").text(e.accessDenied).show():null!=e.exception&&$("#copy-item-denied").text(e.exception).show(),a[0].buttons=[{click:function(){a[0].hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.OKButton}}];ejs.popups.hideSpinner(document.getElementById("copy_item_dialog"))}})}function onUploadDialogOpen(){ejs.popups.createSpinner({target:document.getElementById("server-app-container")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("server-app-container")),$("#upload-popup-iframe").attr("src",uploadIframeUrl)}function DownloadDashboardItem(e){document.getElementById("Download_Item").style.display="block";var t,o,i='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.DownloadDashboard+'</span><span class="item-name">'+e.Name+"</span></span>";isDownloadItemDialogBinded?((o=document.getElementById("download_item_dialog").ej2_instances)[0].header=i,o[0].show()):((t=document.createElement("div")).setAttribute("id","download_item_dialog"),document.getElementById("dashboard-page-container").appendChild(t),(o=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"510px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:i,showCloseIcon:!0,content:document.getElementById("Download_Item"),buttons:[{click:function(e){DownloadItem()},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.Download}},{click:function(){o.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}]})).appendTo(t),isDownloadItemDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("download_item_dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("download_item_dialog")),getDownloadItemDetails(e)}function getDownloadItemDetails(e,t,o){$.ajax({type:"POST",url:downloadIframeUrl,data:{itemId:e.Id,itemAction:t,isUsageAnalytics:o},success:function(e){$("#Download_Item").html(e),ejs.popups.hideSpinner(document.getElementById("download_item_dialog"))}})}function EditDashboard(e){$("#edit-file-popup").ejDialog("open"),ShowWaitingProgress("#edit-file-popup_wrapper","show"),$("#edit-file-popup-iframe").attr("src",getdashboarddetailsUrl+"?itemId="+e)}function editFilePopup(e,t,o){$("#edit-file-popup").ejDialog("open");var i=$("#EditCategoryPopup_iframe").contents();i.find("#file_name").val(t),i.find("#file_description").val(o)}function OnEditFileDialogClose(){$("#edit-file-popup").find("iframe").contents().find("html").html(""),$("#edit-file-popup").ejDialog("close")}function UpdateDashboardDataSource(e){$("#update-data-source-popup").ejDialog("open"),ShowWaitingProgress("#update-data-source-popup_wrapper","show"),$("#update-data-source-popup-iframe").attr("src",getDataSourceDetailsUrl+"?itemId="+e),$("#update-data-source-popup-iframe").attr("data-item-id",e),parent.window.IsUpdateDashboard=!0}function VersionHistory(e,t,o){var i=$("#grid").data("ejGrid"),a=$("#loggrid").data("ejGrid"),t=(null!=$("#version-window-container").data("ejDialog")?$("#version-window-container").ejDialog("open"):$("#version-window-container").ejDialog({showOnInit:!0,allowDraggable:!0,enableResize:!1,width:"864px",title:"",showHeader:!1,enableModal:!0,close:"DialogBoxClose",closeOnEscape:!0}),$(".modal-header .modal-title").html(t),$("#version-tab").parent("li").addClass("active"),$("#item-log-tab").parent("li").removeClass("active"),$("#item-version-container").removeClass("hidden").addClass("show"),$("#item-log-container").removeClass("show").addClass("hidden"),ej.DataManager({url:itemVersionUrl+"?ItemId="+e,adaptor:new ej.UrlAdaptor})),i=(i.dataSource(t),ej.DataManager({url:itemLogsUrl+"?ItemId="+e,adaptor:new ej.UrlAdaptor})),t=(a.dataSource(i),a.model.pageSettings.currentPage=1,$("#grid").data("ejGrid"));void 0!==o&&o?t.hideColumns("option"):t.showColumns("option"),t.model.pageSettings.currentPage=1}$(document).on("ready",function(){$("#edit-file-popup").ejDialog({width:"760px",showOnInit:!1,allowDraggable:!1,enableResize:!1,title:window.Server.App.Localization.UpdateDashboard,enableModal:!0,showHeader:!1});var e=createLoader("edit-file-popup_wrapper");$("#edit-file-popup_wrapper").ejWaitingPopup({template:$("#"+e)})}),$(document).on("ready",function(){$("#update-data-source-popup").ejDialog({width:"760px",showOnInit:!1,allowDraggable:!0,enableResize:!1,title:window.Server.App.Localization.UpdateDataSource,enableModal:!0,showHeader:!1});var e=createLoader("update-data-source-popup_wrapper");$("#update-data-source-popup_wrapper").ejWaitingPopup({template:$("#"+e)})}),$(document).ready(function(){1400<$(window).width()&&$("#version-container").addClass("versions"),$(window).width()<1400&&$("#version-container").removeClass("versions"),$(document).on("click","#version-tab",function(e){$(this).parent("li").addClass("active"),$("#item-log-tab").parent("li").removeClass("active"),$("#item-version-container").removeClass("hidden").addClass("show"),$("#item-log-container").removeClass("show").addClass("hidden")}),$(document).on("click","#item-log-tab",function(e){$(".down-arrow").css("left","185px"),$(this).parent("li").addClass("active"),$("#version-tab").parent("li").removeClass("active"),$("#item-version-container").removeClass("show").addClass("hidden"),$("#item-log-container").removeClass("hidden").addClass("show")}),$(document).on("click",".version-popup-close",function(e){$("#item-version-controller").css("display","none"),(eDialog=$("#version-window-container").data("ejDialog")).close()}),$(document).on("click",".item-roll-back",function(e){var t=$(this).attr("data-item-version"),o=$(this).attr("data-itemid");doAjaxPost("POST",rollBackUrl,{ItemId:o,versionId:t},function(e,t){var o;t.status?((o=$("#grid").data("ejGrid")).model.pageSettings.currentPage=1,o.refreshContent(),(o=$("#loggrid").data("ejGrid")).model.pageSettings.currentPage=1,o.refreshContent()):messageBox("su-versions",window.Server.App.LocalizationContent.VersionHistory,t.statusMessage,"success",function(){onCloseMessageBox()}),$("#loggrid").ejWaitingPopup("hide")},null,null,null,null,null,!0)})}),$(document).on("click","#version-window-container .popup-close, #version-window-container #close-button",function(){$("#grid").ejGrid("option",{dataSource:[]}),$("#loggrid").ejGrid("option",{dataSource:[]}),window.$("#version-window-container").ejDialog("close")}),$(document).keyup(function(e){27==e.keyCode&&null!=$("#version-window-container").data("ejDialog")&&window.$("#version-window-container").ejDialog("close")}),$(document).ready(function(){$(".dropdown-toggle").tooltip({selector:"[data-toggle=tooltip]"})});var isAjaxRequested=!0;function getDashboardViews(t,e){var o=$(e).find("ul"),a="";1==isAjaxRequested&&($(".dashboard-views").addClass("views-loader"),isAjaxRequested=!1,$.ajax({type:"POST",url:getViewsByItemIdUrl,data:{itemId:t.Id},success:function(e){if(null!=e&&null!=e.result&&0<e.result.length)if(t.IsChildDashboard)for(i=0;i<e.result.length;i++)a+="<li><a class='view-name' href='"+dashboardsUrl+"/"+t.CategoryId+"/"+t.ParentCategoryName+"/"+t.CategoryName+"?tab="+t.Name+"&viewid="+e.result[i].ViewId+"' target='_blank' data-toggle='tooltip' data-placement='top' data-original-title='"+e.result[i].ViewName+"' data-itemid='"+e.result[i].ItemId+"'>"+e.result[i].ViewName+"</a></li>";else for(i=0;i<e.result.length;i++)a+="<li><a class='view-name' href='"+dashboardsUrl+"/"+t.Id+"/"+e.result[i].CategoryName+"/"+e.result[i].ItemName+"?viewid="+e.result[i].ViewId+"' target='_blank' data-toggle='tooltip' data-placement='top' data-original-title='"+e.result[i].ViewName+"' data-itemid='"+e.result[i].ItemId+"'>"+e.result[i].ViewName+"</a></li>";else a="<li><span class='view-name' href='javascript:void(0);'><span>"+window.Server.App.Localization.NoViews+"</span></span></li>";o.html(a),$(".dashboard-views").removeClass("views-loader"),$(".dashboard-views").addClass("no-loader"),$('[data-toggle="tooltip"]').tooltip()}}).always(function(){isAjaxRequested=!0}))}var ScheduleId,ItemId,ItemName,CategoryName,MultiDashboardName,isAddCategoryDialogBinded=!1,isAddSampleDialogBinded=!1;function dialogClose(){0==dashboardItemCount&&location.reload(),dialog.hide()}function openSampleDashboardDialog(e){var t,o,i='<span class="dialog-header-with-icon"><span class ="dialog-header-title">'+window.Server.App.Localization.SampleDashboards+"</span></span>";isAddSampleDialogBinded?((o=document.getElementById("sample_item_dialog").ej2_instances)[0].header=i,o[0].show()):((t=document.createElement("div")).setAttribute("id","sample_item_dialog"),e.appendChild(t),(o=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"900px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:i,showCloseIcon:!0,close:dialogClose,content:document.getElementById("sample-item-container"),buttons:[{click:function(){0==dashboardItemCount&&location.reload(),o.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CloseButton}}]})).appendTo(t),isAddSampleDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("sample_item_dialog")}),ejs.popups.setSpinner({type:"Material"}),beforeOpenSampleDialog()}function beforeOpenSampleDialog(){$("#sample-item-container").show(),ejs.popups.showSpinner(document.getElementById("sample_item_dialog")),$.ajax({type:"POST",url:addSampleItemsUrl,data:{},success:function(e){var t=angular.element("[ng-controller=SampleListCtrl]").scope();t.samples=e.categories,t.orderList="Name","$apply"!=t.$root.$$phase&&"$digest"!=t.$root.$$phase&&t.$apply(),ejs.popups.hideSpinner(document.getElementById("sample_item_dialog"))}})}function openNewDashboardPopup(){$("#report_popup").ejDialog("open"),$("#report_popup_wrapper").ejWaitingPopup("show")}function onDashboardDialogOpen(){$("#report_iframe").attr("src",addDashboardIframeUrl)}function onDashboardDialogClose(){$("#report_popup").find("iframe").contents().find("html").html(""),window.IsAddDashboard=!1,window.CategoryName=""}function beforeCloseAddItemPopup(){$("#add_category_name").val(""),$("#add-category_description").val(""),$("#AddCategoryPopup #validate-name").parent("span").parent("td").removeClass("has-error"),$("#AddCategoryPopup #validate-name").parent("span").removeClass("has-error"),$("#AddCategoryPopup #validate-name").text(""),$("#AddCategoryPopup #plugin_validation").html("")}function ScheduleDashboard(e){ItemId=e.Id,ItemName=e.Name,CategoryName=e.CategoryName,CategoryId=e.CategoryId,ScheduleId="",MultiDashboardName=e.IsMultiDashboard?e.CategoryName:"",$("#popup-container").ejDialog("open")}function onSchedulerDialogClose(){$("#popup-container").find("iframe").contents().find("html").html("")}function onSchedulerDialogOpen(){$("#scheduler-popup-iframe").attr("src",schedulerIframeUrl+"?itemName="+ItemName+"&&itemId="+ItemId+"&&categoryName="+CategoryName+"&&categoryId="+CategoryId+"&&scheduleId="+ScheduleId+"&&multiDashboardName="+MultiDashboardName+"&&actionType=Create"),$("#popup-container_wrapper").ejWaitingPopup("show")}$(function(){$("#report_popup").ejDialog({width:"760px",showOnInit:!1,allowDraggable:!1,enableResize:!1,title:window.Server.App.Localization.AddDashboard,enableModal:!0,showHeader:!1,open:"onDashboardDialogOpen"});var e=createLoader("report_popup_wrapper");$("#report_popup_wrapper").ejWaitingPopup({template:$("#"+e)})}),$(document).on("click","#create_Category",function(){document.getElementById("AddCategoryPopup").style.display="block";var e,t,o='<span class="dialog-header-with-icon"><span class ="dialog-header-title"><i class="su su-folder dialog-header-icon"></i>&nbsp;&nbsp;'+window.Server.App.Localization.CreateCategory+"</span></span>";isAddCategoryDialogBinded?((t=document.getElementById("add-category-dialog").ej2_instances)[0].header=o,t[0].show()):((e=document.createElement("div")).setAttribute("id","add-category-dialog"),document.getElementById("server-app-container").appendChild(e),(t=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"600px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:o,showCloseIcon:!0,content:document.getElementById("AddCategoryPopup"),beforeClose:beforeCloseAddItemPopup,buttons:[{click:function(e){addItemValidate()},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.AddButton}},{click:function(){closeAddItemPopup()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}]})).appendTo(e),isAddCategoryDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("add-category-dialog")}),ejs.popups.setSpinner({type:"Material"})}),$(document).on("click",".add-sample-button",function(){openSampleDashboardDialog(0!=dashboardItemCount?document.getElementById("dashboard-page-container"):document.getElementById("defafult-pages-container"))}),$(document).on("click",".explore",function(){openSampleDashboardDialog(document.getElementById("server-app-container"))}),$(document).on("click",".dashboard-notification .su-close",function(){$(".dashboard-notification").remove()}),$(document).ready(function(){$("#popup-container").ejDialog({allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1,showOnInit:!1,close:"onSchedulerDialogClose",open:"onSchedulerDialogOpen",width:"1000px"});var e=createLoader("popup-container_wrapper");$("#popup-container_wrapper").ejWaitingPopup({template:$("#"+e)})}),$(document).on("click","#create_schedule, .create-schedule",function(){CategoryId=ScheduleId=CategoryName=ItemName=ItemId="",MultiDashboardName=$(this).attr("data-multidashboard-name"),$("#popup-container").ejDialog("open")}),serverApp.controller("ItemInfoCtrl",["$scope","$timeout",function(a,n){a.ItemDetail=null,a.closeItemInfo=function(){"undefined"!=typeof BoldBIDashboard?$("#item-info-popup").BoldBIDashboardDialog("close"):$("#item-info-popup").ejDialog("close")},a.getWidgetEmbedCode="undefined"!=typeof getWidgetEmbedCode&&getWidgetEmbedCode,a.openInfoDialog=function(e,t,o){var i=$("<div/>").html(e.Description).text();a.ItemDetail=e,a.showDashboardLinkButton=t,a.isUsageAnalytics=o,"undefined"!=typeof BoldBIDashboard?($("#item-info-popup").BoldBIDashboardDialog({width:480<window.innerWidth?"480px":window.innerWidth-10+"px",height:"auto",showOnInit:!1,allowDraggable:!1,enableResize:!1,showHeader:!1,enableModal:!0}),$("#item-info-popup").BoldBIDashboardDialog("open"),$("#item-info-popup").BoldBIDashboardDialog("refresh")):($("#item-info-popup").ejDialog({width:480<window.innerWidth?"480px":window.innerWidth-10+"px",height:"auto",showOnInit:!1,allowDraggable:!1,enableResize:!1,showHeader:!1,enableModal:!0}),$("#item-info-popup").ejDialog("open"),$("#item-info-popup").ejDialog("refresh")),n(function(){a.$apply()},100),$(".item-info-description").text(i)},a.viewDashboardUrl=function(e,t,o,i){return!0===i?encodeURI(editDashboardUrl+"/"+e+"/draft/"+o):encodeURI(viewDashboardUrlAction+"/"+e+"/"+t+"/"+o+"?showmydashboards=1")},a.GetInfoButtonText=function(e){return!0===e?window.Server.App.Localization.EditDashboard:window.Server.App.Localization.OpenDashboard},a.openUploadDashboardDialog=function(e){a.closeItemInfo(),onUploadStatusDialogOpen(e)}}]),"undefined"!=typeof angularManualBootstrap&&angularManualBootstrap&&angular.element(document).ready(function(){angular.bootstrap(document,["serverApp"])});var reportItemName="",reportItemId="",reportCategoryName="",multiDashboardName="",childId="",createdItemId="",url="",alertChange=1,dateFormat="",timeFormat="",listDashboards="",childDashboards="",item="",condition="",itemConditionArray="",recurrence="",endType="",endDate="",endAfter="",startDate="",itemRecurrence="",frequency="",exportType="",scheduleExportInfo="",subscriberExternalRecipient="",subscriberGroup="",subscriberUser="",itemConditionCategory="",itemWidgetName="",emailContent="",subject="",buttonValue="",filterContent="",designerServiceUrl="",dashboardServerUrl="",dataServiceUrl="",dataServiceUrlforDataAlert="",isCustomExpressionOpened=!1,scheduleRecurrenceInfo="",alertChangeValue=1,isScheduledDashboardDeleted="",scheduleExportInfo="",isNextEventTriggered=!1;function createSchedule(e,t,o,i){""!=t?$(".schedule-popup-title").html(" "+t+" - "+window.Server.App.Localization.Schedule):$(".schedule-popup-title").html(" "+t+" "+window.Server.App.Localization.Schedule),$(".schedule-popup-title").attr("title",t),parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),reportItemName=t,reportCategoryName=o,multiDashboardName=i,childId=reportItemId=e,$("#selected_dashboard").change()}function scheduleNameCheck(e,t){$("#schedule-name-error-container").css("display","none"),$("span.loader-gif").remove(),$("#schedule-name-error-container").parent().append($("<span class='col-sm-4 no-padding loader-gif'><div class='loader-blue loader-icon' id='schedule-name-validation-loader-icon'><svg class='circular'><circle class='path' cx='27' cy='27' r='13' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div></span>")),$.ajax({type:"POST",url:checkScheduleNameExistUrl,data:{scheduleId:e,scheduleName:t},success:function(e){e.Result?($("span.loader-gif").remove(),$("#schedule-name").closest("div").addClass("has-error"),$("#schedule-name-error-container").css("display","block"),$("#schedule-name-validator").html(window.Server.App.Localization.IsScheduleExist)):($("#schedule-name").closest("div").removeClass("has-error"),$("span.loader-gif").remove(),$("#schedule-name-error-container").css("display","none"))}})}function addTitleForCategory(){$("#selected_category").selectpicker("refresh");for(var e=0;e<$(".category-dropdown  .btn-group .dropdown-menu .selectpicker li").length;e++){var t=$(".category-dropdown .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$(".category-dropdown .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}}function addTitleForDashboard(){$("#selected_dashboard").selectpicker("refresh");for(var e=0;e<$(".dashboard-dropdown  .btn-group .dropdown-menu .selectpicker li").length;e++){var t=$(".dashboard-dropdown .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$(".dashboard-dropdown .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}}function addTitleForChildDashboards(){$("#selected_childdashboard").selectpicker("refresh");for(var e=0;e<$(".childdashboard-dropdown  .btn-group .dropdown-menu .selectpicker li").length;e++){var t=$(".childdashboard-dropdown .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$(".childdashboard-dropdown .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}}function validateSchedule(e){var t=$("#start-date").data("ejDateTimePicker"),o=$("#schedule-name").val();if("block"==$("#schedule-name-error-container").css("display")||$("body .loader-gif").length||""==$("#selected_category option:selected").val()||""==$("#selected_dashboard option:selected").val()||!o)return""==$("#selected_category option:selected").val()&&$("#category-message").css("display","block"),""==$("#selected_dashboard option:selected").val()&&$("#dashboard-message").css("display","block"),o||($("#schedule-name-error-container").css("display","block"),$("#schedule-name-validator").html(window.Server.App.Localization.ScheduleValidator)),!1;if(!parent.IsValidName("name",o))return $("#schedule-name-error-container").css("display","block"),$("#schedule-name-validator").html(window.Server.App.Localization.AvoidSpecialCharacters),!1;if($(e).hasClass("subscribe-body")){switch($("#recurrence-type").val().toString().toLowerCase()){case"daily":break;case"weekly":if(!$('#days-check-box input[type="checkbox"]').is(":checked"))return $("#weekly-day-error-container").css("display","block"),$("#weekly-days-validator").html(window.Server.App.Localization.WeekDaysValidator),!1;$("#weekly-day-error-container").css("display","none");break;case"monthly":break;case"yearly":var i=$("#yearly-month").val().toString(),a=parseInt($("#yearly-day").val()),n=$("#yearly-day").data("ejNumericTextbox");switch(i.toLowerCase()){case"february":28<a&&n.option("value",28);break;case"april":case"june":case"september":case"november":30<a&&n.option("value",30);break;case"january":case"march":case"may":case"july":case"august":case"october":case"december":31<a&&n.option("value",31)}break;case"hourly":if(""==$(".time-width").val())return $(".frequency-error").css("display","inline"),$(".time-width").parent("span").addClass("validation-error"),!1;i=$(".time-width").val().split(":");if(!(3<60*i[0]+i[1]))return $(".frequency-error").css("display","inline"),$(".time-width").parent("span").addClass("validation-error"),!1;$(".frequency-error").css("display","none"),$(".time-width").parent("span").removeClass("validation-error")}if("M/d/yyyy h:mm tt"==!t.model.dateTimeFormat)return $("#start-date-error-container").css("display","block"),$("#start-date-validator").html(window.Server.App.Localization.ScheduleValidator),!1;if($("#start-date-error-container").css("display","none"),"endby"===$("input[name=end-type]:checked","#schedule-end-type").val().toLowerCase()){if("M/d/yyyy h:mm tt"==!$("#end-date").data("ejDateTimePicker").model.dateTimeFormat)return $("#end-date-error-container").css("display","block"),$("#end-date-validator").html(window.Server.App.Localization.ScheduleValidator),!1;$("#end-date-error-container").css("display","none")}}return!0}function closePopupContainer(){parent.$("#popup-container").ejDialog("close"),parent.$("#editpopup-container").ejDialog("close")}function validateSchedule(e){var t=$("#schedule-name").val();return"block"==$("#schedule-name-error-container").css("display")||$("body .loader-gif").length||""==$("#selected_category option:selected").val()||""==$("#selected_dashboard option:selected").val()||!t?(""==$("#selected_category option:selected").val()&&$("#category-message").css("display","block"),""==$("#selected_dashboard option:selected").val()&&$("#dashboard-message").css("display","block"),t||($("#schedule-name-error-container").css("display","block"),$("#schedule-name-validator").html(window.Server.App.Localization.ScheduleValidator)),!1):parent.IsValidName("name",t)?""!=$("#subject-area").val()||($(".email-subject-text").addClass("has-error"),$("#email-subject-validation").css("display","block"),!1):($("#schedule-name-error-container").css("display","block"),$("#schedule-name-validator").html(window.Server.App.Localization.AvoidSpecialCharacters),!1)}function enableTimeIntervalOption(){$(".schedule-popup-body").css("display","none"),$("#windowCaption").html(window.Server.App.Localization.RecurrenceIntervalValidator),$(".schedule-dialog .modal-body #time-intervals-div").css("display","inline"),$(".schedule-dialog #data-changes-div-container,.schedule-dialog #data-changes-container,.schedule-dialog #email-editor-area").css("display","none"),$(".subscribe-popup-body").css("display","none"),$("#next-container").css("display","block"),$("#submit-container").css("display","none"),$("#dataAlert").css("display","none"),$("#schedule-next").hasClass("time-interval-body")&&$("#schedule-next").removeClass("time-interval-body"),$("#schedule-next").addClass("subscribe-body"),$("#schedule-back").css("display","inline"),className="time-intervals-div",$(".schedule-dialog").find("#time-intervals-div").length<=0&&partialPost(url,className)}function enableDataNotificationOption(){$("#windowCaption").html(window.Server.App.Localization.DataAlertValidator),$(".schedule-popup-body,#email-editor-area").css("display","none"),$(".schedule-dialog #data-changes-div-container,.schedule-dialog #data-changes-container").css("display","inline"),$("#data-changes-container_wrapper,#data-changes-container,#data-changes-div-container").css("display","inline"),$("#time-intervals-div").css("display","none"),$(".subscribe-popup-body").css("display","none"),$("#next-container").css("display","block"),$("#submit-container").css("display","none"),$("#dataAlert").css("display","block"),$("#schedule-next").hasClass("subscribe-body")&&$("#schedule-next").removeClass("subscribe-body"),$("#schedule-next").addClass("time-interval-body"),$("#schedule-back").css("display","inline"),className="data-changes-container",$(".schedule-dialog").find("#dataAlert").length<=0&&partialPostDataChanges(url,className)}function enableSubscribeOption(){$("#windowCaption").html(window.Server.App.Localization.ExportFormatValidator),$(".schedule-popup-body").css("display","none"),$(".schedule-dialog .modal-body #email-editor-area,.schedule-dialog .modal-body #time-intervals-div").css("display","none"),$(".schedule-dialog #data-changes-div-container,.schedule-dialog #data-changes-container").css("display","none"),$(".subscribe-popup-body").fadeIn(),$("#next-container").css("display","none"),$("#submit-container").css("display","block"),$("#schedule-back").css("display","inline"),$("#dataAlert").css("display","none"),className="subscribers-panel",$(".schedule-dialog").find("#subscribers-panel").length<=0&&partialPost(url,className)}function enableScheduleOption(){$("#windowCaption").html(window.Server.App.Localization.TimeBaseSchedule),$(".subscribe-popup-body, #next-container, #submit-container,#time-intervals-div,#data-changes-container, #email-editor-area").css("display","none"),$(".schedule-popup-body").fadeIn(),$("#next-container").css("display","block"),$("#schedule-back").css("display","none"),$("#dataAlert").css("display","none"),($("#schedule-next").hasClass("subscribe-body")||$("#schedule-next").hasClass("time-interval-body")||$("#schedule-next").hasClass("email-editor-body"))&&($("#schedule-next").removeClass("subscribe-body"),$("#schedule-next").removeClass("time-interval-body"),$("#schedule-next").removeClass("email-editor-body"))}function enableEmailEditor(){if(alertChange!=alertChangeValue&&(alertChangeValue=alertChange,$(".schedule-dialog #email-editor-area").remove()),1==alertChange?$("#windowCaption").html(window.Server.App.Localization.ScheduleMessage):$("#windowCaption").html(window.Server.App.Localization.AlertMessageValidator),$(".schedule-popup-body").css("display","none"),$(".schedule-dialog .modal-body #time-intervals-div,.schedule-dialog .modal-body #subscribers-panel").css("display","none"),$(".schedule-dialog #data-changes-div-container,.schedule-dialog #data-changes-container").css("display","none"),$("#email-editor-area").css("opacity","1"),$("#email-editor-area").fadeIn(),$("#next-container").css("display","block"),$("#submit-container").css("display","none"),$("#dataAlert").css("display","none"),($("#schedule-next").hasClass("subscribe-body")||$("#schedule-next").hasClass("time-interval-body"))&&($("#schedule-next").removeClass("subscribe-body"),$("#schedule-next").removeClass("time-interval-body"),$("#schedule-next").addClass("email-editor-body")),$("#schedule-back").css("display","inline"),className="email-editor-area",$(".schedule-dialog").find("#email-editor-area").length<=0)partialPost(url,className);else if(2==alertChange){for(var e="",t=0;t<filterContent.Filters.length;t++)e+="<option data-id='"+filterContent.Filters[t].FilterName+"'>"+filterContent.Filters[t].DisplayText+"</option>";$("#widget-items").html(e).selectpicker("refresh"),parent.$("#popup-container_wrapper").ejWaitingPopup("hide")}}function partialPost(e,t){$(".schedule-dialog").hasClass(t)||(parent.$("#popup-container_wrapper").ejWaitingPopup("show"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:e,data:{},cache:!1,dataType:"html",success:function(e){$(".modal-body").append(e)}}))}function partialPostDataChanges(e,t){$(".schedule-dialog").hasClass(t)||(parent.$("#popup-container_wrapper").ejWaitingPopup("show"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:e,data:{itemId:createdItemId},success:function(e){$("#popup-container").append(e),dataAlertInitailization()}}))}function refreshScheduleGridItem(e){for(var t=$("#scheduleGrid").data("ejGrid"),o=0;o<t.model.currentViewData.length;o++)t.model.currentViewData[o].Id==e&&$("span span[data-scheduleid ="+e+"]").removeClass("loader-gif").addClass("su-play-folder")}function editSchedule(e,t,o,i,a,n){null==a||"undefined"==a||""==a?(reportCategoryName=i,t=multidashboardName=reportItemId=""):(reportItemId="",reportCategoryName=i,multiDashboardName=a,childId=t),isScheduledDashboardDeleted=n,""!=o?$(".schedule-popup-title").html(" "+o+" - "+window.Server.App.Localization.Schedule):$(".schedule-popup-title").html(" "+o+" "+window.Server.App.Localization.Schedule),$(".schedule-popup-title").attr("title",o),scheduleId=e,reportItemName=o;var i=[],s=(i.push({PropertyName:"CategoryName",FilterType:"equals",FilterKey:reportCategoryName}),""),t=($.ajax({type:"POST",url:getScheduleInfoUrl,data:{scheduleId:e},success:function(e){parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide"),item=e.ScheduleItem,condition=e.Condition,itemConditionArray=JSON.parse(condition),recurrence=item.RecurrenceType,endType=item.EndType,endDate=item.EndDateString,endAfter=item.EndAfter,startDate=item.StartDateString,createdItemId=item.ItemId,itemRecurrence=item.Recurrence,"hourly"==recurrence.toLowerCase()&&(frequency=item.Recurrence.HourlySchedule.MinutesInterval),exportType=item.ExportType,scheduleExportInfo=item.ScheduleExportInfo,subscriberExternalRecipient=e.SubscribedExternalRecipient,subscriberGroup=e.SubscribedGroup,subscriberUser=e.SubscribedUser,itemConditionCategory=item.ConditionCategory,itemWidgetName=item.ItemName,emailContent=item.EmailContent,subject=item.Subject,buttonValue=$("#add-alert-rule").val(),scheduleRecurrenceInfo=item.Recurrence,scheduleExportInfo=item.ScheduleExportInfo,$("#selected-items[value='"+item.ItemName+"']").attr("selected",!0),alertChange=1==item.IsDataChanges?($("#data-alerts").prop("checked","checked"),2):($("#data-changes-div,#time-intervals-div").css("display","none"),1),$("#schedule-name").val(item.Name),item.IsEnabled||$("#enable-schedule").prop("checked",""),hideDataAlert(!item.IsDataChanges)}}),""!=a&&($.ajax({type:"POST",url:getDashboardUrl,async:!1,data:{searchKey:void 0,skip:0,take:20,sorted:void 0,filterCollection:i,displayCategory:"SpecificCategory",isScheduleRequest:!0},success:function(e,t){for(var o=e.result,i=0;i<o.length;i++)o[i].Name.toLowerCase()==a.toLowerCase()&&(s+='<option value="'+o[i].Id+'" selected=selected>'+o[i].Name+"</option>");$("#selected_dashboard").html(""),$("#selected_dashboard").html(s).selectpicker("refresh")}}),$("#selected_childdashboard").attr("disabled",!1)),$("#selected_dashboard").find("option:selected").val());$.ajax({type:"POST",url:getChildDashboardUrl,data:{parentId:t},async:!1,success:function(e,t){null!=(childDashboards=e.result)&&$("#selected_childdashboard").attr("disabled",!1)}})}function refreshConditionCategory(){$(".condition-category-changes").find("select").html(""),$(".condition-category-changes").find("select").append('<option value="5" data-title="'+window.Server.App.Localization.ValueChange+'" name="ValueChanges" selected="selected">'+window.Server.App.Localization.ValueChangeOption+'</option><option value="1" data-title="'+window.Server.App.Localization.Increases+'" name="Increases">'+window.Server.App.Localization.IncreasesOption+'</option><option value="2" data-title="'+window.Server.App.Localization.ContinousIncreases+'" name="ContinousIncreases">'+window.Server.App.Localization.ContinousIncreasesOption+'</option><option value="3" data-title="'+window.Server.App.Localization.Decreases+'" name="Decreases">'+window.Server.App.Localization.DecreasesOption+'</option><option value="4" data-title="'+window.Server.App.Localization.ContinousDecreases+'" name="ContinousDecreases">'+window.Server.App.Localization.ContinousDecreasesOption+"</option>").selectpicker("refresh"),$("#selected-option").selectpicker("refresh");for(var e=0;e<$(".condition-category-changes select option").length;e++){var t=$(".condition-category-changes select option").eq(e).attr("data-title");$(".condition-category-changes .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr({title:t,"data-toggle":"tooltip","data-container":"body","data-placement":"right"})}$(".condition-category-changes .btn-group .dropdown-menu .selectpicker li a").tooltip()}function addTitleForWidgets(){$("#selected-items").selectpicker("refresh");for(var e=0;e<$(".items-dropdown  .btn-group .dropdown-menu .selectpicker li").length;e++){var t=$(".items-dropdown .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$(".items-dropdown .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}}function addTitleForUsersAndGroups(){$("#user-search").selectpicker("refresh");for(var e=0;e<$("#user-search-container .btn-group .dropdown-menu .selectpicker li").length;e++){var t=$("#user-search-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#user-search-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a").attr("title",t)}$("#group-search").selectpicker("refresh");for(e=0;e<=$("#group-search-container .btn-group .dropdown-menu  li").length;e++){t=$("#group-search-container .btn-group .dropdown-menu  li").eq(e).find("a .text").text();$("#group-search-container .btn-group .dropdown-menu li ").eq(e).find("a").attr("title",t)}}function addTitleForRecurrenceType(){$("#recurrence-type").selectpicker("refresh"),$("#recurrence-type-container").find(".dropdown-menu").addClass("dropdown-height");for(var e=0;e<$("#recurrence-type-container .btn-group .dropdown-menu .selectpicker li").length;e++){var t=$("#recurrence-type-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#recurrence-type-container .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#monthly-dow-week").selectpicker("refresh");for(e=0;e<$("#monthly-dow-week-container .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#monthly-dow-week-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#monthly-dow-week-container .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#monthly-dow-day").selectpicker("refresh"),$("#monthly-dow-day-container").find(".dropdown-menu").addClass("day-dropdown-width");for(e=0;e<$("#monthly-dow-day-container .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#monthly-dow-day-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#monthly-dow-day-container .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#yearly-dow-week").selectpicker("refresh");for(e=0;e<$("#yearly-dow-week-container .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#yearly-dow-week-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("yearly-dow-week-container .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#yearly-dow-day").selectpicker("refresh"),$("#yearly-dow-day-container").find(".dropdown-menu").addClass("day-dropdown-width");for(e=0;e<$("#yearly-dow-day-container .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#yearly-dow-day-container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#yearly-dow-day-container .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#yearly-dow-month").selectpicker("refresh"),$("#yearly-dow-month-ccontainer").find(".dropdown-menu").addClass("day-dropdown-width");for(e=0;e<$("#yearly-dow-month-ccontainer .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#yearly-dow-month-ccontainer .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#yearly-dow-month-ccontainer .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#yearly-month").selectpicker("refresh"),$("#yearly-month").next("div").find(".dropdown-menu").addClass("day-dropdown-width");for(e=0;e<$("#yearly-schedule-option .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#yearly-schedule-option .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#yearly-schedule-option .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}}$(document).ready(function(){dateFormat=$("#dateFormat").val(),timeFormat=$("#timeFormat").val(),designerServiceUrl=$('meta[name="designer_service:url"]').attr("content"),dashboardServerUrl=$('meta[name="dashboard_server:url"]').attr("content"),dataServiceUrlforDataAlert=$("meta[name='data_service:url']").attr("content"),$(".category-dropdown .bootstrap-select .bs-searchbox .input-block-level").attr("placeholder",window.Server.App.Localization.SearchCategories),$(".dashboard-dropdown .bootstrap-select .bs-searchbox .input-block-level").attr("placeholder",window.Server.App.Localization.SearchDashboards),$(".childdashboard-dropdown .bootstrap-select .bs-searchbox .input-block-level").attr("placeholder",window.Server.App.Localization.SearchTabs)}),$(document).on("click","#schedule-submit-cancel,#schedule-popup,#schedule-next-cancel",function(e){(isCustomExpressionOpened?onCloseCustomExpression:closePopupContainer)()}),$(document).keyup(function(e){27==e.keyCode&&closePopupContainer()}),$(document).on("change","#selected_category",function(){itemName=reportCategoryName="";var e=$(this).find("option:selected").text(),t=(""!=$(this).find("option:selected").val()&&""==$(this).find("option:selected").val()||($(".schedule-popup-title").html(window.Server.App.Localization.Schedule),$(".schedule-popup-title").attr("title","")),$("#selected_dashboard").attr("disabled",!0),$(".dashboard-dropdown").append($("<span class='no-padding loader-gif'><div class='loader-blue loader-icon' id='selected-category-loader-icon'><svg class='circular'><circle class='path' cx='27' cy='27' r='13' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div></span>")),[]);t.push({PropertyName:"CategoryName",FilterType:"equals",FilterKey:e});null!=itemId&&(listDashboards=""),$.ajax({type:"POST",url:getDashboardUrl,data:{searchKey:void 0,skip:0,take:20,sorted:void 0,filterCollection:t,displayCategory:"SpecificCategory",isScheduleRequest:!0},success:function(e,t){$("#selected_dashboard").attr("disabled",!1),$(".dashboard-dropdown span.loader-gif").remove();for(var o=e.result,i=0;i<o.length;i++)listDashboards+='<option value="'+o[i].Id+'">'+o[i].Name+"</option>";$("#selected_dashboard").html(""),$("#selected_dashboard").html('<option value="" selected="selected" class="hide-option" disabled>'+window.Server.App.Localization.SelectDashboard+"</option>"+listDashboards).selectpicker("refresh"),$("#selected_childdashboard").attr("disabled",!0),$("#selected_childdashboard").html(""),$("#selected_childdashboard").html('<option value="" selected="selected" class="hide-option" disabled="disabled">'+window.Server.App.Localization.SelectDashboard+"</option>").selectpicker("refresh"),addTitleForDashboard()}}),""!=$("#selected_category option:selected").val()&&$("#category-message").css("display","none")}),$(document).on("change","#selected_dashboard",function(){$("#selected_childdashboard").attr("disabled",!0);var e=$(this).find("option:selected").text(),t=$(this).find("option:selected").val(),a=(isScheduledDashboardDeleted="false",createdItemId=t,$(".childdashboard-dropdown .bootstrap-select").append($("<span class='no-padding loader-gif'><div class='loader-blue loader-icon' id='selected-dashboard-loader-icon'><svg class='circular'><circle class='path' cx='27' cy='27' r='13' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div></span>")),[].push({PropertyName:"Name",FilterType:"equals",FilterKey:e}),"");""!=t?($(".schedule-popup-title").html(" "+e+" -"+window.Server.App.Localization.Schedule),$(".schedule-popup-title").attr("title",e)):($(".schedule-popup-title").html(window.Server.App.Localization.Schedule),$(".schedule-popup-title").attr("title","")),$(".items-dropdown select").html(""),$(".items-dropdown").append($("<span class='no-padding loader-gif'><div class='loader-blue loader-icon' id='selected-dashboard-items-dropdown-loader-icon'><svg class='circular'><circle class='path' cx='27' cy='27' r='13' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div></span>")),$(".items-dropdown").find("select").attr("disabled",!0),""!=t&&($.ajax({type:"POST",url:getChildDashboardUrl,data:{parentId:t},success:function(e,t){$(".childdashboard-dropdown span.loader-gif").remove();var o=e.result;if(null!==o){$("#selected_childdashboard").attr("disabled",!1);for(var i=0;i<o.length;i++)o[i].DashboardId!==childId?a+="<option data-designerid="+o[i].DesignerId+' value="'+o[i].DashboardId+'">'+o[i].Name+"</option>":a+="<option data-designerid="+o[i].DesignerId+' value="'+o[i].DashboardId+'" selected="selected">'+o[i].Name+"</option>"}$("#selected_childdashboard").html(""),$("#selected_childdashboard").append('<option value="" selected=selected>'+window.Server.App.Localization.All+"</option>"+a).selectpicker("refresh"),addTitleForChildDashboards(),$("#selected_childdashboard").trigger("change")}}),0<$(".schedule-dialog").find("#dataAlert").length)&&$("#dataAlert").remove(),0<$("#data-changes-container").length&&$.ajax({type:"POST",url:getwidgetUrl,data:{itemId:t},success:function(e){for(var t=e,o="",i=0;i<t.data.length;i++){var a="",n="";1==t.isMultiDashboard&&(a=" ("+t.data[i].ParentName+")",n="data-itemid="+t.data[i].ParentId),o+="<option "+n+'  value="'+t.data[i].Name+'">'+t.data[i].Name+" "+a+"</option>"}$(".items-dropdown select").append('<option disabled class="hide-option" selected="selected" value="">'+window.Server.App.Localization.SelectWidget+"</option>"+o).selectpicker("refresh"),addTitleForWidgets(),$("#selected-items").change(),$("#data-changes-container #condition-div #measure-div,#data-changes-container #condition-div #dimension-div").html(""),$("#data-changes-container #condition-div #add-condition,#data-changes-container #add-dimension-condition").css("display","none"),refreshConditionCategory(),$("span.loader-gif").remove(),$(".items-dropdown").find("select").removeAttr("disabled"),$(".items-dropdown").find(".bootstrap-select li,.bootstrap-select .btn-default").removeClass("disabled"),$(".items-dropdown").find(".dropdown-menu").addClass("alignment-dropdown"),$(".items-dropdown").find(".dropdown-menu .inner").addClass("alignment-dropdown-inner"),$(".items-dropdown").find(".dropdown-menu li:first").css("height","0px")}}),$("#schedule-submit").attr("data-report-id",t),$("#schedule-submit").attr("data-item-id",t),""!=$("#selected_dashboard option:selected").val()&&$("#dashboard-message").css("display","none"),hideDataAlert(!1)}),$(document).on("change","#selected_childdashboard",function(){var e=$(this).find("option:selected").text(),t=$(this).find("option:selected").val();createdItemId=(e=("All"==e?(t=$("#selected_dashboard").find("option:selected").val(),$("#selected_dashboard")):(t=$("#selected_childdashboard").find("option:selected").val(),$("#selected_childdashboard"))).find("option:selected").text(),t),""!=t?($(".schedule-popup-title").html(" "+e+" - "+window.Server.App.Localization.Schedule),$(".schedule-popup-title").attr("title",e)):($(".schedule-popup-title").html(window.Server.App.Localization.Schedule),$(".schedule-popup-title").attr("title","")),$(".items-dropdown select").html(""),$(".items-dropdown").append($("<span class='no-padding loader-gif'><div class='loader-blue loader-icon' id='selected-childdashboard-loader-icon'><svg class='circular'><circle class='path' cx='27' cy='27' r='13' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div></span>")),$(".items-dropdown").find("select").attr("disabled",!0),0<$("#data-changes-container").length&&$.ajax({type:"POST",url:window.getwidgetUrl,data:{itemId:t},success:function(e){for(var t=e,o="",i=0;i<t.data.length;i++){var a="",n="";1==t.isMultiDashboard&&(a=" ("+t.data[i].ParentName+")",n="data-itemid="+t.data[i].ParentId),o+="<option "+n+'  value="'+t.data[i].Name+'">'+t.data[i].Name+" "+a+"</option>"}$(".items-dropdown select").append('<option disabled class="hide-option" selected="selected" value="">'+window.Server.App.Localization.SelectWidget+"</option>"+o).selectpicker("refresh"),addTitleForWidgets(),$("#selected-items").change(),$("#data-changes-container #condition-div #measure-div,#data-changes-container #condition-div #dimension-div").html(""),$("#data-changes-container #condition-div #add-condition,#data-changes-container  #add-dimension-condition").css("display","none"),refreshConditionCategory(),$("span.loader-gif").remove(),$(".items-dropdown").find("select").removeAttr("disabled"),$(".items-dropdown").find(".bootstrap-select li,.bootstrap-select .btn-default").removeClass("disabled"),$(".items-dropdown").find(".dropdown-menu").addClass("alignment-dropdown"),$(".items-dropdown").find(".dropdown-menu .inner").addClass("alignment-dropdown-inner"),$(".items-dropdown").find(".dropdown-menu li:first").css("height","0px")}}),$("#schedule-submit").attr("data-report-id",t),$("#schedule-submit").attr("data-item-id",t),$(".childdashboard-dropdown .btn-group .dropdown-menu.open").removeAttr("style"),$(".childdashboard-dropdown .btn-group .dropdown-menu.open").css("overflow","hidden")}),$(document).on("focusout","#schedule-name",function(e){var t=$("#schedule-name").val().trim(),o="",o="Create"==actionType?$("#schedule-submit").attr("data-schedule-id"):scheduleId;""!=$.trim(t)?($("#schedule-name").closest("div").removeClass("has-error"),$("#schedule-name-error-container").css("display","none"),t?scheduleNameCheck(o,t):$("#schedule-name-error-container").css("display","none")):($("#schedule-name").closest("div").addClass("has-error"),$("#schedule-name-error-container").css("display","block"),$("#schedule-name-validator").html(window.Server.App.Localization.ScheduleValidator))}),$(document).on("keyup","#schedule-name",function(e){""!=$.trim($("#schedule-name").val())?($("#schedule-name").closest("div").removeClass("has-error"),$("#schedule-name-error-container").css("display","none")):($("#schedule-name").closest("div").addClass("has-error"),$("#schedule-name-error-container").css("display","block"),$("#schedule-name-validator").html(window.Server.App.Localization.ScheduleValidator))}),$(document).on("click","#schedule-next",function(e){validateSchedule(this)&&(2==alertChange?$(this).hasClass("time-interval-body")?$("#dataAlert").data("BoldBIDashboardDesigner").getDataAlertModel():$(this).hasClass("subscribe-body")?validateNextSchedule():$(this).hasClass("email-editor-body")?""==$("#email-content-validation").text()&&($("#email-content-validation").html(""),url=recurrenceType,enableTimeIntervalOption(),$("#schedule-next").removeClass("email-editor-body")):"true"!=isScheduledDashboardDeleted?(url=dataAlertUrl,enableDataNotificationOption()):(isScheduledDashboardDeleted="false",$("#selected_dashboard").html('<option value="" disabled="disabled" class="hide-option"selected="selected">'+window.Server.App.Localization.SelectDashboard+"</option>").selectpicker("refresh")):$(this).hasClass("time-interval-body")?(url=recurrenceType,enableTimeIntervalOption()):$(this).hasClass("email-editor-body")?""==$("#email-content-validation").text()&&("block"==$("#frequency").css("display")&&($("#recurrence-type option[value='Hourly']").attr("selected","selected"),$("#recurrence-type").selectpicker("refresh")),$("#email-content-validation").html(""),$("#schedule-next").removeClass("email-editor-body"),url=recurrenceType,enableTimeIntervalOption()):$(this).hasClass("subscribe-body")?validateNextSchedule():"true"!=isScheduledDashboardDeleted?(url=emailEditor,enableEmailEditor(),$("#schedule-next").addClass("email-editor-body")):(isScheduledDashboardDeleted="false",$("#selected_dashboard").html('<option value="" disabled="disabled" class="hide-option"selected="selected">'+window.Server.App.Localization.SelectDashboard+"</option>").selectpicker("refresh")))}),$(document).on("click","#schedule-back",function(e){$("#schedule-next").hasClass("email-editor-body")&&""==$("#subject-area").val()?($(".email-subject-text").addClass("has-error"),$("#email-subject-validation").css("display","block")):isCustomExpressionOpened?onCloseCustomExpression():"none"==$("#schedule-next").parent("div").css("display")?enableTimeIntervalOption():$("#schedule-next").hasClass("subscribe-body")?(1!=alertChange&&3==alertChange?($("#schedule-next").addClass("time-interval-body"),$("#dataAlert").css("display","block")):enableEmailEditor(),$("#schedule-next").removeClass("subscribe-body")):$("#schedule-next").hasClass("time-interval-body")?enableScheduleOption():$("#schedule-next").hasClass("email-editor-body")&&(1==alertChange?enableScheduleOption:enableDataNotificationOption)()}),$(document).on("click","#data-alerts",function(){if(1==$("#data-alerts").prop("checked")){if(alertChange=2,"Edit"==actionType&&$("#selected_childdashboard").find("option").length<=1&&"disabled"!=$("#selected_childdashboard").attr("disabled")&&null!=childDashboards&&1<childDashboards.length){for(var e="",t=0;t<childDashboards.length;t++)childDashboards[t].Name.toLowerCase()==itemName.toLowerCase()?e+="<option data-designerid="+childDashboards[t].DesignerId+' value="'+childDashboards[t].DashboardId+'" selected="selected">'+childDashboards[t].Name+"</option>":e+="<option data-designerid="+childDashboards[t].DesignerId+' value="'+childDashboards[t].DashboardId+'">'+childDashboards[t].Name+"</option>";$("#selected_childdashboard").html(""),$("#selected_childdashboard").append('<option value="">'+window.Server.App.Localization.All+"</option>"+e).selectpicker("refresh")}}else alertChange=1;($("#schedule-next").hasClass("subscribe-body")||$("#schedule-next").hasClass("time-interval-body"))&&($("#schedule-next").removeClass("subscribe-body"),$("#schedule-next").removeClass("time-interval-body"))}),$("#scheduleSearch_global").on("keyup","#scheduleSearch_formfield",function(){var e=$(this).val();2<e.length?$("#scheduleGrid").data("ejGrid").search(e):$("#scheduleGrid").data("ejGrid").search("")});var listCategories="";function hideDataAlert(e){var t=$("#data-alerts"),o=$(".data-alerts-disabled");e?(t.prop("checked","").prop("disabled","disabled"),o.css("display","block")):(t.prop("disabled",""),o.css("display","none"))}function afterEvaluateDataAlert(e){parent.$("#popup-container_wrapper").ejWaitingPopup("show"),(filterContent=e).IsValidModel?(url=emailEditor,enableEmailEditor()):(parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide"))}function onActionBegin(e){"beforeOpenDaExpressionWindow"==e.eventType&&(isCustomExpressionOpened=!0,$("#windowCaption").html(window.Server.App.Localization.CustomExpressionValidator),$(".schedule-popup-title").html(" "+window.Server.App.Localization.Schedule+" - "+window.Server.App.Localization.CustomExpression),$("#schedule-next, #schedule-next-cancel").hide()),"beforeOpenDaRelativeDateDialog"==e.eventType&&($("#schedule-back").prop("disabled",!0),$("#schedule-next").prop("disabled",!0),$("#schedule-next-cancel").prop("disabled",!0))}function onActionComplete(e){"afterCloseDaRelativeDateDialog"==e.eventType&&($("#schedule-back").prop("disabled",!1),$("#schedule-next").prop("disabled",!1),$("#schedule-next-cancel").prop("disabled",!1)),parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide")}function dataAlertInitailization(){currentTimeFormat="true"==currentTimeFormat.toLowerCase()?"HH:mm":"hh:mm tt";var e={serviceUrl:designerServiceUrl,dataServiceUrl:dataServiceUrlforDataAlert,serverUrl:dashboardServerUrl,mode:BoldBIDashboard.Designer.mode.dataalert,itemId:createdItemId,dashboardPath:createdItemId+"/"+version,serviceAuthorizationToken:designerToken,datasources:sharedDataSources,dataAlert:isNullOrWhitespace(item)?null:item.DaJsonString,canEditDashboard:canEdit,actionBegin:"onActionBegin",actionComplete:"onActionComplete",afterEvaluateDataAlert:"afterEvaluateDataAlert",renderDaExpression:"renderDaExpression",localeSettings:{culture:dataLanguage,dateFormat:currentDateFormat,timeFormat:currentTimeFormat,timeZone:timeZone},customBrandSettings:{hideHelpLink:isHideHelpLink,customDomain:customHelpLinkDomain,customBrandName:custombrandName},dashboardThemeSettings:{appearance:customThemeAppearance,applicationTheme:applicationTheme,dashboardTheme:dashboardCustomThemename}};new BoldBIDashboardDesigner($("#dataAlert"),e);$("#dataAlert").css("height",$(".share-popup").innerHeight())}function onCloseCustomExpression(){$("#dataAlert").data("BoldBIDashboardDesigner").closeDataAlertExpression(),$("#windowCaption").html(window.Server.App.Localization.DataAlertValidator),isNullOrWhitespace(itemName)?$(".schedule-popup-title").html(" "+$("#selected_dashboard").find("option:selected").html()+" - "+window.Server.App.Localization.Schedule):$(".schedule-popup-title").html(" "+itemName+" - "+window.Server.App.Localization.Schedule),$("#schedule-next, #schedule-next-cancel").show(),isCustomExpressionOpened=!1}if($(document).on("show.bs.dropdown",".category-dropdown",function(){$(".category-dropdown").find(".open,.bootstrap-select").removeClass("dropdown-alignment"),""==listCategories&&($(".category-dropdown .bootstrap-select").append($("<span class='no-padding loader-gif'><div class='loader-blue loader-icon' id='category-dropdown-loader-icon'><svg class='circular'><circle class='path' cx='27' cy='27' r='13' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div></span>")),$(".category-dropdown .bootstrap-select .open").hide(),[].push({PropertyName:"CategoryName",FilterType:"equals",FilterKey:reportCategoryName}),$.ajax({type:"POST",url:getCategoryUrl,success:function(e){for(var t=e,o=0;o<t.data.length;o++)t.data[o].Name==reportCategoryName?listCategories+='<option value="'+t.data[o].Id+'" selected= "selected">'+t.data[o].Name+"</option>":listCategories+='<option value="'+t.data[o].Id+'">'+t.data[o].Name+"</option>";$("#selected_category").html(""),(""==reportItemId?$("#selected_category").html('<option value="" disabled="disabled" class="hide-option" selected="selected">'+window.Server.App.Localization.SelectCategory+"</option>"+listCategories):$("#selected_category").html(listCategories)).selectpicker("refresh"),addTitleForCategory(),$(".category-dropdown .bootstrap-select ul li").each(function(){$(this).hasClass("selected")&&$(this).addClass("active")}),""!=listCategories&&$(".category-dropdown .bootstrap-select .open").show(),$(".category-dropdown span.loader-gif").remove()}})),$(".category-dropdown").find(".open").addClass("dropdown-alignment")}),$(document).on("show.bs.dropdown",".dashboard-dropdown",function(){var e;$(".dashboard-dropdown").find(".open,.bootstrap-select").removeClass("dropdown-alignment"),""==$("#selected_category").find("option:selected").val()&&null==multiDashboardName?($("#category-message").css("display","block"),$("#selected_dashboard").attr("disabled",!1)):""==listDashboards&&($(".dashboard-dropdown .bootstrap-select").append($("<span class='no-padding loader-gif'><div class='loader-blue loader-icon' id='dashboard-dropdown-loader-icon'><svg class='circular'><circle class='path' cx='27' cy='27' r='13' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div></span>")),$(".dashboard-dropdown .bootstrap-select .open").hide(),(e=[]).push({PropertyName:"CategoryName",FilterType:"equals",FilterKey:reportCategoryName}),""!=reportItemId&&""==reportItemId||""==itemName||""==reportCategoryName?($("#selected_dashboard").html('<option value="" disabled="disabled" class="hide-option"selected="selected">'+window.Server.App.Localization.SelectDashboard+"</option>").selectpicker("refresh"),$(".dashboard-dropdown .bootstrap-select .open").show(),$(".dashboard-dropdown .btn-group .dropdown-menu.open").removeAttr("style"),$(".dashboard-dropdown .btn-group .dropdown-menu.open").css("overflow","hidden"),$(".dashboard-dropdown span.loader-gif").remove()):$.ajax({type:"POST",url:getDashboardUrl,data:{searchKey:void 0,skip:0,take:20,sorted:void 0,filterCollection:e,displayCategory:"SpecificCategory",isScheduleRequest:!0},success:function(e,t){for(var o=e.result,i=0;i<o.length;i++)listDashboards+=null==multiDashboardName||"undefined"==multiDashboardName||""==multiDashboardName?o[i].Name.toLowerCase()==itemName.toLowerCase()?'<option value="'+o[i].Id+'" selected=selected>'+o[i].Name+"</option>":'<option value="'+o[i].Id+'">'+o[i].Name+"</option>":o[i].Name.toLowerCase()==multiDashboardName.toLowerCase()?'<option value="'+o[i].Id+'" selected=selected>'+o[i].Name+"</option>":'<option value="'+o[i].Id+'">'+o[i].Name+"</option>";$("#selected_dashboard").html(""),(""==reportItemId?$("#selected_dashboard").html("<option value='' disabled='disabled' class='hide-option' selected='selected'>"+window.Server.App.Localization.SelectDashboard+"</option>"+listDashboards):$("#selected_dashboard").html(listDashboards)).selectpicker("refresh"),addTitleForDashboard(),$(".dashboard-dropdown ul li").each(function(){$(this).hasClass("selected")&&$(this).addClass("active")}),$(".dashboard-dropdown .bootstrap-select .open").show(),$(".dashboard-dropdown span.loader-gif").remove()}})),$(".dashboard-dropdown").find(".open").addClass("dropdown-alignment")}),$(document).on("show.bs.dropdown",".childdashboard-dropdown",function(){if("Edit"==actionType&&$("#selected_childdashboard").find("option").length<=1){$(".childdashboard-dropdown .bootstrap-select").append($("<span class='no-padding loader-gif'><div class='loader-blue loader-icon' id='childdashboard-dropdown-loader-icon'><svg class='circular'><circle class='path' cx='27' cy='27' r='13' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div></span>")),$(".childdashboard-dropdown .bootstrap-select .open").hide();$("#selected_dashboard").find("option:selected").val();for(var e="",t=0;t<childDashboards.length;t++)childDashboards[t].Name.toLowerCase()==itemName.toLowerCase()?e+="<option data-designerid="+childDashboards[t].DesignerId+' value="'+childDashboards[t].DashboardId+'" selected="selected">'+childDashboards[t].Name+"</option>":e+="<option data-designerid="+childDashboards[t].DesignerId+' value="'+childDashboards[t].DashboardId+'">'+childDashboards[t].Name+"</option>";$("#selected_childdashboard").html(""),$("#selected_childdashboard").append('<option value="">'+window.Server.App.Localization.All+"</option>"+e).selectpicker("refresh"),addTitleForChildDashboards(),$(".childdashboard-dropdown ul li").each(function(){$(this).hasClass("selected")&&$(this).addClass("active")}),$(".childdashboard-dropdown span.loader-gif").remove(),""!=e&&$(".childdashboard-dropdown .bootstrap-select .open").show()}}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(i){"use strict";i.fn.emulateTransitionEnd=function(e){var t=!1,o=this;i(this).one("bsTransitionEnd",function(){t=!0});return setTimeout(function(){t||i(o).trigger(i.support.transition.end)},e),this},i(function(){i.support.transition=function(){var e,t=document.createElement("bootstrap"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in o)if(void 0!==t.style[e])return{end:o[e]};return!1}(),i.support.transition&&(i.event.special.bsTransitionEnd={bindType:i.support.transition.end,delegateType:i.support.transition.end,handle:function(e){return i(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),function(n){"use strict";function i(e){n(e).on("click",t,this.close)}var t='[data-dismiss="alert"]',e=(i.VERSION="3.2.0",i.prototype.close=function(e){function t(){a.detach().trigger("closed.bs.alert").remove()}var o=n(this),i=o.attr("data-target"),a=(i||(i=(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),n(i));e&&e.preventDefault(),(a=a.length?a:o.hasClass("alert")?o:o.parent()).trigger(e=n.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),n.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",t).emulateTransitionEnd(150):t())},n.fn.alert);n.fn.alert=function(o){return this.each(function(){var e=n(this),t=e.data("bs.alert");t||e.data("bs.alert",t=new i(this)),"string"==typeof o&&t[o].call(e)})},n.fn.alert.Constructor=i,n.fn.alert.noConflict=function(){return n.fn.alert=e,this},n(document).on("click.bs.alert.data-api",t,i.prototype.close)}(jQuery),function(n){"use strict";function o(o){return this.each(function(){var e=n(this),t=e.data("bs.button");t||e.data("bs.button",t=new i(this,"object"==typeof o&&o)),"toggle"==o?t.toggle():o&&t.setState(o)})}function i(e,t){this.$element=n(e),this.options=n.extend({},i.DEFAULTS,t),this.isLoading=!1}i.VERSION="3.2.0",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var t="disabled",o=this.$element,i=o.is("input")?"val":"html",a=o.data();e+="Text",null==a.resetText&&o.data("resetText",o[i]()),o[i]((null==a[e]?this.options:a)[e]),setTimeout(n.proxy(function(){"loadingText"==e?(this.isLoading=!0,o.addClass(t).attr(t,t)):this.isLoading&&(this.isLoading=!1,o.removeClass(t).removeAttr(t))},this),0)},i.prototype.toggle=function(){var e,t=!0,o=this.$element.closest('[data-toggle="buttons"]');o.length&&("radio"==(e=this.$element.find("input")).prop("type")&&(e.prop("checked")&&this.$element.hasClass("active")?t=!1:o.find(".active").removeClass("active")),t)&&e.prop("checked",!this.$element.hasClass("active")).trigger("change"),t&&this.$element.toggleClass("active")};var e=n.fn.button;n.fn.button=o,n.fn.button.Constructor=i,n.fn.button.noConflict=function(){return n.fn.button=e,this},n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var t=n(e.target);t.hasClass("btn")||(t=t.closest(".btn")),o.call(t,"toggle"),e.preventDefault()})}(jQuery),function(l){"use strict";function a(a){return this.each(function(){var e=l(this),t=e.data("bs.carousel"),o=l.extend({},n.DEFAULTS,e.data(),"object"==typeof a&&a),i="string"==typeof a?a:o.slide;t||e.data("bs.carousel",t=new n(this,o)),"number"==typeof a?t.to(a):i?t[i]():o.interval&&t.pause().cycle()})}function n(e,t){this.$element=l(e).on("keydown.bs.carousel",l.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=t,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",l.proxy(this.pause,this)).on("mouseleave.bs.carousel",l.proxy(this.cycle,this))}n.VERSION="3.2.0",n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},n.prototype.keydown=function(e){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(l.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.to=function(e){var t=this,o=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||e<0?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):o==e?this.pause().cycle():this.slide(o<e?"next":"prev",l(this.$items[e]))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&l.support.transition&&(this.$element.trigger(l.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,t){var o,i,a=this.$element.find(".item.active"),n=t||a[e](),t=this.interval,s="next"==e?"left":"right",r="next"==e?"first":"last",d=this;if(!n.length){if(!this.options.wrap)return;n=this.$element.find(".item")[r]()}return n.hasClass("active")?this.sliding=!1:(r=n[0],o=l.Event("slide.bs.carousel",{relatedTarget:r,direction:s}),this.$element.trigger(o),o.isDefaultPrevented()?void 0:(this.sliding=!0,t&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),o=l(this.$indicators.children()[this.getItemIndex(n)]))&&o.addClass("active"),i=l.Event("slid.bs.carousel",{relatedTarget:r,direction:s}),l.support.transition&&this.$element.hasClass("slide")?(n.addClass(e),n[0].offsetWidth,a.addClass(s),n.addClass(s),a.one("bsTransitionEnd",function(){n.removeClass([e,s].join(" ")).addClass("active"),a.removeClass(["active",s].join(" ")),d.sliding=!1,setTimeout(function(){d.$element.trigger(i)},0)}).emulateTransitionEnd(1e3*a.css("transition-duration").slice(0,-1))):(a.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(i)),t&&this.cycle(),this))};var e=l.fn.carousel;l.fn.carousel=a,l.fn.carousel.Constructor=n,l.fn.carousel.noConflict=function(){return l.fn.carousel=e,this},l(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var t,o=l(this),i=l(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));i.hasClass("carousel")&&(t=l.extend({},i.data(),o.data()),(o=o.attr("data-slide-to"))&&(t.interval=!1),a.call(i,t),o&&i.data("bs.carousel").to(o),e.preventDefault())}),l(window).on("load",function(){l('[data-ride="carousel"]').each(function(){var e=l(this);a.call(e,e.data())})})}(jQuery),function(s){"use strict";function r(i){return this.each(function(){var e=s(this),t=e.data("bs.collapse"),o=s.extend({},a.DEFAULTS,e.data(),"object"==typeof i&&i);!t&&o.toggle&&"show"==i&&(i=!i),t||e.data("bs.collapse",t=new a(this,o)),"string"==typeof i&&t[i]()})}function a(e,t){this.$element=s(e),this.options=s.extend({},a.DEFAULTS,t),this.transitioning=null,this.options.parent&&(this.$parent=s(this.options.parent)),this.options.toggle&&this.toggle()}a.VERSION="3.2.0",a.DEFAULTS={toggle:!0},a.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},a.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=s.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){e=this.$parent&&this.$parent.find("> .panel > .in");if(e&&e.length){var t=e.data("bs.collapse");if(t&&t.transitioning)return;r.call(e,"hide"),t||e.data("bs.collapse",null)}var o=this.dimension(),t=(this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1,function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")});if(!s.support.transition)return t.call(this);e=s.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",s.proxy(t,this)).emulateTransitionEnd(350)[o](this.$element[0][e])}}},a.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e,t=s.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented())return t=this.dimension(),this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1,e=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")},s.support.transition?void this.$element[t](0).one("bsTransitionEnd",s.proxy(e,this)).emulateTransitionEnd(350):e.call(this)}},a.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var e=s.fn.collapse;s.fn.collapse=r,s.fn.collapse.Constructor=a,s.fn.collapse.noConflict=function(){return s.fn.collapse=e,this},s(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var t=s(this),e=t.attr("data-target")||e.preventDefault()||(e=t.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""),e=s(e),o=e.data("bs.collapse"),i=o?"toggle":t.data(),a=t.attr("data-parent"),n=a&&s(a);o&&o.transitioning||(n&&n.find('[data-toggle="collapse"][data-parent="'+a+'"]').not(t).addClass("collapsed"),t[e.hasClass("in")?"addClass":"removeClass"]("collapsed")),r.call(e,i)})}(jQuery),function(a){"use strict";function n(o){o&&3===o.which||(a(".dropdown-backdrop").remove(),a(r).each(function(){var e=s(a(this)),t={relatedTarget:this};e.hasClass("open")&&(e.trigger(o=a.Event("hide.bs.dropdown",t)),o.isDefaultPrevented()||e.removeClass("open").trigger("hidden.bs.dropdown",t))}))}function s(e){var t=e.attr("data-target"),t=(t=t?t:(t=e.attr("href"))&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""))&&a(t);return t&&t.length?t:e.parent()}function i(e){a(e).on("click.bs.dropdown",this.toggle)}var r='[data-toggle="dropdown"]',e=(i.VERSION="3.2.0",i.prototype.toggle=function(e){var t=a(this);if(!t.is(".disabled, :disabled")){var o=s(t),i=o.hasClass("open");if(n(),!i){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",n);i={relatedTarget:this};if(o.trigger(e=a.Event("show.bs.dropdown",i)),e.isDefaultPrevented())return;t.trigger("focus"),o.toggleClass("open").trigger("shown.bs.dropdown",i)}return!1}},i.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var t=a(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var o=s(t),i=o.hasClass("open");if(!i||27==e.keyCode)return 27==e.which&&o.find(r).trigger("focus"),t.trigger("click");i=" li:not(.divider):visible a",t=o.find('[role="menu"]'+i+', [role="listbox"]'+i);t.length&&(o=t.index(t.filter(":focus")),38==e.keyCode&&0<o&&o--,40==e.keyCode&&o<t.length-1&&o++,t.eq(o=~o?o:0).trigger("focus"))}}},a.fn.dropdown);a.fn.dropdown=function(o){return this.each(function(){var e=a(this),t=e.data("bs.dropdown");t||e.data("bs.dropdown",t=new i(this)),"string"==typeof o&&t[o].call(e)})},a.fn.dropdown.Constructor=i,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=e,this},a(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,i.prototype.toggle).on("keydown.bs.dropdown.data-api",r+', [role="menu"], [role="listbox"]',i.prototype.keydown)}(jQuery),function(n){"use strict";function a(i,a){return this.each(function(){var e=n(this),t=e.data("bs.modal"),o=n.extend({},s.DEFAULTS,e.data(),"object"==typeof i&&i);t||e.data("bs.modal",t=new s(this,o)),"string"==typeof i?t[i](a):o.show&&t.show(a)})}function s(e,t){this.options=t,this.$body=n(document.body),this.$element=n(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}s.VERSION="3.2.0",s.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},s.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},s.prototype.show=function(o){var i=this,e=n.Event("show.bs.modal",{relatedTarget:o});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this)),this.backdrop(function(){var e=n.support.transition&&i.$element.hasClass("fade"),t=(i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),e&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus(),n.Event("shown.bs.modal",{relatedTarget:o}));e?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(t)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(t)}))},s.prototype.hide=function(e){e&&e.preventDefault(),e=n.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},s.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},s.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",n.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},s.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})},s.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},s.prototype.backdrop=function(e){var t,o=this,i=this.$element.hasClass("fade")?"fade":"";this.isShown&&this.options.backdrop?(t=n.support.transition&&i,this.$backdrop=n('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",n.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),t&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e&&(t?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e())):!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),i=function(){o.removeBackdrop(),e&&e()},n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(150):i()):e&&e()},s.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},s.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",e+this.scrollbarWidth)},s.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},s.prototype.measureScrollbar=function(){var e=document.createElement("div"),t=(e.className="modal-scrollbar-measure",this.$body.append(e),e.offsetWidth-e.clientWidth);return this.$body[0].removeChild(e),t};var e=n.fn.modal;n.fn.modal=a,n.fn.modal.Constructor=s,n.fn.modal.noConflict=function(){return n.fn.modal=e,this},n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var t=n(this),o=t.attr("href"),i=n(t.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),o=i.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(o)&&o},i.data(),t.data());t.is("a")&&e.preventDefault(),i.one("show.bs.modal",function(e){e.isDefaultPrevented()||i.one("hidden.bs.modal",function(){t.is(":visible")&&t.trigger("focus")})}),a.call(i,o,this)})}(jQuery),function(d){"use strict";function i(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)}i.VERSION="3.2.0",i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,t,o){this.enabled=!0,this.type=e,this.$element=d(t),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&d(this.options.viewport.selector||this.options.viewport);for(var i=this.options.trigger.split(" "),a=i.length;a--;){var n,s=i[a];"click"==s?this.$element.on("click."+this.type,this.options.selector,d.proxy(this.toggle,this)):"manual"!=s&&(n="hover"==s?"mouseleave":"focusout",this.$element.on(("hover"==s?"mouseenter":"focusin")+"."+this.type,this.options.selector,d.proxy(this.enter,this)),this.$element.on(n+"."+this.type,this.options.selector,d.proxy(this.leave,this)))}this.options.selector?this._options=d.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return(e=d.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var o={},i=this.getDefaults();return this._options&&d.each(this._options,function(e,t){i[e]!=t&&(o[e]=t)}),o},i.prototype.enter=function(e){var t=e instanceof this.constructor?e:d(e.currentTarget).data("bs."+this.type);return t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),d(e.currentTarget).data("bs."+this.type,t)),clearTimeout(t.timeout),t.hoverState="in",t.options.delay&&t.options.delay.show?void(t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)):t.show()},i.prototype.leave=function(e){var t=e instanceof this.constructor?e:d(e.currentTarget).data("bs."+this.type);return t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),d(e.currentTarget).data("bs."+this.type,t)),clearTimeout(t.timeout),t.hoverState="out",t.options.delay&&t.options.delay.hide?void(t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)):t.hide()},i.prototype.show=function(){var e,t,o,i,a,n,s,r=d.Event("show.bs."+this.type);this.hasContent()&&this.enabled&&(this.$element.trigger(r),a=d.contains(document.documentElement,this.$element[0]),!r.isDefaultPrevented())&&a&&(r=(e=this).tip(),a=this.getUID(this.type),this.setContent(),r.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&r.addClass("fade"),a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,(s=(t=/\s?auto?\s?/i).test(a))&&(a=a.replace(t,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),t=this.getPosition(),o=r[0].offsetWidth,i=r[0].offsetHeight,s&&(s=a,n=this.$element.parent(),n=this.getPosition(n),a="bottom"==a&&t.top+t.height+i-n.scroll>n.height?"top":"top"==a&&t.top-n.scroll-i<0?"bottom":"right"==a&&t.right+o>n.width?"left":"left"==a&&t.left-o<n.left?"right":a,r.removeClass(s).addClass(a)),n=this.getCalculatedOffset(a,t,o,i),this.applyPlacement(n,a),s=function(){e.$element.trigger("shown.bs."+e.type),e.hoverState=null},d.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",s).emulateTransitionEnd(150):s())},i.prototype.applyPlacement=function(e,t){var o=this.tip(),i=o[0].offsetWidth,a=o[0].offsetHeight,n=parseInt(o.css("margin-top"),10),s=parseInt(o.css("margin-left"),10),n=(isNaN(n)&&(n=0),isNaN(s)&&(s=0),e.top=e.top+n,e.left=e.left+s,d.offset.setOffset(o[0],d.extend({using:function(e){o.css({top:Math.round(e.top),left:Math.round(e.left)})}},e),0),o.addClass("in"),o[0].offsetWidth),s=o[0].offsetHeight,t=("top"==t&&s!=a&&(e.top=e.top+a-s),this.getViewportAdjustedDelta(t,e,n,s)),i=(t.left?e.left+=t.left:e.top+=t.top,t.left?2*t.left-i+n:2*t.top-a+s),n=t.left?"left":"top",a=t.left?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(i,o[0][a],n)},i.prototype.replaceArrow=function(e,t,o){this.arrow().css(o,e?50*(1-e/t)+"%":"")},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},i.prototype.hide=function(){function e(){"in"!=t.hoverState&&o.detach(),t.$element.trigger("hidden.bs."+t.type)}var t=this,o=this.tip(),i=d.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(i),i.isDefaultPrevented()?void 0:(o.removeClass("in"),d.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var e=this.$element;!e.attr("title")&&"string"==typeof e.attr("data-original-title")||e.attr("data-original-title",e.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){var t=(e=e||this.$element)[0],o="BODY"==t.tagName;return d.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():null,{scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:o?d(window).width():e.outerWidth(),height:o?d(window).height():e.outerHeight()},o?{top:0,left:0}:e.offset())},i.prototype.getCalculatedOffset=function(e,t,o,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-o/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-o/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-o}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},i.prototype.getViewportAdjustedDelta=function(e,t,o,i){var a,n,s={top:0,left:0};return this.$viewport&&(a=this.options.viewport&&this.options.viewport.padding||0,n=this.getPosition(this.$viewport),/right|left/.test(e)?(e=t.top-a-n.scroll,i=t.top+a-n.scroll+i,e<n.top?s.top=n.top-e:i>n.top+n.height&&(s.top=n.top+n.height-i)):(e=t.left-a,i=t.left+a+o,e<n.left?s.left=n.left-e:i>n.width&&(s.left=n.left+n.width-i))),s},i.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},i.prototype.getUID=function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},i.prototype.tip=function(){return this.$tip=this.$tip||d(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var t=this;e&&!(t=d(e.currentTarget).data("bs."+this.type))&&(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),d(e.currentTarget).data("bs."+this.type,t)),t.tip().hasClass("in")?t.leave(t):t.enter(t)},i.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var e=d.fn.tooltip;d.fn.tooltip=function(o){return this.each(function(){var e=d(this),t=e.data("bs.tooltip");!t&&"destroy"==o||(t||e.data("bs.tooltip",t=new i(this,"object"==typeof o&&o)),"string"!=typeof o)||t[o]()})},d.fn.tooltip.Constructor=i,d.fn.tooltip.noConflict=function(){return d.fn.tooltip=e,this}}(jQuery),function(i){"use strict";function a(e,t){this.init("popover",e,t)}if(!i.fn.tooltip)throw new Error("Popover requires tooltip.js");a.VERSION="3.2.0",a.DEFAULTS=i.extend({},i.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((a.prototype=i.extend({},i.fn.tooltip.Constructor.prototype)).constructor=a).prototype.getDefaults=function(){return a.DEFAULTS},a.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),o=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").empty()[this.options.html?"string"==typeof o?"html":"append":"text"](o),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},a.prototype.hasContent=function(){return this.getTitle()||this.getContent()},a.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},a.prototype.tip=function(){return this.$tip||(this.$tip=i(this.options.template)),this.$tip};var e=i.fn.popover;i.fn.popover=function(o){return this.each(function(){var e=i(this),t=e.data("bs.popover");!t&&"destroy"==o||(t||e.data("bs.popover",t=new a(this,"object"==typeof o&&o)),"string"!=typeof o)||t[o]()})},i.fn.popover.Constructor=a,i.fn.popover.noConflict=function(){return i.fn.popover=e,this}}(jQuery),function(a){"use strict";function i(e,t){var o=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(e).is("body")?window:e),this.options=a.extend({},i.DEFAULTS,t),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",o),this.refresh(),this.process()}function t(o){return this.each(function(){var e=a(this),t=e.data("bs.scrollspy");t||e.data("bs.scrollspy",t=new i(this,"object"==typeof o&&o)),"string"==typeof o&&t[o]()})}i.VERSION="3.2.0",i.DEFAULTS={offset:10},i.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},i.prototype.refresh=function(){var o="offset",i=0,e=(a.isWindow(this.$scrollElement[0])||(o="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),this);this.$body.find(this.selector).map(function(){var e=a(this),e=e.data("target")||e.attr("href"),t=/^#./.test(e)&&a(e);return t&&t.length&&t.is(":visible")?[[t[o]().top+i,e]]:null}).sort(function(e,t){return e[0]-t[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},i.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,o=this.getScrollHeight(),i=this.options.offset+o-this.$scrollElement.height(),a=this.offsets,n=this.targets,s=this.activeTarget;if(this.scrollHeight!=o&&this.refresh(),i<=t)return s!=(e=n[n.length-1])&&this.activate(e);if(s&&t<=a[0])return s!=(e=n[0])&&this.activate(e);for(e=a.length;e--;)s!=n[e]&&t>=a[e]&&(!a[e+1]||t<=a[e+1])&&this.activate(n[e])},i.prototype.activate=function(e){this.activeTarget=e,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");e=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',e=a(e).parents("li").addClass("active");(e=e.parent(".dropdown-menu").length?e.closest("li.dropdown").addClass("active"):e).trigger("activate.bs.scrollspy")};var e=a.fn.scrollspy;a.fn.scrollspy=t,a.fn.scrollspy.Constructor=i,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=e,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var e=a(this);t.call(e,e.data())})})}(jQuery),function(s){"use strict";function t(o){return this.each(function(){var e=s(this),t=e.data("bs.tab");t||e.data("bs.tab",t=new i(this)),"string"==typeof o&&t[o]()})}function i(e){this.element=s(e)}i.VERSION="3.2.0",i.prototype.show=function(){var e,t,o=this.element,i=o.closest("ul:not(.dropdown-menu)"),a=o.data("target");a||(a=(a=o.attr("href"))&&a.replace(/.*(?=#[^\s]*$)/,"")),o.parent("li").hasClass("active")||(e=i.find(".active:last a")[0],t=s.Event("show.bs.tab",{relatedTarget:e}),o.trigger(t),t.isDefaultPrevented())||(t=s(a),this.activate(o.closest("li"),i),this.activate(t,t.parent(),function(){o.trigger({type:"shown.bs.tab",relatedTarget:e})}))},i.prototype.activate=function(e,t,o){function i(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),n?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),o&&o()}var a=t.find("> .active"),n=o&&s.support.transition&&a.hasClass("fade");n?a.one("bsTransitionEnd",i).emulateTransitionEnd(150):i(),a.removeClass("in")};var e=s.fn.tab;s.fn.tab=t,s.fn.tab.Constructor=i,s.fn.tab.noConflict=function(){return s.fn.tab=e,this},s(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t.call(s(this),"show")})}(jQuery),function(s){"use strict";function o(o){return this.each(function(){var e=s(this),t=e.data("bs.affix");t||e.data("bs.affix",t=new r(this,"object"==typeof o&&o)),"string"==typeof o&&t[o]()})}function r(e,t){this.options=s.extend({},r.DEFAULTS,t),this.$target=s(this.options.target).on("scroll.bs.affix.data-api",s.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",s.proxy(this.checkPositionWithEventLoop,this)),this.$element=s(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()}r.VERSION="3.2.0",r.RESET="affix affix-top affix-bottom",r.DEFAULTS={offset:0,target:window},r.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(r.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},r.prototype.checkPositionWithEventLoop=function(){setTimeout(s.proxy(this.checkPosition,this),1)},r.prototype.checkPosition=function(){var e,t,o,i,a,n;this.$element.is(":visible")&&(e=s(document).height(),n=this.$target.scrollTop(),a=this.$element.offset(),t=(i=this.options.offset).top,o=i.bottom,"object"!=typeof i&&(o=t=i),"function"==typeof t&&(t=i.top(this.$element)),"function"==typeof o&&(o=i.bottom(this.$element)),i=!(null!=this.unpin&&n+this.unpin<=a.top)&&(null!=o&&a.top+this.$element.height()>=e-o?"bottom":null!=t&&n<=t&&"top"),this.affixed!==i)&&(null!=this.unpin&&this.$element.css("top",""),n=s.Event((a="affix"+(i?"-"+i:""))+".bs.affix"),this.$element.trigger(n),n.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(r.RESET).addClass(a).trigger(s.Event(a.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:e-this.$element.height()-o})))};var e=s.fn.affix;s.fn.affix=o,s.fn.affix.Constructor=r,s.fn.affix.noConflict=function(){return s.fn.affix=e,this},s(window).on("load",function(){s('[data-spy="affix"]').each(function(){var e=s(this),t=e.data();t.offset=t.offset||{},t.offsetBottom&&(t.offset.bottom=t.offsetBottom),t.offsetTop&&(t.offset.top=t.offsetTop),o.call(e,t)})})}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t()}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(){!function(y){"use strict";function g(e){return y.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],function(){e=e.replace(this.re,this.ch)}),e}function r(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},o="(?:"+Object.keys(t).join("|")+")",i=new RegExp(o),o=new RegExp(o,"g"),e=null==e?"":""+e;return i.test(e)?e.replace(o,function(e){return t[e]}):e}function t(e,t){var n=arguments,s=e,r=t;[].shift.apply(n);var d,e=this.each(function(){var e=y(this);if(e.is("select")){var t=e.data("selectpicker"),o="object"==typeof s&&s;if(t){if(o)for(var i in o)o.hasOwnProperty(i)&&(t.options[i]=o[i])}else{var a=y.extend({},l.DEFAULTS,y.fn.selectpicker.defaults||{},e.data(),o);e.data("selectpicker",t=new l(this,a,r))}"string"==typeof s&&(d=t[s]instanceof Function?t[s].apply(t,n):t.options[s])}});return void 0!==d?d:e}function e(e){if(null==this)throw TypeError();var t=String(this);if(e&&"[object RegExp]"==d.call(e))throw TypeError();var o=t.length,i=String(e),a=i.length,e=1<arguments.length?arguments[1]:void 0,e=e?Number(e):0,n=(e!=e&&(e=0),Math.min(Math.max(e,0),o));if(o<a+n)return!1;for(var s=-1;++s<a;)if(t.charCodeAt(n+s)!=i.charCodeAt(s))return!1;return!0}var d,n,o,s;function i(e){if(null==this)throw TypeError();var t=String(this);if(e&&"[object RegExp]"==n.call(e))throw TypeError();var o=t.length,e=String(e),i=e.length,a=1<arguments.length?arguments[1]:void 0;return(a=a?Number(a):0)!=a&&(a=0),!(o<i+Math.min(Math.max(a,0),o))&&-1!=s.call(t,e,a)}String.prototype.includes||(n={}.toString,o=function(){try{var e={},t=Object.defineProperty,o=t(e,e,e)&&t}catch(e){}return o}(),s="".indexOf,o?o(String.prototype,"includes",{value:i,configurable:!0,writable:!0}):String.prototype.includes=i),String.prototype.startsWith||(o=function(){try{var e={},t=Object.defineProperty,o=t(e,e,e)&&t}catch(e){}return o}(),d={}.toString,o?o(String.prototype,"startsWith",{value:e,configurable:!0,writable:!0}):String.prototype.startsWith=e),Object.keys||(Object.keys=function(e,t,o){for(t in o=[],e)o.hasOwnProperty.call(e,t)&&o.push(t);return o}),y.fn.triggerNative=function(e){var t,o=this[0];o.dispatchEvent?("function"==typeof Event?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),o.dispatchEvent(t)):(o.fireEvent&&((t=document.createEventObject()).eventType=e,o.fireEvent("on"+e,t)),this.trigger(e))},y.expr[":"].icontains=function(e,t,o){e=y(e);return(e.data("tokens")||e.text()).toUpperCase().includes(o[3].toUpperCase())},y.expr[":"].ibegins=function(e,t,o){e=y(e);return(e.data("tokens")||e.text()).toUpperCase().startsWith(o[3].toUpperCase())},y.expr[":"].aicontains=function(e,t,o){e=y(e);return(e.data("tokens")||e.data("normalizedText")||e.text()).toUpperCase().includes(o[3].toUpperCase())},y.expr[":"].aibegins=function(e,t,o){e=y(e);return(e.data("tokens")||e.data("normalizedText")||e.text()).toUpperCase().startsWith(o[3].toUpperCase())};function l(e,t,o){o&&(o.stopPropagation(),o.preventDefault()),this.$element=y(e),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=t,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=l.prototype.val,this.render=l.prototype.render,this.refresh=l.prototype.refresh,this.setStyle=l.prototype.setStyle,this.selectAll=l.prototype.selectAll,this.deselectAll=l.prototype.deselectAll,this.destroy=l.prototype.remove,this.remove=l.prototype.remove,this.show=l.prototype.show,this.hide=l.prototype.hide,this.init()}l.VERSION="1.7.2",l.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1},l.prototype={constructor:l,init:function(){var t=this,e=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),void 0!==e&&(this.$button.attr("data-id",e),y('label[for="'+e+'"]').click(function(e){e.preventDefault(),t.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on("hide.bs.dropdown",function(e){t.$element.trigger("hide.bs.select",e)}),this.$newElement.on("hidden.bs.dropdown",function(e){t.$element.trigger("hidden.bs.select",e)}),this.$newElement.on("show.bs.dropdown",function(e){t.$element.trigger("show.bs.select",e)}),this.$newElement.on("shown.bs.dropdown",function(e){t.$element.trigger("shown.bs.select",e)}),setTimeout(function(){t.$element.trigger("loaded.bs.select")})},createDropdown:function(){var e=this.multiple?" show-tick":"",t=this.$element.parent().hasClass("input-group")?" input-group-btn":"",o=this.autofocus?" autofocus":"",i=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",a=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+r(this.options.liveSearchPlaceholder)+'"')+"></div>":"",n=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",s=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",e='<div class="btn-group bootstrap-select'+e+t+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+o+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+i+a+n+'<ul class="dropdown-menu inner" role="menu"></ul>'+s+"</div></div>";return y(e)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul")[0].innerHTML=t,e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$menuInner[0].innerHTML=e},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){function l(e,t,o,i){return"<li"+(void 0!==o&""!==o?' class="'+o+'"':"")+(void 0!==t&null!==t?' data-original-index="'+t+'"':"")+(void 0!==i&null!==i?'data-optgroup="'+i+'"':"")+">"+e+"</li>"}function c(e,t,o,i){return'<a tabindex="0"'+(void 0!==t?' class="'+t+'"':"")+(void 0!==o?' style="'+o+'"':"")+(p.options.liveSearchNormalize?' data-normalized-text="'+g(r(e))+'"':"")+(void 0!==i||null!==i?' data-tokens="'+i+'"':"")+">"+e+'<span class="'+p.options.iconBase+" "+p.options.tickIcon+' check-mark"></span></a>'}var e,p=this,h=[],u=0,t=document.createElement("option"),m=-1;return!this.options.title||this.multiple||(m--,this.$element.find(".bs-title-option").length)||(e=this.$element[0],t.className="bs-title-option",t.appendChild(document.createTextNode(this.options.title)),t.value="",e.insertBefore(t,e.firstChild),void 0===y(e.options[e.selectedIndex]).attr("selected")&&(t.selected=!0)),this.$element.find("option").each(function(e){var t,o,i,a,n,s,r,d=y(this);m++,d.hasClass("bs-title-option")||(t=this.className||"",o=this.style.cssText,i=d.data("content")?d.data("content"):d.html(),a=d.data("tokens")?d.data("tokens"):null,s=void 0!==d.data("subtext")?'<small class="text-muted">'+d.data("subtext")+"</small>":"",r=void 0!==d.data("icon")?'<span class="'+p.options.iconBase+" "+d.data("icon")+'"></span> ':"",n=this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled,""!==r&&n&&(r="<span>"+r+"</span>"),p.options.hideDisabled&&n?m--:(d.data("content")||(i=r+'<span class="text">'+i+s+"</span>"),"OPTGROUP"===this.parentElement.tagName&&!0!==d.data("divider")?(n=" "+this.parentElement.className||"",0===d.index()&&(u+=1,r=this.parentElement.label,s=void 0!==d.parent().data("subtext")?'<small class="text-muted">'+d.parent().data("subtext")+"</small>":"",r=(d.parent().data("icon")?'<span class="'+p.options.iconBase+" "+d.parent().data("icon")+'"></span> ':"")+'<span class="text">'+r+s+"</span>",0!==e&&0<h.length&&(m++,h.push(l("",null,"divider",u+"div"))),m++,h.push(l(r,null,"dropdown-header"+n,u))),h.push(l(c(i,"opt "+t+n,o,a),e,"",u))):!0===d.data("divider")?h.push(l("",e,"divider")):!0===d.data("hidden")?h.push(l(c(i,t,o,a),e,"hidden is-hidden")):(this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName&&(m++,h.push(l("",null,"divider",u+"div"))),h.push(l(c(i,t,o,a),e))),p.liObj[e]=m))}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),h.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(e){var t,i=this,e=(!1!==e&&this.$element.find("option").each(function(e){var t=i.findLis().eq(i.liObj[e]);i.setDisabled(e,this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled,t),i.setSelected(e,this.selected,t)}),this.tabIndex(),this.$element.find("option").map(function(){var e,t,o;if(this.selected)return(!i.options.hideDisabled||!(this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled))&&(t=(e=y(this)).data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+e.data("icon")+'"></i> ':"",o=i.options.showSubtext&&e.data("subtext")&&!i.multiple?' <small class="text-muted">'+e.data("subtext")+"</small>":"",void 0!==e.attr("title")?e.attr("title"):e.data("content")&&i.options.showContent?e.data("content"):t+e.html()+o)}).toArray()),o=this.multiple?e.join(this.options.multipleSeparator):e[0];this.multiple&&-1<this.options.selectedTextFormat.indexOf("count")&&(1<(t=this.options.selectedTextFormat.split(">")).length&&e.length>t[1]||1==t.length&&2<=e.length)&&(t=this.options.hideDisabled?", [disabled]":"",t=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+t).length,o=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(e.length,t):this.options.countSelectedText).replace("{0}",e.length.toString()).replace("{1}",t.toString())),null==this.options.title&&(this.options.title=this.$element.attr("title")),o=(o="static"==this.options.selectedTextFormat?this.options.title:o)||(void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",y.trim(o.replace(/<[^>]*>?/g,""))),this.$button.children(".filter-option").html(o),this.$element.trigger("rendered.bs.select")},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));e=e||this.options.style;"add"==t?this.$button.addClass(e):"remove"==t?this.$button.removeClass(e):(this.$button.removeClass(this.options.style),this.$button.addClass(e))},liHeight:function(e){var t,o,i,a,n,s,r,d,l,c;(e||!1!==this.options.size&&!this.sizeInfo)&&(e=document.createElement("div"),c=document.createElement("div"),i=document.createElement("ul"),l=document.createElement("li"),t=document.createElement("li"),a=document.createElement("a"),o=document.createElement("span"),n=this.options.header?this.$menu.find(".popover-title")[0].cloneNode(!0):null,s=this.options.liveSearch?document.createElement("div"):null,r=this.options.actionsBox&&this.multiple?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,d=this.options.doneButton&&this.multiple?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,o.className="text",e.className=this.$menu[0].parentNode.className+" open",c.className="dropdown-menu open",i.className="dropdown-menu inner",l.className="divider",o.appendChild(document.createTextNode("Inner text")),a.appendChild(o),t.appendChild(a),i.appendChild(t),i.appendChild(l),n&&c.appendChild(n),s&&(o=document.createElement("span"),s.className="bs-searchbox",o.className="form-control",s.appendChild(o),c.appendChild(s)),r&&c.appendChild(r),c.appendChild(i),d&&c.appendChild(d),e.appendChild(c),document.body.appendChild(e),t=a.offsetHeight,o=n?n.offsetHeight:0,i=s?s.offsetHeight:0,a=r?r.offsetHeight:0,n=d?d.offsetHeight:0,s=y(l).outerHeight(!0),d=(r="function"==typeof getComputedStyle&&getComputedStyle(c))?null:y(c),c=(l=parseInt(r?r.paddingTop:d.css("paddingTop"))+parseInt(r?r.paddingBottom:d.css("paddingBottom"))+parseInt(r?r.borderTopWidth:d.css("borderTopWidth"))+parseInt(r?r.borderBottomWidth:d.css("borderBottomWidth")))+parseInt(r?r.marginTop:d.css("marginTop"))+parseInt(r?r.marginBottom:d.css("marginBottom"))+2,document.body.removeChild(e),this.sizeInfo={liHeight:t,headerHeight:o,searchHeight:i,actionsHeight:a,doneButtonHeight:n,dividerHeight:s,menuPadding:l,menuExtras:c})},setSize:function(){var i,a,n,s,r,e,t,d,l,c,p,h,o,u,m,g,f,b,v,w;this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size&&(s=(n=this).$menu,r=this.$menuInner,e=y(window),t=this.$newElement[0].offsetHeight,d=this.sizeInfo.liHeight,l=this.sizeInfo.headerHeight,c=this.sizeInfo.searchHeight,p=this.sizeInfo.actionsHeight,h=this.sizeInfo.doneButtonHeight,o=this.sizeInfo.dividerHeight,u=this.sizeInfo.menuPadding,m=this.sizeInfo.menuExtras,b=this.options.hideDisabled?".disabled":"",(g=function(){i=n.$newElement.offset().top-e.scrollTop(),a=e.height()-i-t})(),"auto"===this.options.size?((f=function(){function e(t,o){return function(e){return o?e.classList?e.classList.contains(t):y(e).hasClass(t):!(e.classList?e.classList.contains(t):y(e).hasClass(t))}}var t=n.$menuInner[0].getElementsByTagName("li"),t=Array.prototype.filter?Array.prototype.filter.call(t,e("hidden",!1)):n.$lis.not(".hidden"),o=Array.prototype.filter?Array.prototype.filter.call(t,e("dropdown-header",!0)):t.filter(".dropdown-header");g(),v=a-m,w=n.options.container?(s.data("height")||s.data("height",s.height()),s.data("height")):s.height(),n.options.dropupAuto&&n.$newElement.toggleClass("dropup",a<i&&v-m<w),n.$newElement.hasClass("dropup")&&(v=i-m),t=3<t.length+o.length?3*d+m-2:0,s.css({"max-height":v+"px",overflow:"hidden","min-height":t+l+c+p+h+"px"}),r.css({"max-height":v-l-c-p-h-u+"px","overflow-y":"auto","min-height":Math.max(t-u,0)+"px"})})(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",f),e.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",f)):this.options.size&&"auto"!=this.options.size&&this.$lis.not(b).length>this.options.size&&(f=this.$lis.not(".divider").not(b).children().slice(0,this.options.size).last().parent().index(),b=this.$lis.slice(0,f+1).filter(".divider").length,v=d*this.options.size+b*o+u,w=n.options.container?(s.data("height")||s.data("height",s.height()),s.data("height")):s.height(),n.options.dropupAuto&&this.$newElement.toggleClass("dropup",a<i&&v-m<w),s.css({"max-height":v+l+c+p+h+"px",overflow:"hidden","min-height":""}),r.css({"max-height":v-u+"px","overflow-y":"auto","min-height":""})))},setWidth:function(){var e,t,o,i;"auto"===this.options.width?(this.$menu.css("min-width","0"),e=this.$menu.parent().clone().appendTo("body"),t=this.options.container?this.$newElement.clone().appendTo("body"):e,o=e.children(".dropdown-menu").outerWidth(),i=t.css("width","auto").children("button").outerWidth(),e.remove(),t.remove(),this.$newElement.css("width",Math.max(o,i)+"px")):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){function e(e){a.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),o=e.hasClass("dropup")?0:e[0].offsetHeight,a.css({top:t.top+o,left:t.left,width:e[0].offsetWidth,position:"absolute"})}var t,o,i=this,a=y("<div />");this.$newElement.on("click",function(){i.isDisabled()||(e(y(this)),a.appendTo(i.options.container),a.toggleClass("open",!y(this).hasClass("open")),a.append(i.$menu))}),y(window).on("resize scroll",function(){e(i.$newElement)}),this.$element.on("hide.bs.select",function(){i.$menu.data("height",i.$menu.height()),a.detach()})},setSelected:function(e,t,o){(o=o||this.findLis().eq(this.liObj[e])).toggleClass("selected",t)},setDisabled:function(e,t,o){o=o||this.findLis().eq(this.liObj[e]),t?o.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):o.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled")),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!e.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var m=this,t=y(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),t.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&t.data("spaceSelect")&&(e.preventDefault(),t.data("spaceSelect",!1))}),this.$newElement.on("click",function(){m.setSize(),m.$element.on("shown.bs.select",function(){var e;m.options.liveSearch||m.multiple?m.multiple||"number"==typeof(e=m.liObj[m.$element[0].selectedIndex])&&!1!==m.options.size&&(e=(e=m.$lis.eq(e)[0].offsetTop-m.$menuInner[0].offsetTop)-m.$menuInner[0].offsetHeight/2+m.sizeInfo.liHeight/2,m.$menuInner[0].scrollTop=e):m.$menu.find(".selected a").focus()})}),this.$menu.on("click","li a",function(e){var t,o,i,a,n,s,r,d,l,c=y(this),p=c.parent().data("originalIndex"),h=m.$element.val(),u=m.$element.prop("selectedIndex");m.multiple&&e.stopPropagation(),e.preventDefault(),!m.isDisabled()&&!c.parent().hasClass("disabled")&&(o=(t=(e=m.$element.find("option")).eq(p)).prop("selected"),r=t.parent("optgroup"),i=m.options.maxOptions,a=r.data("maxOptions")||!1,m.multiple?(t.prop("selected",!o),m.setSelected(p,!o),c.blur(),(!1!==i||!1!==a)&&(n=i<e.filter(":selected").length,s=a<r.find("option:selected").length,i&&n||a&&s)&&(i&&1==i?(e.prop("selected",!1),t.prop("selected",!0),m.$menu.find(".selected").removeClass("selected"),m.setSelected(p,!0)):a&&1==a?(r.find("option:selected").prop("selected",!1),t.prop("selected",!0),r=c.parent().data("optgroup"),m.$menu.find('[data-optgroup="'+r+'"]').removeClass("selected"),m.setSelected(p,!0)):(r=(c="function"==typeof m.options.maxOptionsText?m.options.maxOptionsText(i,a):m.options.maxOptionsText)[0].replace("{n}",i),d=c[1].replace("{n}",a),l=y('<div class="notify"></div>'),c[2]&&(r=r.replace("{var}",c[2][1<i?0:1]),d=d.replace("{var}",c[2][1<a?0:1])),t.prop("selected",!1),m.$menu.append(l),i&&n&&(l.append(y("<div>"+r+"</div>")),m.$element.trigger("maxReached.bs.select")),a&&s&&(l.append(y("<div>"+d+"</div>")),m.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){m.setSelected(p,!1)},10),l.delay(750).fadeOut(300,function(){y(this).remove()})))):(e.prop("selected",!1),t.prop("selected",!0),m.$menu.find(".selected").removeClass("selected"),m.setSelected(p,!0)),m.multiple?m.options.liveSearch&&m.$searchbox.focus():m.$button.focus(),h!=m.$element.val()&&m.multiple||u!=m.$element.prop("selectedIndex")&&!m.multiple)&&(m.$element.triggerNative("change"),m.$element.trigger("changed.bs.select",[p,t.prop("selected"),o]))}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(e){e.currentTarget==this&&(e.preventDefault(),e.stopPropagation(),(m.options.liveSearch&&!y(e.target).hasClass("close")?m.$searchbox:m.$button).focus())}),this.$menu.on("click","li.divider, li.dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),(m.options.liveSearch?m.$searchbox:m.$button).focus()}),this.$menu.on("click",".popover-title .close",function(){m.$button.click()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(e){(m.options.liveSearch?m.$searchbox:m.$button).focus(),e.preventDefault(),e.stopPropagation(),y(this).hasClass("bs-select-all")?m.selectAll():m.deselectAll(),m.$element.triggerNative("change")}),this.$element.change(function(){m.render(!1)})},liveSearchListener:function(){var i=this,t=y('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){i.$menuInner.find(".active").removeClass("active"),i.$searchbox.val()&&(i.$searchbox.val(""),i.$lis.not(".is-hidden").removeClass("hidden"),t.parent().length)&&t.remove(),i.multiple||i.$menuInner.find(".selected").addClass("active"),setTimeout(function(){i.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var e,o;i.$searchbox.val()?(e=i.$lis.not(".is-hidden").removeClass("hidden").children("a"),(e=i.options.liveSearchNormalize?e.not(":a"+i._searchStyle()+'("'+g(i.$searchbox.val())+'")'):e.not(":"+i._searchStyle()+'("'+i.$searchbox.val()+'")')).parent().addClass("hidden"),i.$lis.filter(".dropdown-header").each(function(){var e=y(this),t=e.data("optgroup");0===i.$lis.filter("[data-optgroup="+t+"]").not(e).not(".hidden").length&&(e.addClass("hidden"),i.$lis.filter("[data-optgroup="+t+"div]").addClass("hidden"))}),(o=i.$lis.not(".hidden")).each(function(e){var t=y(this);t.hasClass("divider")&&(t.index()===o.eq(0).index()||t.index()===o.last().index()||o.eq(e+1).hasClass("divider"))&&t.addClass("hidden")}),i.$lis.not(".hidden, .no-results").length?t.parent().length&&t.remove():(t.parent().length&&t.remove(),t.html(i.options.noneResultsText.replace("{0}",'"'+r(i.$searchbox.val())+'"')).show(),i.$menuInner.append(t))):(i.$lis.not(".is-hidden").removeClass("hidden"),t.parent().length&&t.remove()),i.$lis.filter(".active").removeClass("active"),i.$searchbox.val()&&i.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus(),y(this).focus()})},_searchStyle:function(){var e="icontains";switch(this.options.liveSearchStyle){case"begins":case"startsWith":e="ibegins"}return e},val:function(e){return void 0!==e?(this.$element.val(e),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!0),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").addClass("selected"),this.render(!1)},deselectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!1),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").removeClass("selected"),this.render(!1)},keydown:function(e){var t,o,i,a,n,s,r,d,l=y(this),c=(l.is("input")?l.parent():l).parent(),p=c.data("this"),h=":not(.disabled, .hidden, .dropdown-header, .divider)",u={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};p.options.liveSearch&&(c=l.parent().parent()),p.options.container&&(c=p.$menu),t=y("[role=menu] li a",c),!(s=p.$menu.parent().hasClass("open"))&&(48<=e.keyCode&&e.keyCode<=57||65<=e.keyCode&&e.keyCode<=90)&&(p.options.container?p.$newElement.trigger("click"):(p.setSize(),p.$menu.parent().addClass("open"),s=!0),p.$searchbox.focus()),p.options.liveSearch&&(/(^9$|27)/.test(e.keyCode.toString(10))&&s&&0===p.$menu.find(".active").length&&(e.preventDefault(),p.$menu.parent().removeClass("open"),p.options.container&&p.$newElement.removeClass("open"),p.$button.focus()),t=y("[role=menu] li:not(.disabled, .hidden, .dropdown-header, .divider)",c),l.val()||/(38|40)/.test(e.keyCode.toString(10))||0===t.filter(".active").length&&(t=p.$newElement.find("li"),t=p.options.liveSearchNormalize?t.filter(":a"+p._searchStyle()+"("+g(u[e.keyCode])+")"):t.filter(":"+p._searchStyle()+"("+u[e.keyCode]+")"))),t.length&&(/(38|40)/.test(e.keyCode.toString(10))?(c=t.index(t.filter(":focus")),i=t.parent(h).first().data("originalIndex"),a=t.parent(h).last().data("originalIndex"),o=t.eq(c).parent().nextAll(h).eq(0).data("originalIndex"),r=t.eq(c).parent().prevAll(h).eq(0).data("originalIndex"),h=t.eq(o).parent().prevAll(h).eq(0).data("originalIndex"),p.options.liveSearch&&(t.each(function(e){y(this).hasClass("disabled")||y(this).data("index",e)}),c=t.index(t.filter(".active")),i=t.first().data("index"),a=t.last().data("index"),o=t.eq(c).nextAll().eq(0).data("index"),r=t.eq(c).prevAll().eq(0).data("index"),h=t.eq(o).prevAll().eq(0).data("index")),n=l.data("prevIndex"),38==e.keyCode?(p.options.liveSearch&&--c,(c=(c=c!=h&&r<c?r:c)<i?i:c)==n&&(c=a)):40==e.keyCode&&(p.options.liveSearch&&(c+=1),(c=a<(c=(c=-1==c?0:c)!=h&&c<o?o:c)?a:c)==n)&&(c=i),l.data("prevIndex",c),p.options.liveSearch?(e.preventDefault(),l.hasClass("dropdown-toggle")||(t.removeClass("active").eq(c).addClass("active").children("a").focus(),l.focus())):t.eq(c).focus()):l.is("input")||(d=[],t.each(function(){y(this).parent().hasClass("disabled")||y.trim(y(this).text().toLowerCase()).substring(0,1)==u[e.keyCode]&&d.push(y(this).parent().index())}),r=y(document).data("keycount"),r++,y(document).data("keycount",r),y.trim(y(":focus").text().toLowerCase()).substring(0,1)!=u[e.keyCode]?(r=1,y(document).data("keycount",r)):d.length<=r&&(y(document).data("keycount",0),d.length<r)&&(r=1),t.eq(d[r-1]).focus()),(/(13|32)/.test(e.keyCode.toString(10))||/(^9$)/.test(e.keyCode.toString(10))&&p.options.selectOnTab)&&s&&(/(32)/.test(e.keyCode.toString(10))||e.preventDefault(),p.options.liveSearch?/(32)/.test(e.keyCode.toString(10))||(p.$menu.find(".active a").click(),l.focus()):((h=y(":focus")).click(),h.focus(),e.preventDefault(),y(document).data("spaceSelect",!0)),y(document).data("keycount",0)),/(^9$|27)/.test(e.keyCode.toString(10))&&s&&(p.multiple||p.options.liveSearch)||/(27)/.test(e.keyCode.toString(10))&&!s)&&(p.$menu.parent().removeClass("open"),p.options.container&&p.$newElement.removeClass("open"),p.$button.focus())},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.liObj={},this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()}};var a=y.fn.selectpicker;y.fn.selectpicker=t,y.fn.selectpicker.Constructor=l,y.fn.selectpicker.noConflict=function(){return y.fn.selectpicker=a,this},y(document).data("keycount",0).on("keydown",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',l.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',function(e){e.stopPropagation()}),y(window).on("load.bs.select.data-api",function(){y(".selectpicker").each(function(){var e=y(this);t.call(e,e.data())})})}(jQuery)});var displayCategory={AllCategory:1,FavouriteItems:2,PublicItems:3,RecentItems:4,AllDashboards:5,PublicWidgets:6,AllWidgets:7,AllReports:8,DraftItems:9,OwnedByMe:10,SharedWithMe:11,UsageAnalytics:12,SpecificCategory:100},defaultSkipDashboardCount=0,defaultTakeDashboardCount=50,skipDashboardCount=defaultSkipDashboardCount,isVirtualRequested=!1,searchValue="";function toggleFavorite(t,e){t.IsFavorite=!t.IsFavorite,e({method:"post",url:favoriteItemUrl,data:$.param({itemId:t.Id,favoriteValue:t.IsFavorite})}).then(function(e){e.data.Success||(t.IsFavorite=!t.IsFavorite,warningToast(window.Server.App.Localization.InternalServerError))},function(){warningToast(window.Server.App.Localization.InternalServerError)})}function refreshCategoryScroll(){$(".tooltip").tooltip("hide");var e=($("#header-area").is(":visible")?$("#header-area").outerHeight():0)+($(".mobile-header").is(":visible")?$(".mobile-header").outerHeight():0),e=$(window).outerHeight()-(e+$(".category-bar-ul").outerHeight()+$(".category-search-area").outerHeight(!0)),t=($("#parent-category-scroll-element").ejScroller({height:e,width:"100%",scrollerSize:7,buttonSize:0,enableTouchScroll:!0,autoHide:!0,scrollOneStepBy:30,scroll:function(){$(".tooltip").tooltip("hide")}}),$("#parent-category-scroll-element").ejScroller("instance"));t.model.height=e,t.refresh(),$("#parent-category-scroll-element .e-scrollbar").show(),refreshToolTip("category-list-tooltip")}function refreshDashboardScroll(){$(".tooltip").tooltip("hide");var e=($("#header-area").is(":visible")?$("#header-area").outerHeight():0)+($(".mobile-header").is(":visible")?$(".mobile-header").outerHeight():18),e=$(window).outerHeight()-(e+$(".dashboard-action-container").outerHeight()+$(".dashboard-list-separator").outerHeight(!0)+$(".dashboard-list-header").outerHeight()),t=$(window).innerWidth()-((window.innerWidth<=1040?0:$("#menu-area").outerWidth())+($("#category-panel").is(":visible")?$("#category-panel").outerWidth():0)+31),o=($("#parent-dashboard-scroll-element").ejScroller({height:e,width:"100%",scrollerSize:7,buttonSize:0,enableTouchScroll:!0,autoHide:!0,scrollOneStepBy:40,scroll:"onDashboardScrolling"}),$("#parent-dashboard-scroll-element").ejScroller("instance"));o.model.height=e,o.model.width=t,o.refresh(),$("#parent-dashboard-scroll-element .e-scrollbar").show()}function onDashboardScrolling(e){$(".tooltip").tooltip("hide");var t=$("#parent-dashboard-scroll-element").ejScroller("instance");t&&(scrollerPositon=e.scrollTop,document.querySelectorAll("#dashboard-scroll-content")[0].scrollHeight-(e.scrollTop+5)<=t.option("height"))&&(e=angular.element("[ng-controller=DashboardCtrl]").scope()).totalDashboardCount>skipDashboardCount+defaultTakeDashboardCount&&!isVirtualRequested&&(e.isAppendLoading=!0,isVirtualRequested=!0,updateFilterParameter(void 0,skip=skipDashboardCount+defaultTakeDashboardCount,void 0,e.dashboardSearchQuery,void 0,void 0),e.refreshDashboardList(!0))}function updateFilterParameter(e,t,o,i,a,n){null==t&&(t=defaultSkipDashboardCount),null==o&&(o=defaultTakeDashboardCount),null==i&&(i="");var s=angular.element("[ng-controller=DashboardCtrl]").scope();skipDashboardCount=t,null!=s.filterParameter?(null!=e&&(s.filterParameter.displayCategory=e),null!=t&&(s.filterParameter.skip=t),null!=o&&(s.filterParameter.take=o),null!=i&&(s.filterParameter.searchKey=i),null!=a&&(s.filterParameter.filterCollection=a),null!=n&&(s.filterParameter.sorted=n)):(s.filterParameter={displayCategory:e,requiresCounts:!0,skip:t,take:o,searchKey:i},s.filterParameter.filterCollection=a)}function ResetItemList(e){var t=angular.element("[ng-controller=DashboardCtrl]").scope();e==ItemType.Dashboard?t.refreshDashboardList():0!=dashboardItemCount&&t.refreshCategoryList()}function RefreshCategorySection(e){angular.element("[ng-controller=DashboardCtrl]").scope().refreshCategoryList(e)}function historyPush(){var e=angular.element("[ng-controller=DashboardCtrl]").scope(),t="";switch(e.filterParameter.displayCategory){case displayCategory.AllDashboards:t+="view=all";break;case displayCategory.FavouriteItems:t+="view=favorites";break;case displayCategory.PublicItems:t+="view=public";break;case displayCategory.OwnedByMe:t+="view=owned";break;case displayCategory.SharedWithMe:t+="view=shared";break;case displayCategory.DraftItems:t+="view=drafts";break;case displayCategory.UsageAnalytics:t+="view=Usage Analytics",encodeURI(t)}var o="",e=(null!=e.filterParameter.filterCollection&&0!=e.filterParameter.filterCollection&&null!=e.filterParameter.filterCollection[0].FilterKey&&(o+="category="+e.filterParameter.filterCollection[0].FilterKey),"");isNullOrWhitespace(o)?isNullOrWhitespace(t)||(e+="?"+t):(e+="?"+o,isNullOrWhitespace(t)||(e+="&"+t)),isNullOrWhitespace(e)||(o=window.location.pathname+e,window.location.pathname+window.location.search!=o&&1041<=window.innerWidth&&null!=history.pushState&&""!=o&&history.pushState({},"",o))}function applyRouting(){var e=angular.element("[ng-controller=DashboardCtrl]").scope(),t=(e.activeMenu=displayCategory.AllDashboards,e.activeMenuLabel=window.Server.App.Localization.AllDashboardInCategory,e.selectedFilter=displayCategory.AllDashboards,e.selectedFilterLabel=window.Server.App.Localization.All,decodeURI(getQueryVariable("view")));if(!isEmptyOrWhitespace(t)){switch(t.toLowerCase()){case"favorites":e.selectedFilter=displayCategory.FavouriteItems,e.selectedFilterLabel=window.Server.App.Localization.Favorites;break;case"public":e.selectedFilter=displayCategory.PublicItems,e.selectedFilterLabel=window.Server.App.Localization.Public;break;case"owned":e.selectedFilter=displayCategory.OwnedByMe,e.selectedFilterLabel=window.Server.App.Localization.OwnedByMe;break;case"shared":e.selectedFilter=displayCategory.SharedWithMe,e.selectedFilterLabel=window.Server.App.Localization.SharedWithMe;break;case"drafts":e.activeMenu=displayCategory.DraftItems,e.activeMenuLabel=window.Server.App.Localization.Drafts,e.selectedFilter=displayCategory.DraftItems;break;case"usage analytics":e.activeMenu=displayCategory.UsageAnalytics,e.activeMenuLabel=window.Server.App.Localization.UsageAnalytics,e.selectedFilter=displayCategory.UsageAnalytics;break;case"categories":e.expand=!0}updateFilterParameter(e.selectedFilter,void 0,void 0,e.dashboardSearchQuery,0,e.customSort)}var o=decodeURI(getQueryVariable("category"));isEmptyOrWhitespace(o)||(e.expand=!0,null!=e.categoryList&&(null!=(t=e.categoryList.filter(function(e){return e.Name.toLowerCase()===o.toLowerCase()})[0])&&null!=t.Id&&null!=t.Name?(e.activeMenu=t.Id,e.activeMenuLabel=t.Name,e.categoryCreatedBy=t.CreatedByDisplayName,t=[{PropertyName:"CategoryName",FilterType:"equal",FilterKey:t.Name}],updateFilterParameter(e.selectedFilter,void 0,void 0,void 0,t,e.customSort)):updateFilterParameter(e.selectedFilter,void 0,void 0,void 0,0)))}function setCategorySection(t){var e=angular.element("[ng-controller=DashboardCtrl]").scope(),o=e.categoryList.filter(function(e){return e.Id==t})[0];null!=o&&(e.activeMenu=t,e.activeMenuLabel=o.Name,e.categoryCreatedBy=o.CreatedByDisplayName,o=[{PropertyName:"CategoryName",FilterType:"equal",FilterKey:o.Name}],updateFilterParameter(e.selectedFilter,void 0,void 0,void 0,o),e.refreshDashboardList(),e.refreshCategoryScroll())}function refreshCustomUI(){$("#dashboard-rendering-iframe, #dashboard-rendering").css("width",$("#content-area").width()-330)}function onUploadStatusDialogOpen(e){ejs.popups.createSpinner({target:document.getElementById("server-app-container")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("server-app-container")),$("#upload-popup-iframe").attr("src",uploadIframeUrl+"?itemId="+e)}$(document).on("touchend","[data-toggle='dashboard-list-tooltip']",function(e){(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))&&$(this).click()}),$(document).ready(function(){intializeGetLinkDialog(),0===parseInt(dashboardItemCount)&&$(".preloader-wrap").fadeOut(),$(window).resize(function(){window.innerWidth<768?$("#menu-area").addClass("collapse"):$("#menu-area").removeClass("collapse")})}),serverApp.controller("DashboardCtrl",["$scope","$http","$timeout","$window","ajaxService",function(i,e,o,t,a){i.activeMenu=displayCategory.AllDashboards,i.activeMenuLabel=window.Server.App.Localization.AllDashboardInCategory,i.customSort=sortOption,i.selectedSort=sortOption[0].Name,i.sortDirection=sortOption[0].Direction,""!=searchKey&&(searchValue="datasource:"+searchKey,$("#dashboard-search-items").val(searchValue)),i.dashboardSearchQuery=""!=searchValue?searchValue:"",i.selectedSortLabel="ModifiedDate"==sortOption[0].Name?window.Server.App.Localization.RecentlyUpdated:"ascending"==sortOption[0].Direction?window.Server.App.Localization.SortNameAscending:window.Server.App.Localization.SortNameDescending,i.selectedFilter=displayCategory.AllDashboards,i.selectedFilterLabel=window.Server.App.Localization.All,i.canCreateDashboard="undefined"!=typeof canCreateDashboard&&canCreateDashboard,i.currentUserId=currentUserId,i.isAdmin=isAdmin,i.isMarkItemsPublic=isMarkItemsPublic,i.isMaster=isMaster,i.isSelfHosted=isSelfHosted,i.enableCloneDashboard=enableCloneDashboard,i.isAppendLoading=!1,i.isUserBasedMenu=isUserBasedMenu,i.enablePublishModule=enablePublishModule,i.hasScheduleCreatePermission=userPermissionItem.Schedule,i.scheduleItemExist=0<allItemsCount.Schedule;var n=null!=window.granularPermissions&&(window.granularPermissions.All||window.granularPermissions.DashboardSettings),s=null!=window.granularPermissions&&window.granularPermissions.Dashboard;i.hasDashboardSettingsPermission=isAdmin||n,i.hasDashboardSharePermission=isAdmin||s,i.expandCatSec=!1,updateFilterParameter(i.selectedFilter,void 0,void 0,i.dashboardSearchQuery,0,i.customSort),i.isTablet=window.innerWidth<=1040,i.isMobile=window.innerWidth<=768,i.samePagePreview=samePagePreview,i.hideAuthorName=hideAuthorName,i.hideMultitabText=hideMultitabText,i.hideSortOption=hideSortOption,i.schemesDetails=schemesDetails,i.usageAnalytics=usageAnalytics,i.getDashboardEmbedCode=getDashboardEmbedCode,i.setActive=function(e,t,o){o.preventDefault(),i.dashboardSearchQuery="",i.selectedFilter=i.selectedFilter!=displayCategory.DraftItems&&i.selectedFilter!=displayCategory.UsageAnalytics?i.selectedFilter:displayCategory.AllDashboards,i.expandCatSec=!1,null!=$(this)[0].categoryItem?($(o.target).hasClass("category-name")||$(o.target).hasClass("category-count"))&&(i.activeMenu=e,i.activeMenuLabel=t,i.categoryCreatedBy=$(this)[0].categoryItem.CreatedByDisplayName,o=[{PropertyName:"CategoryName",FilterType:"equal",FilterKey:$(this)[0].categoryItem.Name}],updateFilterParameter(i.selectedFilter,void 0,void 0,void 0,o,i.customSort),i.refreshDashboardList()):(i.activeMenu=e,i.activeMenuLabel=t,i.categoryCreatedBy="",e==displayCategory.DraftItems?updateFilterParameter(displayCategory.DraftItems,void 0,void 0,void 0,0,i.customSort):e==displayCategory.UsageAnalytics?updateFilterParameter(displayCategory.UsageAnalytics,void 0,void 0,void 0,0,i.customSort):updateFilterParameter(i.selectedFilter,void 0,void 0,void 0,0),i.refreshDashboardList(),$(".preloader-wrap").fadeOut()),historyPush()},i.setSelectedSort=function(e,t,o){i.selectedSort=t,i.sortDirection=o,i.selectedSortLabel=e.target.textContent;o=[{Name:t,Direction:i.sortDirection}];updateFilterParameter(void 0,void 0,void 0,i.dashboardSearchQuery,void 0,o),i.refreshDashboardList()},i.setSelectedFilter=function(e,t){i.selectedFilter=t,i.selectedFilterLabel=e.target.textContent,updateFilterParameter(t,void 0,void 0,i.dashboardSearchQuery,void 0,void 0,i.customSort),i.refreshDashboardList(),historyPush()},i.dashboardDataBindComplete=!1,i.doDashboardComplete=function(){var e;i.dashboardDataBindComplete=!0,i.isAppendLoading=!1,o(function(){refreshToolTip("dashboard-list-tooltip"),refreshDashboardScroll()},100),void 0!==$("#dashboard-rendering-iframe").attr("src")||$(this)[0].dashboardItem.IsDraft||i.isMobile||($("#dashboard-rendering").show(),e=viewDashboardUrlAction+"/"+$(this)[0].dashboardList[0].Id+"/"+$(this)[0].dashboardList[0].CategoryName+"/"+$(this)[0].dashboardList[0].Name,$("#dashboard-rendering-iframe, #dashboard-rendering").css("width",$("#content-area").width()-330),$("#dashboard-rendering-iframe").attr("src",encodeURI(e)),$(".dashboard-list-section li:first-child").addClass("active")),$(".preloader-wrap").fadeOut()},i.categoryDataBindComplete=!1,i.doCategoryComplete=function(){i.categoryDataBindComplete=!0,o(function(){refreshToolTip("category-list-tooltip"),i.refreshCategoryScroll()},100)},i.toggleFavorite=function(){toggleFavorite($(this)[0].dashboardItem,e)},i.preventDefault=function(e){i.samePagePreview&&!i.isMobile&&(e.preventDefault(),e=viewDashboardUrlAction+"/"+$(this)[0].dashboardItem.Id+"/"+$(this)[0].dashboardItem.CategoryName+"/"+$(this)[0].dashboardItem.Name,$("#dashboard-rendering-iframe").attr("src",encodeURI(e)))},i.expandCategoryList=function(){i.expand=!i.expand,i.refreshCategoryScroll()},i.viewDashboardUrl=function(e,t,o){var i=$("#dashboard-rendering-iframe").attr("src");return void 0!==i&&i.contains("/"+e+"/")&&!$(this)[0].dashboardItem.IsDraft&&$(".dashboard-tile").eq($(this)[0].$index).addClass("active"),encodeURI(viewDashboardUrlAction+"/"+e+"/"+t+"/"+o+"?showmydashboards=1")},i.editDraftDashboardUrl=function(e,t){return encodeURI(editDashboardUrl+"/"+e+"/draft/"+t)},i.doDashboardSearch=function(){updateFilterParameter(void 0,defaultSkipDashboardCount,defaultTakeDashboardCount,i.dashboardSearchQuery,void 0,void 0),i.dashboardDataBindComplete=!1,i.totalDashboardCount=0==i.totalDashboardCount?1:i.totalDashboardCount,a.getData(getItemUrl,$.param(i.filterParameter)).then(function(e){null!=e.count?(i.dashboardList=e.result,i.totalDashboardCount=e.count):warningToast(window.Server.App.Localization.ErrorGettingDashboard)})},i.onDashboardSearchClear=function(){i.dashboardSearchQuery="",i.doDashboardSearch(),o(function(){$("#dashboard-search-items").focus()},100)},i.onCategorySearchClear=function(){i.categorySearchQuery="",i.refreshCategoryScroll(),o(function(){$(".category-search-box").focus()},100)},i.refreshDashboardList=function(t){i.dashboardDataBindComplete=t,i.totalDashboardCount=0==i.totalDashboardCount?1:i.totalDashboardCount,t&&o(function(){refreshDashboardScroll()},1e3),a.getData(getItemUrl,$.param(i.filterParameter)).then(function(e){null!=e.count?(i.dashboardList=t?i.dashboardList.concat(e.result):e.result,i.totalDashboardCount=e.count,isVirtualRequested=!1):warningToast(window.Server.App.Localization.ErrorGettingDashboard),0==i.totalDashboardCount&&$(".preloader-wrap").fadeOut()})},i.refreshCategoryList=function(t){e({method:"post",url:getCategories,data:""}).then(function(e){i.categoryList=e.data;e=null!=window.granularPermissions&&window.granularPermissions.Category;i.hasCategorySharePermission=isAdmin||e,null!=t&&setCategorySection(t)},function(){warningToast(window.Server.App.Localization.ErrorGettingCategory)})},""!=categoryList&&0!=categoryList.length?(i.categoryList=categoryList,n=null!=window.granularPermissions&&window.granularPermissions.Category,i.hasCategorySharePermission=isAdmin||n):i.refreshCategoryList(),i.setWidthForDashboardName=function(){return i.activeMenu==displayCategory.AllDashboards?i.isTablet?i.isMobile?"col-xs-12":"col-xs-9":"col-xs-6":i.isTablet?"col-xs-12":"col-xs-8"},applyRouting(),i.refreshDashboardList(),angular.element(t).bind("resize",function(){i.isTablet=window.innerWidth<=1040,i.isMobile=window.innerWidth<=768,i.$apply(),refreshCategoryScroll(),refreshDashboardScroll(),refreshCustomUI()}),i.refreshCategoryScroll=function(){o(function(){refreshCategoryScroll()},1e3)},i.onMobileSearchClicked=function(){i.showSearch=!0,o(function(){$("#dashboard-search-items").focus()},100)},i.onSearchFocusOut=function(){i.isFocus=!1,(i.isTablet||i.samePagePreview)&&""==i.dashboardSearchQuery&&(i.showSearch=!1)},i.getItemSettingsDialog=function(){var e=$(this)[0].dashboardItem;$itemSettings=openItemSettingsDialog(e)},i.getPublishSiteDetailDialog=function(){var e=$(this)[0].dashboardItem;publishSiteDetailDialog(e)},i.openInfo=function(e){var t=angular.element("[ng-controller=ItemInfoCtrl]").scope(),o=i.activeMenu==displayCategory.UsageAnalytics;t.openInfoDialog($(this)[0].dashboardItem,!0,o)},i.openDashboard=function(e){!$(e.target.parentElement).hasClass("open-link")&&!$(e.target).hasClass("open-link")||$(e.target.parentElement).hasClass("context-menu")||$(e.target).hasClass("context-menu")||(e=$(this)[0].dashboardItem,e=viewDashboardUrlAction+"/"+e.Id+"/"+e.CategoryName+"/"+e.Name,window.open(e,"_blank"))},i.editDashboard=function(){var e=$(this)[0].dashboardItem;e.IsMultiDashboard?geteditSlideshowDetail(e.Id,!0):(e=editDashboardUrl+"/"+e.Id+"/"+e.CategoryName+"/"+e.Name,embedOpenPage(e))},i.editDraftDashboard=function(){var e=$(this)[0].dashboardItem;e.IsDraft&&e.IsUploadDraft?onUploadStatusDialogOpen(e.Id):(e=editDashboardUrl+"/"+e.Id+"/draft/"+e.Name,window.open(e,"_blank"))},i.makePublic=function(){makePublic($(this)[0].dashboardItem)},i.makePrivate=function(){makePrivate($(this)[0].dashboardItem)},i.getItemLink=function(){GetLink($(this)[0].dashboardItem)},i.getEmbedCode=function(){isGetEmbedCodeTriggered=!0,shareDashboardPermission($(this)[0].dashboardItem),getEmbedCode($(this)[0].dashboardItem)},i.getEmbedCodeFromContext=function(){isGetEmbedCodeTriggered=!0,shareDashboardPermission($(this)[0].dashboardItem),getEmbedCodeFromContext($(this)[0].dashboardItem)},i.getDashboardViews=function(e){getDashboardViews($(this)[0].dashboardItem,e.currentTarget.parentElement)},i.viewSchedules=function(){var e=$(this)[0].dashboardItem,e=viewSchedulesUrl+"?dashboard="+e.Name;embedOpenPage(e)},i.copyDashboard=function(){isMultiTab=!1,CopyDashboardItem($(this)[0].dashboardItem,"Copy",i.activeMenu===displayCategory.UsageAnalytics)},i.downloadDashboard=function(){isMultiTab=!1,DownloadDashboardItem($(this)[0].dashboardItem)},i.cloneDashboard=function(){isMultiTab=!1,CopyDashboardItem($(this)[0].dashboardItem,"Clone")},i.moveDashboard=function(){isMultiTab=!1,MoveDashboardItem($(this)[0].dashboardItem,"Move")},i.scheduleDashboard=function(){ScheduleDashboard($(this)[0].dashboardItem)},i.shareDashboardPermission=function(){shareDashboardPermission($(this)[0].dashboardItem)},i.sharePermission=function(){shareDashboardPermission($(this)[0].categoryItem)},i.versionHistory=function(){var e=$(this)[0].dashboardItem;VersionHistory(e.Id,e.Name,e.IsMultiDashboard)},i.updateDashboard=function(){EditDashboard($(this)[0].dashboardItem.Id)},i.updateDashboardDataSource=function(){UpdateDashboardDataSource($(this)[0].dashboardItem.Id)},i.deleteItem=function(){DeleteItem($(this)[0].dashboardItem)},i.editCategory=function(e){EditCategory($(this)[0].categoryItem.Id,$(this)[0].categoryItem.Name,$(this)[0].categoryItem.Description)},i.deleteCategory=function(){deleteCategory($(this)[0].categoryItem)},i.expandCategorySection=function(){i.expandCatSec=!i.expandCatSec,i.refreshCategoryScroll()}}]),serverApp.directive("myPostRepeatDirective",function(){return function(e,t,o){e.$last&&e.$eval("doDashboardComplete()")}}),serverApp.directive("categoryRepeatDirective",function(){return function(e,t,o){e.$last&&e.$eval("doCategoryComplete()")}}),serverApp.animation(".category-slide",function(){var i="ng-hide";return{beforeAddClass:function(e,t,o){t===i&&e.slideUp(o)},removeClass:function(e,t,o){t===i&&e.hide().slideDown(o)}}}),serverApp.controller("MobileViewSortCtrl",["$scope",function(i){i.selectedSort="ModifiedDate",i.sortDirection="descending",i.updateSortSelection=function(e,t,o){i.selectedSort=t,i.sortDirection=o},i.onSortApplyClicked=function(){var e=angular.element("[ng-controller=DashboardCtrl]").scope(),t=(e.selectedSort=i.selectedSort,e.sortDirection=i.sortDirection,[{Name:e.selectedSort,Direction:e.sortDirection}]);updateFilterParameter(void 0,void 0,void 0,e.dashboardSearchQuery,void 0,t),e.refreshDashboardList()}}]),$(document).on("shown.bs.dropdown","#dashboard-scroll-content .dashboard-tile",function(){var e;$(".tooltip").hide(),0<$(this).find(".context-menu").length&&(e=$(this).offset().top+$(this).outerHeight(!0)/2-$("#parent-dashboard-scroll-element").offset().top,$(this).find(".dashboard-options").outerHeight(!0)<e?$(this).find(".context-menu").removeClass("dropdown").addClass("dropup"):refreshDashboardScroll())}),$(document).on("hidden.bs.dropdown","#dashboard-scroll-content .dashboard-tile",function(){refreshDashboardScroll()}),$(document).on("shown.bs.dropdown","#category-scroll-content .category-item",function(){var e,t;$(".tooltip").hide(),0<$(this).find(".category-context-menu").length&&(t=$("#parent-category-scroll-element"),e=$(this).offset().top+$(this).outerHeight(!0)/2-t.offset().top,t.height()-($(this).offset().top-t.offset().top+$(this).outerHeight(!0)/2)<=(t=$(this).find(".category-context-menu .dropdown-menu").outerHeight(!0))&&t<=e?$(this).find(".category-context-menu").removeClass("dropdown").addClass("dropup"):refreshCategoryScroll())}),$(document).on("hidden.bs.dropdown","#dashboard-scroll-content .dashboard-tile",function(){refreshCategoryScroll()}),window.onpopstate=function(){applyRouting(),ResetItemList(ItemType.Dashboard)},$(document).on("mousedown touchstart","#parent-dashboard-scroll-element .e-scrollbar, #parent-category-scroll-element .e-scrollbar",function(){$(this).addClass("active")}),$(document).on("mouseup touchend mouseleave","#server-app-container",function(){$("#parent-dashboard-scroll-element .e-scrollbar, #parent-category-scroll-element .e-scrollbar").removeClass("active")}),$(document).on("click",".dashboard-tile",function(){$(".dashboard-list-section li").removeClass("active"),$(this).addClass("active")});var isItemUpdateDialogBinded=!1;function deleteCategory(e){$(this).parents(".dropdown").removeClass("open"),$(this).parents(".dropdown").find(".dropdown-backdrop").remove(),$("#delete-item-name").html(e.Name),$("#delete-item").attr("data-item-id",e.Id),document.getElementById("item-delete-confirmation").style.display="block";var t,o,i='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.DeleteCategory+'</span><span class="item-name">'+e.Name+"</span></span>";isItemDeleteDialogBinded?((o=document.getElementById("delete-item-dialog").ej2_instances)[0].header=i,o[0].show()):((t=document.createElement("div")).setAttribute("id","delete-item-dialog"),document.getElementById("dashboard-page-container").appendChild(t),(o=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"450px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:i,showCloseIcon:!0,content:document.getElementById("item-delete-confirmation")})).appendTo(t),isItemDeleteDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("delete-item-dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("delete-item-dialog")),getDeleteItemDetails(e)}function EditCategory(e,t,o){o=o.replace(new RegExp("&#xA;","g"),"\n"),o=$("<div/>").html(o).text(),$("#EditCategoryPopup #category_name").val(t),$("#EditCategoryPopup #category_description").val(o),document.getElementById("EditCategoryPopup").style.display="block";var i,a,n='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.Localization.UpdateCategory+'</span><span class="item-name">'+t+"</span></span>";isItemUpdateDialogBinded?((a=document.getElementById("edit-category-dialog").ej2_instances)[0].header=n,a[0].show()):((i=document.createElement("div")).setAttribute("id","edit-category-dialog"),document.getElementById("dashboard-page-container").appendChild(i),(a=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:460<window.innerWidth?"600px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:n,showCloseIcon:!0,content:document.getElementById("EditCategoryPopup"),buttons:[{click:function(e){updateCategory()},buttonModel:{isPrimary:!0,disabled:!0,cssClass:"app-btn-primary",content:window.Server.App.Localization.UpdateButton}},{click:function(){closeEditCategoryPopup()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.Localization.CancelButton}}]})).appendTo(i),isItemUpdateDialogBinded=!0),ejs.popups.createSpinner({target:document.getElementById("edit-category-dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("edit-category-dialog")),window.isEdited=!1,window.editData={ItemId:e,Name:t,Description:o},ejs.popups.hideSpinner(document.getElementById("edit-category-dialog"))}var isSupported=!1,type="";function result(){isSupported||(window.location=designerUrl)}function launchApplication(e){/edge/i.test(navigator.userAgent)?launchIE(e):/opr/i.test(navigator.userAgent)||"opera"in window?launchOpera(e):/chrome/i.test(navigator.appVersion)?launchChrome(e):/safari/i.test(navigator.userAgent)?launchSafari(e):/firefox/i.test(navigator.userAgent)?launchMozilla(e):/trident/i.test(navigator.userAgent)&&launchIE(e)}function launchIE(e){var t;navigator.msLaunchUri?navigator.msLaunchUri(e,msLaunchUriSuccess,msLaunchNoHandler):((t=window.open("","","width=0,height=0")).document.write("<iframe src='"+e+"></iframe>"),setTimeout(function(){try{t.location.href,isSupported=!0}catch(e){}isSupported?t.setTimeout("window.close()",100):t.close(),result()},100))}function msLaunchUriSuccess(){isSupported=!0,result()}function msLaunchNoHandler(){isSupported=!1,result()}function launchMozilla(e){iFrame=$("#hiddeniframe")[0],isSupported=!1;try{iFrame.contentWindow.location.href=e,isSupported=!0,result()}catch(e){"NS_ERROR_UNKNOWN_PROTOCOL"==e.name&&(isSupported=!1,result())}}function launchChrome(e){var t=$("#applauncherinputhidden")[0];isSupported=!1,t.focus(),console.log($($("#applauncherinputhidden")[0]).is(":focus")),t.onblur=function(){isSupported=!0},window.onblur=function(){isSupported=!0,console.log("blur")},location.href=e,setTimeout(function(){console.log($($("#applauncherinputhidden")[0]).is(":focus")),t.onblur=null,window.onblur=null,result()},2e3)}function launchSafari(e){isSupported=!1;var t=$("#hiddeniframe")[0];window.onblur=function(){isSupported=!0,console.log("blur")},t.contentWindow.location.href=e,setTimeout(function(){window.onblur=null,result()},4e3)}function launchOpera(e){var t=$("#hiddeniframe")[0],o=$("#applauncherinputhidden")[0];isSupported=!1,o.focus(),o.onblur=function(){isSupported=!0},window.onblur=function(){isSupported=!0,console.log("blur")},t.contentWindow.location.href=e,setTimeout(function(){console.log($($("#applauncherinputhidden")[0]).is(":focus")),o.onblur=null,window.onblur=null,result()},2e3)}function closeUpdateDataSourcePopup(){parent.window.IsUpdateDashboard=!1,parent.$("#update-data-source-popup").ejDialog("close"),parent.$("#update-data-source-popup-iframe").contents().find("html").text("")}function refreshSelectPicker(){$("select.update-datasource").selectpicker("refresh"),parent.$("#update-data-source-popup-iframe").contents().find("#share-datasource").attr("disabled",!1),parent.$("#update-data-source-popup-iframe").contents().find(".input-value").removeClass("input-value"),window.parent.ShowWaitingProgress("#update-data-source-popup_wrapper","hide")}function onCreateConnectionDialogClose(){$("#create-connection-popup").ejDialog("close")}$(document).on("click","#launcher",function(e){i_am_ie9?(e.preventDefault(),messageBox("su-info",window.Server.App.LocalizationContent.Information,window.Server.App.LocalizationContent.UnableToLaunchdesigner+" <a href='"+designerInstallationHelpUrl+"'>"+window.Server.App.LocalizationContent.LinkContent+"</a> "+window.Server.App.LocalizationContent.OpenDashboardDesigner,"success",function(){onCloseMessageBox()})):(e=$(this).children("#designerArgument").html(),launchApplication($("#DesignerName").val()+":"+e))}),$(function(){1400<$(parent.window).width()?$("#datasource-update").addClass("iframe-content-height"):$("#datasource-update").removeClass("iframe-content-height"),parent.$("#update-data-source-popup-iframe").contents().find("#share-datasource").attr("disabled",!0),window.parent.ShowWaitingProgress("#update-data-source-popup_wrapper","hide"),$(document).on("click",".bootstrap-select ul li.add-new",function(){$(this).parent().prev().addClass("input-value"),parent.$("#update-data-source-popup-iframe").contents().find(".bootstrap-select ul").find(".select-data-source").show(),parent.$("#update-data-source-popup-iframe").contents().find(".bootstrap-select ul").find(".divider").show(),parent.$("#datasource-popup").ejDialog("open"),parent.$("#datasource-popup_wrapper").ejWaitingPopup("show")}),$(document).on("click","#add-new-datasource",function(){parent.$("#update-data-source-popup-iframe").contents().find("select").removeClass("current-select"),$(this).parent().prev().children().find("select").addClass("current-select"),parent.$("#update-data-source-popup-iframe").contents().find(".bootstrap-select ul").find(".select-data-source").show(),parent.$("#update-data-source-popup-iframe").contents().find(".bootstrap-select ul").find(".divider").show(),parent.$("#datasource-popup").ejDialog("open"),parent.$("#datasource-popup_wrapper").ejWaitingPopup("show")}),$(document).on("click","#update-data-source-popup-iframe .dropdown-toggle",function(e){parent.$("#update-data-source-popup-iframe").contents().find("select").removeClass("current-select"),$(".bootstrap-select.open ul .add-new").remove(),$(this).parent().prev().addClass("current-select"),parent.$("#update-data-source-popup-iframe").contents().find(".bootstrap-select ul").find(".select-data-source").show(),parent.$("#update-data-source-popup-iframe").contents().find(".bootstrap-select ul").find(".divider").show()}),$(document).on("keyup",".update-datasource.bootstrap-select.open input",function(){var e=[],t=($(".bootstrap-select.open ul .add-new").remove(),$(this).val()),o=t.toLowerCase(),t=(""==t?($(".select-data-source").show(),$(".divider").show()):($(".select-data-source").hide(),$(".divider").hide()),$(".bootstrap-select.open").find("ul li").each(function(){""!=$(this).children("a").children("span.text").text()&&e.push($(this).children("a").children("span.text").text().toLowerCase())}),$.inArray(o,e));""!=o&&(-1==t?2<$(".bootstrap-select.open").find("li:not('.hide')").length?($(".bootstrap-select.open ul .divider").show(),$(".bootstrap-select.open ul li").hasClass("no-results")&&($(".bootstrap-select.open ul .no-results").hide(),$(".bootstrap-select.open ul .divider").hide())):$(".bootstrap-select.open ul .divider").hide():($(".bootstrap-select.open ul .add-new").remove(),$(".bootstrap-select.open ul .divider").hide()))}),$(document).on("click","#share-datasource",function(){window.parent.ShowWaitingProgress("#update-data-source-popup_wrapper","show");var o,e=$(this).attr("data-item-id"),t=parent.$("#update-data-source-popup-iframe").contents().find("select"),i=[];$(t).each(function(e,t){$(this).attr("data-original-value")!=$(this).val()&&(o={DataSourceId:this.value,Name:$(this).attr("name")},i.push(o))}),$.ajax({type:"POST",url:updatedatasource,data:{itemId:e,updatedDataSources:i},success:function(e){e.Success?(closeUpdateDataSourcePopup(),parent.messageBox("su-update-data-source",window.Server.App.Localization.UpdatedataSources,window.Server.App.Localization.UpdateDataSourcesSuccess,"success",function(){var e,t=parent.window.CategoryId;void 0!==t&&""!=t&&(e=parent.angular.element(parent.document.getElementById("server-items-container")).scope(),"dashboards"==window.parent.$("#item-grid-container").attr("data-grid-name")&&e.refreshCategorySection(t),parent.window.CategoryId=""),parent.onCloseMessageBox(),parent.angular.element("[ng-controller=DashboardCtrl]").scope().refreshDashboardList()})):parent.messageBox("su-update-data-source",window.Server.App.Localization.UpdateDataSourcesError,window.Server.App.Localization.InternalServerError,"success",function(){parent.onCloseMessageBox()})}}),window.parent.ShowWaitingProgress("#update-data-source-popup_wrapper","hide")}),$(document).on("change",".update-datasource",function(){var o=[],i=[],e=parent.$("#update-data-source-popup-iframe").contents().find("select");$(e).each(function(e,t){o.push($(this).attr("data-original-value")),i.push($(this).val())}),o.toString()==i.toString()?parent.$("#update-data-source-popup-iframe").contents().find("#share-datasource").attr("disabled",!0):parent.$("#update-data-source-popup-iframe").contents().find("#share-datasource").attr("disabled",!1)})}),$(document).ready(function(){$("#create-connection-popup").ejDialog({width:$(window).width(),height:$(window).height(),showOnInit:!1,allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1,close:"onCreateConnectionDialogClose",closeOnEscape:!0,beforeClose:function(e){$("#create-connection-popup").ejWaitingPopup("hide"),$("#create-connection-popup").addClass("display-none")}}),$(document).on("click","#create-datasource-connection, .create-datasource-connection",function(e){var t=createLoader("#create-connection-popup");$("#create-connection-popup").ejWaitingPopup({template:$("#"+t)}),null!=window.datasourceQueryString&&null!=window.datasourceQueryString&&""!=window.datasourceQueryString?$("#create-connection-iframe").attr("src",createDatasourceIframeUrl+"?"+window.datasourceQueryString):$("#create-connection-iframe").attr("src",createDatasourceIframeUrl),$("#connection-header").addClass("display-none"),$("#create-connection-popup").removeClass("display-none"),$("#create-connection-popup").ejDialog("open"),$("#create-connection-popup_wrapper #create-connection-popup #create-connection-iframe").css("height",$(window).height()-44),$("#create-connection-popup").ejWaitingPopup("show")})});